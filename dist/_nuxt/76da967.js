(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{3344:function(t,e,o){var content=o(3400);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(211).default)("0724b538",content,!0,{sourceMap:!1})},3399:function(t,e,o){"use strict";o(3344)},3400:function(t,e,o){var r=o(210)(!1);r.push([t.i,".chart-box[data-v-0716dbe7]{position:relative;min-height:192px;width:100%}.chart-box .chart-loading[data-v-0716dbe7]{position:absolute;left:50%;top:50%;transform:translate(-50% -50%)}.chart-box .chart-full-range[data-v-0716dbe7]{width:100%;height:100%;position:absolute;top:0;left:0;cursor:not-allowed;z-index:300}.chart[data-v-0716dbe7]{position:relative;line-height:1}.chart .zoom-button-box[data-v-0716dbe7]{width:80px;height:20px;box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:-38px}.chart .zoom-button-box div[data-v-0716dbe7]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-0716dbe7]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-0716dbe7]{width:20px;height:20px;fill:#fff;cursor:pointer}.chart .price-num[data-v-0716dbe7]{position:absolute;top:0;left:0;width:100%;overflow-x:clip;overflow-y:visible;z-index:107}.chart .price-num .range-size[data-v-0716dbe7]{position:absolute;top:2px;min-width:40px;padding:0 4px;height:20px;background:#333;border-radius:2px;font-size:12px;color:hsla(0,0%,100%,.7);text-align:center;line-height:20px;vertical-align:middle}.chart .chart-text[data-v-0716dbe7]{position:relative;z-index:105}.chart .select-add-sub[data-v-0716dbe7]{display:flex;align-items:center;justify-content:space-between;width:42px;height:22px;background:#1e1f21;border-radius:4px;position:absolute;right:0;top:-38px;border:1px solid #151515}.chart .select-add-sub>div[data-v-0716dbe7]{display:block;width:20px;height:20px;position:relative;cursor:pointer}.chart .select-add-sub>div .horizontal[data-v-0716dbe7],.chart .select-add-sub>div .vertical[data-v-0716dbe7]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:12px;background:linear-gradient(120deg,#abd8e4,#a7b6ec 38%,#a493b9)}.chart .select-add-sub>div .vertical[data-v-0716dbe7]{width:2px;height:12px}.chart .select-add-sub>div .horizontal[data-v-0716dbe7]{width:12px;height:2px}.chart .select-add-sub>div:hover .horizontal[data-v-0716dbe7],.chart .select-add-sub>div:hover .vertical[data-v-0716dbe7]{background:linear-gradient(120deg,#a493b9,#a7b6ec 38%,#abd8e4)}@media screen and (max-width:750px){.chart .zoom-button-box[data-v-0716dbe7]{top:-30px}.chart-box .chart-full-range[data-v-0716dbe7]{width:324px;height:192px;top:56px}}",""]),t.exports=r},3455:function(t,e,o){"use strict";o.r(e);o(321);var r=o(20),n=(o(3253),o(3254)),c=o.n(n),l=(o(157),o(21),o(49),o(40),o(149),o(158),o(57)),d=o(3368),h=o(186),m=o(92),f=o(296),x=o(220),v=l.default.extend({components:{Spin:c.a},props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:function(){return[]}},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1}},data:function(){return{isDraw:!1,zoom:.1,isLoading:!1,rangeSizeLowerPosition:"",rangeSizeUpperPosition:"",gap:.1}},computed:{currentPrice:function(){var t,e,o;return x.TickMath.sqrtPriceX64ToPrice(null===(t=this.poolInfo)||void 0===t?void 0:t.currentSqrtPrice,null===(e=this.poolInfo)||void 0===e?void 0:e.token_a.decimal,null===(o=this.poolInfo)||void 0===o?void 0:o.token_b.decimal).toString()},rangeSizeLower:function(){var t=0;return t=(t=(t=this.direction?100*(Number(this.minPrice)/Number(this.currentPrice)-1):100*(Number(this.minPrice)/Number(1/Number(this.currentPrice))-1))>0&&t<.1?.1:t)<0&&t>-.1?-.1:t},rangeSizeUpper:function(){var t=0;return t=(t=(t=this.direction?100*(Number(this.maxPrice)/Number(this.currentPrice)-1):100*(Number(this.maxPrice)/Number(1/Number(this.currentPrice))-1))>0&&t<.1?.1:t)<0&&t>-.1?-.1:t}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(m.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},tickList:function(t){this.poolInfo&&!Object(m.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},currentTick:function(t){this.poolInfo&&!Object(m.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},gap:function(){this.poolInfo&&!Object(m.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},methods:{numberformat:m.i,poolInfoWatch:function(t,e){t&&!Object(m.b)(t)&&t!==e&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t,e){t!==e&&this.dataProcessing(this.poolInfo,this.zoom)},maxPriceWatch:function(t,e){t!==e&&this.dataProcessing(this.poolInfo,this.zoom)},zoomOut:function(){if(!(this.zoom<.001625)){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},zoomIn:function(){if(!(this.zoom>32)){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},dataProcessing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(t&&t.token_a&&this.tickList.length>0&&!this.chartLoading&&this.minPrice&&this.maxPrice){this.isDraw=!0;var o,n,c=this.currentTick,l=c+100*e,d=c-100*e;"0.01%"!==t.fee&&(l=c+3e3*e,d=c-3e3*e),n="∞"===this.maxPrice?0:this.direction?x.TickMath.priceToTickIndex(new f.a(this.maxPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):x.TickMath.priceToTickIndex(new f.a(1/this.minPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal);var h=0;if(c>=(o="0"===this.minPrice?0:this.direction?x.TickMath.priceToTickIndex(new f.a(this.minPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):x.TickMath.priceToTickIndex(new f.a(1/this.maxPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal))&&c<=n){var m=c-o,v=n-c;h=Math.max(Math.abs(m),Math.abs(v))}else h=c<o?Math.abs(n):Math.abs(o);l=c+h+1e3*e,d=c-h-1e3*e;var k=Number(t.currentLiquity)/Math.pow(10,6),P=this.tickList;console.log(P,"=======>>>>tick_info_array");for(var N=[],I=[],w={},i=0;i<P.length;i++)(w=P[i]).index<=c&&w.index>=d?N.unshift(w):w.index>c&&w.index<=l&&I.push(w);for(var z=k,O=0;O<N.length;O++)N[O].liquityAmount=z,z-=Number(N[O].liquidityNet.toString())/Math.pow(10,6);for(var _=k,j=0;j<I.length;j++)I[j].liquityAmount=_,_+=Number(I[j].liquidityNet.toString())/Math.pow(10,6);var y=[];y=[].concat(Object(r.a)(N.reverse()),[{tick:c,liquityAmount:k}],I),this.direction||(y=y.reverse()),this.drawChart(y,d,l,o,n,c)}},drawChart:function(t,e,o,r,n,c){var l=this,f=0,v=0,k=20,P=0,N=460-P-v,I=190-f-k,w=[e,c-(c-e)/2,c,c+(o-c)/2,o],z=[],O=w[0]-(w[1]-w[0]),_=w[4]+(w[4]-w[3]),j=N/(_-O);console.log(t,"===>chartData"),d.e("#chart").selectAll("*").remove();var svg=d.e("#chart").attr("width",N+P+v).attr("height",I+f+k).append("g").attr("transform","translate(".concat(P,",").concat(v,")")),y=d.b(t,(function(t){return Number(t.liquityAmount)}))||0,M=d.d().range([0,I]).domain([y,0]);d.c().rangeRound([0,N]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(e,o){return 0===o?0:l.direction?Math.abs(t[o-1].index-O)*j:Math.abs(_-t[o-1].index)*j})).attr("y",(function(e,o){return 0===o?0:l.direction?M(t[o-1].liquityAmount):M(e.liquityAmount)})).attr("width",(function(e,o){return 0===o?0:l.direction?Math.abs(e.index-t[o-1].index)*j:Math.abs(t[o-1].index-e.index)*j})).attr("height",(function(e,o){return 0===o?0:l.direction?I-M(t[o-1].liquityAmount):I-M(e.liquityAmount)})).attr("fill","#3F3B7F").attr("class","bars");var S=svg.append("g"),C=(S.append("line").attr("x1",20).attr("y1",170).attr("x2",420).attr("y2",170).attr("stroke-width",1).attr("stroke","#50535D"),S.append("g")),T=0;if(l.direction){for(var i=0;i<w.length;i++){var L=String(Object(m.c)(String(Object(h.f)(w[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)<1e-6?Object(m.c)(String(Object(h.f)(w[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),9):Object(m.c)(String(Object(h.f)(w[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)||"0");console.log(L),console.log(Object(m.l)(Number(L),10),"====>>>>>pricepriceprice"),console.log(Number(Object(m.l)(Number(L),8)),"====>>>>>>>12312312312"),L=L.includes("undefined")?String(L.substring(0,L.indexOf("."))):0!==Number(Object(m.l)(Number(L),8))?Object(m.l)(Number(L),8):0!==Number(Object(m.l)(Number(L),12))?Object(m.l)(Number(L),12):0!==Number(Object(m.l)(Number(L),14))?Object(m.l)(Number(L),14):0!==Number(Object(m.l)(Number(L),16))?Object(m.l)(Number(L),16):Object(m.l)(Number(L),20),z.push(L);for(var F=Math.abs(w[i]-O)*j,A=0,E=0;E<L.length;E++)"1"===L[E]?A+=4.02:"."===L[E]?A+=2.64:"7"===L[E]?A+=5.48:A+=6;C.append("text").text(L).attr("x",F-A/2).attr("y",185).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}console.log(z,"===>>>>>xPriceArr"),T=Math.abs(c-O)*j}else{for(var U=w.length-1;U>=0;U--){var W=Object(m.c)(String(1/Object(h.f)(w[U],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)||"0";W=W.includes("undefined")?String(W.substring(0,W.indexOf("."))):0!==Number(Object(m.l)(Number(W),8))?Object(m.l)(Number(W),8):0!==Number(Object(m.l)(Number(W),12))?Object(m.l)(Number(W),12):0!==Number(Object(m.l)(Number(W),14))?Object(m.l)(Number(W),14):0!==Number(Object(m.l)(Number(W),16))?Object(m.l)(Number(W),16):Object(m.l)(Number(W),20),z.push(W);for(var D=Math.abs(w[U]-_)*j,B=0,J=0;J<W.length;J++)"1"===W[J]?B+=4.02:"."===W[J]?B+=2.64:"7"===W[J]?B+=5.48:B+=6;C.append("text").text(W).attr("x",D-B/2).attr("y",185).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}T=Math.abs(c-_)*j}svg.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",170).attr("stroke-width",2).attr("stroke","#7EC2FF").attr("transform","translate("+T+", 0)");var V=svg.append("g").attr("id","left-handle");V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",170).attr("stroke-width",2).attr("stroke",l.direction?"#1CE1CF":"#0090FF"),V.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill",l.direction?"#1CE1CF":"#0090FF").attr("transform","translate(1, 32) rotate(180)"),V.append("path").attr("d","M 0 0 L 8 0 L8 8 Z").attr("transform","translate(-8, 21) rotate(225)"),V.append("rect").attr("width",1).attr("height",11).attr("x",-6).attr("y",10).attr("fill","#000");var Z=svg.append("g").attr("id","right-handle");Z.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",170).attr("stroke-width",2).attr("stroke",l.direction?"#0090FF":"#1CE1CF"),Z.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill",l.direction?"#0090FF":"#1CE1CF").attr("transform","translate(-1, -2)"),Z.append("path").attr("d","M 0 0 L 8 0 L8 8 Z").attr("transform","translate(9, 10) rotate(45)"),Z.append("rect").attr("width",1).attr("height",11).attr("x",6).attr("y",10).attr("fill","#000");var $,R,X=d.a().extent([[0,0],[N,I]]).handleSize(30).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;var e,o;V.attr("transform","translate("+t.selection[0]+", 0)"),Z.attr("transform","translate("+t.selection[1]+", 0)"),this.rangeSizeLowerPosition=N-t.selection[0]+36+"px",this.rangeSizeUpperPosition=t.selection[1]+38+"px",l.direction?(e=x.TickMath.tickIndexToPrice(t.selection[0]/j+O,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber(),o=x.TickMath.tickIndexToPrice(t.selection[1]/j+O,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber()):(e=1/x.TickMath.tickIndexToPrice(_-t.selection[0]/j,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber(),o=1/x.TickMath.tickIndexToPrice(_-t.selection[1]/j,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber());console.log(e,"===>>>>>>>minPrice"),console.log(o,"===>>>>>minPrice"),console.log(Object(m.l)(e,9),"===>>>>>>>minPrice"),console.log(Object(m.l)(o,9),"===>>>>>minPrice"),console.log(Object(m.e)(e,9),"===>>>>>>>minPrice"),console.log(Object(m.e)(o,9),"===>>>>>minPrice"),console.log(String(Number(Object(m.e)(e,9))),"===>>>>>>>ttttttttt"),console.log(String(Number(Object(m.e)(o,9))),"===>>>>>ttttttttt"),console.log(0==Number(Object(m.l)(e,9))?"0":Object(m.l)(e,15),"===>>>>>getprice"),console.log(0==Number(Object(m.l)(o,9))?"0":Object(m.l)(o,15),"===>>>>>getprice"),l.$emit("onChangeMinPrice",String(e)),l.$emit("onChangeMaxPrice",String(o))}));this.direction?($=r<O?-100:Math.abs(r-O)*j,R=n<O?-100:Math.abs(n-O)*j):(R=r<O?-100:Math.abs(_-r)*j,$=n<O?-100:Math.abs(_-n)*j),"0"===this.minPrice&&($=0),"∞"===this.maxPrice&&(R=N),this.rangeSizeLowerPosition=N-$+30+"px",this.rangeSizeUpperPosition=R+30+"px",svg.append("g").attr("class","brush").call(X).call(X.move,[$,R]),V.attr("transform","translate("+$+", 0)"),Z.attr("transform","translate("+R+", 0)"),d.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#000000"),this.isDraw=!1}}}),k=v,P=(o(3399),o(212)),component=Object(P.a)(k,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.chartLoading,expression:"!chartLoading"}],staticClass:"chart"},[e("div",{staticClass:"select-add-sub"},[e("div",{staticClass:"minus",on:{click:t.zoomIn}},[e("span",{staticClass:"horizontal"})]),t._v(" "),e("div",{staticClass:"plus",on:{click:t.zoomOut}},[e("span",{staticClass:"vertical"}),t._v(" "),e("span",{staticClass:"horizontal"})])]),t._v(" "),e("div",{staticClass:"price-num"},["∞"!=t.maxPrice&&t.tickList.length>0?e("div",{staticClass:"range-size range-size-lower",style:{right:t.rangeSizeLowerPosition}},[t._v("\n        "+t._s(t.numberformat(t.rangeSizeLower.toFixed(1),1))+"%\n      ")]):t._e(),t._v(" "),"∞"!=t.maxPrice&&t.tickList.length>0?e("div",{staticClass:"range-size range-size-upper",style:{left:t.rangeSizeUpperPosition}},[t._v("\n        "+t._s(t.numberformat(t.rangeSizeUpper.toFixed(1),1))+"%\n      ")]):t._e()]),t._v(" "),e("svg",{staticClass:"chart-text",attrs:{id:"chart"}})]),t._v(" "),"∞"===t.maxPrice?e("div",{staticClass:"chart-full-range"}):t._e(),t._v(" "),t.chartLoading?e("Spin",{staticClass:"chart-loading"}):t._e()],1)}),[],!1,null,"0716dbe7",null);e.default=component.exports}}]);