(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{2009:function(t,o,e){var content=e(2056);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(115).default)("34217961",content,!0,{sourceMap:!1})},2055:function(t,o,e){"use strict";e(2009)},2056:function(t,o,e){var r=e(114)(!1);r.push([t.i,".chart-box[data-v-3e6bfdd4]{position:relative;min-height:201px}.chart-box .chart-loading[data-v-3e6bfdd4]{position:absolute;left:50%;top:50%;transform:translate(-50% -50%)}.chart[data-v-3e6bfdd4]{position:relative}.chart .zoom-button-box[data-v-3e6bfdd4]{width:80px;height:28px;background:linear-gradient(220deg,#3e434e,#23262b);box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:-18px}.chart .zoom-button-box div[data-v-3e6bfdd4]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-3e6bfdd4]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-3e6bfdd4]{width:20px;height:20px;fill:#fff;cursor:pointer}@media screen and (max-width:750px){.chart .zoom-button-box[data-v-3e6bfdd4]{top:-30px}}",""]),t.exports=r},2095:function(t,o,e){"use strict";e.r(o);var r=e(38),n=(e(1946),e(1947)),c=e.n(n),l=(e(327),e(48),e(106),e(137),e(36)),h=e(2030),d=e(140),f=e(101),m=e(11),k=e.n(m),x=l.default.extend({components:{Spin:c.a},props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:function(){return[]}},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1}},data:function(){return{isDraw:!1,zoom:1,isLoading:!1}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},tickList:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},currentTick:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},methods:{poolInfoWatch:function(t,o){t&&!Object(f.b)(t)&&t!==o&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t,o){t!==o&&this.dataProcessing(this.poolInfo,this.zoom)},maxPriceWatch:function(t,o){t!==o&&this.dataProcessing(this.poolInfo,this.zoom)},zoomOut:function(){if(!(this.zoom<.015625)){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},zoomIn:function(){if(!(this.zoom>32)){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},dataProcessing:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t&&t.token_a&&this.tickList.length>0&&!this.chartLoading){this.isDraw=!0;var e,n,c=this.currentTick,l=c+100*o,h=c-100*o;console.log("D3Chart###bug###test##currentPrice###正###",Object(d.tick2UiPrice)(c,this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toString()),console.log("D3Chart###bug###test##currentPrice###反###",Object(d.tick2UiPrice)(c,this.poolInfo.token_b.decimal,this.poolInfo.token_a.decimal).toString()),n="∞"===this.maxPrice?0:this.direction?Object(d.uiPrice2Tick)(new k.a(Object(f.c)(String(this.maxPrice),12)),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):Object(d.uiPrice2Tick)(new k.a(1/Number(Object(f.c)(String(this.minPrice),12))),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal),e="0"===this.minPrice?0:this.direction?Object(d.uiPrice2Tick)(new k.a(Object(f.c)(String(this.minPrice),12)),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):Object(d.uiPrice2Tick)(new k.a(1/Number(Object(f.c)(String(this.maxPrice),12))),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal);for(var m=t.currentLiquity.div(Math.pow(10,6)).toNumber(),x=this.tickList,v=[],w=[],P={},i=0;i<x.length;i++)(P=x[i]).tick<=c&&P.tick>=h?v.unshift(P):P.tick>c&&P.tick<=l&&w.push(P);for(var I=m,y=0;y<v.length;y++)v[y].liquityAmount=I,I-=v[y].liquityNet.div(Math.pow(10,6)).toNumber();for(var _=m,z=0;z<w.length;z++)w[z].liquityAmount=_,_+=w[z].liquityNet.div(Math.pow(10,6)).toNumber();var C=[];C=[].concat(Object(r.a)(v.reverse()),[{tick:c,liquityAmount:m}],w),this.direction||(C=C.reverse()),this.drawChart(C,h,l,e,n,c)}},drawChart:function(t,o,e,r,n,c){var l=this,m=20,k=20,x=20,v=20,w=460-v-k,P=195-m-x,I=[o,c-(c-o)/2,c,c+(e-c)/2,e],y=[],_=I[0]-(I[1]-I[0]),z=I[4]+(I[4]-I[3]),C=w/(z-_);h.e("#chart-h5").selectAll("*").remove();var svg=h.e("#chart-h5").attr("width",w+v+k).attr("height",P+m+x).append("g").attr("transform","translate(".concat(v,",").concat(k,")")),O=h.b(t,(function(t){return Number(t.liquityAmount)}))||0,j=h.d().range([0,P]).domain([O,0]);h.c().rangeRound([0,w]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(o,e){return 0===e?0:l.direction?Math.abs(t[e-1].tick-_)*C:Math.abs(z-t[e-1].tick)*C})).attr("y",(function(o,e){return 0===e?0:l.direction?j(t[e-1].liquityAmount):j(o.liquityAmount)})).attr("width",(function(o,e){return 0===e?0:l.direction?Math.abs(o.tick-t[e-1].tick)*C:Math.abs(t[e-1].tick-o.tick)*C})).attr("height",(function(o,e){return 0===e?0:l.direction?P-j(t[e-1].liquityAmount):P-j(o.liquityAmount)})).attr("fill","#2C4A57").attr("class","bars");var M=svg.append("g"),D=(M.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),M.append("g"));if(l.direction)for(var i=0;i<I.length;i++){var N=Object(f.c)(String(Object(d.tick2UiPrice)(I[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)||"0";y.push(N);for(var S=Math.abs(I[i]-_)*C,A=0,L=0;L<N.length;L++)"1"===N[L]?A+=4.02:"."===N[L]?A+=2.64:"7"===N[L]?A+=5.48:A+=6;D.append("text").text(N).attr("x",S-A/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(var T=I.length-1;T>=0;T--){var U=Object(f.c)(String(1/Object(d.tick2UiPrice)(I[T],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)||"0";y.push(U);for(var W=Math.abs(I[T]-z)*C,E=0,B=0;B<U.length;B++)"1"===U[B]?E+=4.02:"."===U[B]?E+=2.64:"7"===U[B]?E+=5.48:E+=6;D.append("text").text(U).attr("x",W-E/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}var F=svg.append("g").attr("id","left-handle");F.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),F.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#1EE1CF").attr("stroke","#707378").attr("transform","translate(1, 32) rotate(180)"),F.append("rect").attr("width",1).attr("height",10).attr("x",-9).attr("y",10).attr("fill","white"),F.append("rect").attr("width",1).attr("height",10).attr("x",-6).attr("y",10).attr("fill","white");var $=svg.append("g").attr("id","right-handle");$.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),$.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#005AFF").attr("stroke","#707378").attr("transform","translate(-1, -2)"),$.append("rect").attr("width",1).attr("height",10).attr("x",6).attr("y",10).attr("fill","white"),$.append("rect").attr("width",1).attr("height",10).attr("x",9).attr("y",10).attr("fill","white");var J=h.a().extent([[0,0],[w,P]]).handleSize(30).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;var o,e;console.log(t.selection),F.attr("transform","translate("+t.selection[0]+", 0)"),$.attr("transform","translate("+t.selection[1]+", 0)"),console.log("D3Chart#####draw####e.selection[0]###",t.selection[0]),console.log("D3Chart#####draw####e.selection[1]###",t.selection[1]),console.log("D3Chart#####draw####unit###",C),console.log("D3Chart#####draw####utickMin###",_),console.log("D3Chart#####draw####e.selection[0] / unit + utickMin###",t.selection[0]/C+_),console.log("D3Chart#####draw####e.selection[1] / unit + utickMin###",t.selection[1]/C+_),console.log("D3Chart#####draw####this.direction###",l.direction),l.direction?(o=Object(d.tick2UiPrice)(t.selection[0]/C+_,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber(),e=Object(d.tick2UiPrice)(t.selection[1]/C+_,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber()):(o=1/Object(d.tick2UiPrice)(t.selection[1]/C+_,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber(),e=1/Object(d.tick2UiPrice)(t.selection[0]/C+_,l.poolInfo.token_a.decimal,l.poolInfo.token_b.decimal).toNumber());console.log("D3Chart#####draw####minPrice###",o),console.log("D3Chart#####draw####maxPrice###",e),l.$emit("onChangeMinPrice",String(o)),l.$emit("onChangeMaxPrice",String(e))}));console.log("D3Chart#####draw###minPriceTick###",r),console.log("D3Chart#####draw###maxPriceTick###",n),console.log("D3Chart#####draw###utickMin####",_),console.log("D3Chart#####draw###utickMax####",z);var V=r<_?-100:Math.abs(r-_)*C,X=n<_?-100:Math.abs(n-_)*C;console.log("D3Chart#####draw###minPriceTickX###",V),console.log("D3Chart#####draw###maxPriceTickX###",X),"0"===this.minPrice&&(V=0),"∞"===this.maxPrice&&(X=w),svg.append("g").attr("class","brush").call(J).call(J.move,[V,X]),F.attr("transform","translate("+V+", 0)"),$.attr("transform","translate("+X+", 0)"),h.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255, 255, 255, 0.4"),this.isDraw=!1}}}),v=x,w=(e(2055),e(105)),component=Object(w.a)(v,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"chart-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.chartLoading,expression:"!chartLoading"}],staticClass:"chart"},[e("div",{staticClass:"zoom-button-box"},[e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomOut","aria-hidden":"true"},on:{click:t.zoomOut}},[e("use",{attrs:{"xlink:href":"#icon-big"}})])]),t._v(" "),e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomIn","aria-hidden":"true"},on:{click:t.zoomIn}},[e("use",{attrs:{"xlink:href":"#icon-small"}})])])]),t._v(" "),e("svg",{attrs:{id:"chart-h5"}})]),t._v(" "),t.chartLoading?e("Spin",{staticClass:"chart-loading"}):t._e()],1)}),[],!1,null,"3e6bfdd4",null);o.default=component.exports}}]);