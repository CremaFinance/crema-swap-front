(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1830:function(t,r,e){var content=e(1902);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(100).default)("50edf342",content,!0,{sourceMap:!1})},1901:function(t,r,e){"use strict";e(1830)},1902:function(t,r,e){var o=e(99)(!1);o.push([t.i,".chart[data-v-6eb0144a]{position:relative}.chart .zoom-button-box[data-v-6eb0144a]{width:80px;height:28px;background:linear-gradient(220deg,#3e434e,#23262b);box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:-14px}.chart .zoom-button-box div[data-v-6eb0144a]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-6eb0144a]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-6eb0144a]{width:20px;height:20px;fill:#fff;cursor:pointer}",""]),t.exports=o},1995:function(t,r,e){"use strict";e.r(r);var o=e(38),n=(e(326),e(35),e(86),e(118),e(29)),c=e(1987),l=e(187),h=e(59),d=e(14),f=e.n(d),m=n.default.extend({props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0}},data:function(){return{isDraw:!1,zoom:.125}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(h.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},mounted:function(){this.isDraw||!this.poolInfo||Object(h.b)(this.poolInfo)||this.dataProcessing(this.poolInfo,this.zoom)},methods:{poolInfoWatch:function(t,r){t&&!Object(h.b)(t)&&t!==r&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t,r){console.log("minPriceWatch没走到这儿####newVal",t),t!==r&&this.dataProcessing(this.poolInfo,this.zoom)},maxPriceWatch:function(t,r){console.log("maxPriceWatch没走到这儿####newVal",t),t!==r&&this.dataProcessing(this.poolInfo,this.zoom)},zoomOut:function(){if(!(this.zoom<.015625)){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},zoomIn:function(){if(!(this.zoom>32)){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},dataProcessing:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.125;if(console.log("zoom####",r),t&&t.coin){var e=t.currentPriceView;console.log("dataProcessing####current_price#####",e);var n=Object(l.i)(Math.sqrt(e));console.log("这里this.minPrice####",this.minPrice),console.log("这里this.maxPrice####",this.maxPrice);var c=(n+1e3)*r,d=(n-1e3)*r;console.log("这里currentTick####",n),console.log("this.minPrice123123####",this.minPrice),console.log("this.maxPrice123123####",this.maxPrice);var m=Object(l.i)(Number(Object(h.c)(String(this.minPrice),12))),x=Object(l.i)(Number(Object(h.c)(String(this.maxPrice),12)));console.log("infos.current_liquity####",t.current_liquity.toString());var v=new f.a(t.current_liquity.toString()).div(Math.pow(10,6)).toNumber(),P=t.tick_info_array;console.log("tick_info_array######",P);for(var y=[],k=[],w={},i=0;i<P.length;i++)(w=P[i]).tick<=n&&w.tick>=d?y.unshift(w):w.tick>n&&w.tick<=c&&k.push(w);for(var z=v,j=0;j<y.length;j++)y[j].liquityAmount=z,z-=new f.a(y[j].liquity_net.toString()).div(Math.pow(10,6)).toNumber();for(var M=v,O=0;O<k.length;O++)k[O].liquityAmount=M,M+=new f.a(k[O].liquity_net.toString()).div(Math.pow(10,6)).toNumber();console.log("d3####leftArray#####",y),console.log("d3####rightArray#####",k);var I=[];I=[].concat(Object(o.a)(y.reverse()),[{tick:n,liquityAmount:v}],k),this.direction||(I=I.reverse()),console.log("d3##chartData#####",I),console.log("这里这里####minPriceTick####",m),console.log("这里这里####maxPriceTick####",x),this.drawChart(I,d,c,m,x,n)}},drawChart:function(t,r,e,o,n,d){var f=this,m=20,x=20,v=20,P=20,y=460-P-x,k=195-m-v,w=y/(e-r);c.e("#chart").selectAll("*").remove();var svg=c.e("#chart").attr("width",y+P+x).attr("height",k+m+v).append("g").attr("transform","translate(".concat(P,",").concat(x,")")),z=c.b(t,(function(t){return Number(t.liquityAmount)}))||0,j=c.d().range([0,k]).domain([z,0]);c.c().rangeRound([0,y]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(o,n){return 0===n?0:f.direction?Math.abs(t[n-1].tick-r)*w:Math.abs(e-t[n-1].tick)*w})).attr("y",(function(r,e){return 0===e?0:f.direction?j(t[e-1].liquityAmount):j(r.liquityAmount)})).attr("width",(function(r,e){return 0===e?0:f.direction?Math.abs(r.tick-t[e-1].tick)*w:Math.abs(t[e-1].tick-r.tick)*w})).attr("height",(function(r,e){return 0===e?0:f.direction?k-j(t[e-1].liquityAmount):k-j(r.liquityAmount)})).attr("fill","#2C4A57").attr("class","bars");var M=svg.append("g"),O=(M.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),M.append("g")),I=[r/1.2,r/2.4,d,e/2.4,e/1.2],A=[];if(f.direction)for(var i=0;i<I.length;i++){var _=Object(h.c)(String(Object(l.j)(I[i])),6)||"0";A.push(_),console.log("xArr[i]####",I[i]),console.log("tickMin####",r),console.log("unit####",w);var S=Math.abs(I[i]-r)*w;console.log("x#####",S);for(var C=0,W=0;W<_.length;W++)"1"===_[W]?C+=4.02:"."===_[W]?C+=2.64:"7"===_[W]?C+=5.48:C+=6;console.log("length#####",C),O.append("text").text(_).attr("x",S-C/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(var N=I.length-1;N>=0;N--){var T=Object(h.c)(String(Object(l.j)(I[N])/1),6)||"0";A.push(T);for(var V=Math.abs(I[N]-r)*w,D=0,E=0;E<T.length;E++)"1"===T[E]?D+=4.02:"."===T[E]?D+=2.64:"7"===T[E]?D+=5.48:D+=6;O.append("text").text(T).attr("x",V-D/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}console.log("xPriceArr#####",A);var F=svg.append("g").attr("id","left-handle");F.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),F.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#1EE1CF").attr("stroke","#707378").attr("transform","translate(1, 32) rotate(180)"),F.append("rect").attr("width",1).attr("height",10).attr("x",-9).attr("y",10).attr("fill","white"),F.append("rect").attr("width",1).attr("height",10).attr("x",-6).attr("y",10).attr("fill","white");var $=svg.append("g").attr("id","right-handle");$.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),$.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#005AFF").attr("stroke","#707378").attr("transform","translate(-1, -2)"),$.append("rect").attr("width",1).attr("height",10).attr("x",6).attr("y",10).attr("fill","white"),$.append("rect").attr("width",1).attr("height",10).attr("x",9).attr("y",10).attr("fill","white");var B=c.a().extent([[0,0],[y,k]]).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;console.log(t.selection),F.attr("transform","translate("+t.selection[0]+", 0)"),$.attr("transform","translate("+t.selection[1]+", 0)");var e=Object(l.j)(t.selection[0]/w+r),o=Object(l.j)(t.selection[1]/w+r);f.$emit("onChangeMinPrice",String(e)),f.$emit("onChangeMaxPrice",String(o))})),J=Math.abs(o-r)*w,X=Math.abs(n-r)*w;"0"===this.minPrice&&(J=0),"∞"===this.maxPrice&&(X=y),console.log("unit####",w),console.log("this.minPrice123####",this.minPrice),console.log("this.maxPrice123####",this.maxPrice),console.log("minPriceTickX#####",J),console.log("maxPriceTickX#####",X),svg.append("g").attr("class","brush").call(B).call(B.move,[J,X]),F.attr("transform","translate("+J+", 0)"),$.attr("transform","translate("+X+", 0)"),c.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255, 255, 255, 0.4")}}}),x=m,v=(e(1901),e(101)),component=Object(v.a)(x,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"chart"},[e("div",{staticClass:"zoom-button-box"},[e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomOut","aria-hidden":"true"},on:{click:t.zoomOut}},[e("use",{attrs:{"xlink:href":"#icon-big"}})])]),t._v(" "),e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomIn","aria-hidden":"true"},on:{click:t.zoomIn}},[e("use",{attrs:{"xlink:href":"#icon-small"}})])])]),t._v(" "),e("svg",{attrs:{id:"chart"}})])}),[],!1,null,"6eb0144a",null);r.default=component.exports}}]);