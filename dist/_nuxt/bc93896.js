(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1655:function(e,t,n){"use strict";var r=n(15),o=n(778);r({target:"String",proto:!0,forced:n(779)("fixed")},{fixed:function(){return o(this,"tt","","")}})},1957:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return $e}));var o=n(51),c=n.n(o),l=n(81),h=n(9),d=n(1958),f=n(11),y=n.n(f),m=n(1960),k=n.n(m),O=n(7);function j(e,t,n,r,o,c,l){try{var h=e[c](l),d=h.value}catch(e){return void n(e)}h.done?t(d):Promise.resolve(d).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function l(e){j(c,r,o,l,h,"next",e)}function h(e){j(c,r,o,l,h,"throw",e)}l(void 0)}))}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var I=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,c=Object.create(o.prototype),l=new K(r||[]);return c._invoke=function(e,t,n){var r=m;return function(o,c){if(r===O)throw new Error("Generator is already running");if(r===j){if("throw"===o)throw c;return L()}for(n.method=o,n.arg=c;;){var l=n.delegate;if(l){var h=_(l,n);if(h){if(h===w)continue;return h}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===m)throw r=j,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=O;var d=y(e,t,n);if("normal"===d.type){if(r=n.done?j:k,d.arg===w)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(r=j,n.method="throw",n.arg=d.arg)}}}(e,n,l),c}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var m="suspendedStart",k="suspendedYield",O="executing",j="completed",w={};function v(){}function S(){}function I(){}var A={};d(A,c,(function(){return this}));var x=Object.getPrototypeOf,P=x&&x(x(R([])));P&&P!==n&&r.call(P,c)&&(A=P);var E=I.prototype=v.prototype=Object.create(A);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,c,l,h){var d=y(e[o],e,c);if("throw"!==d.type){var f=d.arg,m=f.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,l,h)}),(function(e){n("throw",e,l,h)})):t.resolve(m).then((function(e){f.value=e,l(f)}),(function(e){return n("throw",e,l,h)}))}h(d.arg)}var o;this._invoke=function(e,r){function c(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(c,c):c()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return w;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var o=y(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,w;var c=o.arg;return c?c.done?(n[e.resultName]=c.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function W(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function K(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(W,this),this.reset(!0)}function R(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:L}}function L(){return{value:t,done:!0}}return S.prototype=I,d(E,"constructor",I),d(I,"constructor",S),S.displayName=d(I,h,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,d(e,h,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},T(B.prototype),d(B.prototype,l,(function(){return this})),e.AsyncIterator=B,e.async=function(t,n,r,o,c){void 0===c&&(c=Promise);var l=new B(f(t,n,r,o),c);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},T(E),d(E,h,"Generator"),d(E,c,(function(){return this})),d(E,"toString",(function(){return"[object Generator]"})),e.keys=function(object){var e=[];for(var t in object)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in object)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,K.prototype={constructor:K,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],l=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var h=r.call(c,"catchLoc"),d=r.call(c,"finallyLoc");if(h&&d){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(h){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),N(t),w}},catch:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var r=n.arg;N(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),w}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));c.a.config({precision:64,rounding:c.a.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var A=new c.a(10),x=new c.a(2).pow(64),P=x.div(2).sub(1),E=x.div(2).neg(),T=x.sub(1),B=x.pow(63).sub(1),_=B.neg(),W=x.pow(64).sub(1),N=40,K=function(){function e(){}return e.from64Buffer=function(e,t){void 0===t&&(t=0),8!==e.length&&Object(l.default)(!1),Math.abs(t)<N||Object(l.default)(!1);var n=e[7]>=128?new y.a([].concat(e).map((function(i){return("00"+Math.abs(255&~i).toString(16)).slice(-2)})).join(""),16,"le").add(new y.a(1)).neg():new y.a(e,"le");return new c.a(n.toString()).div(A.pow(t))},e.fromU64Buffer=function(e,t){return void 0===t&&(t=0),8!==e.length&&Object(l.default)(!1),Math.abs(t)<N||Object(l.default)(!1),new c.a(new y.a(e,16,"le").toString()).div(A.pow(t))},e.from128Buffer=function(e,t){void 0===t&&(t=0),16!==e.length&&Object(l.default)(!1),Math.abs(t)<N||Object(l.default)(!1);var n=e[15]>=128?new y.a([].concat(e).map((function(i){return("00"+Math.abs(255&~i).toString(16)).slice(-2)})).join(""),16,"le").add(new y.a(1)).neg():new y.a(e,"le");return new c.a(n.toString()).div(A.pow(t))},e.fromU128Buffer=function(e,t){return void 0===t&&(t=0),16!==e.length&&Object(l.default)(!1),Math.abs(t)<N||Object(l.default)(!1),new c.a(new y.a(e,"le").toString()).div(A.pow(t))},e.to64Buffer=function(e,t){void 0===t&&(t=0),Math.abs(t)<N||Object(l.default)(!1),(e=e.mul(A.pow(t)).round()).greaterThanOrEqualTo(E)&&e.lessThanOrEqualTo(P)||Object(l.default)(!1);var n=new y.a(e.toString());if(n.isNeg()){var r=n.add(new y.a(1)).toBuffer("le",8);return r.forEach((function(e,t,input){input[t]=255&~e})),r}return n.toBuffer("le",8)},e.toU64Buffer=function(e,t){return void 0===t&&(t=0),Math.abs(t)<N||Object(l.default)(!1),(e=e.mul(A.pow(t)).round()).greaterThanOrEqualTo(0)&&e.lessThanOrEqualTo(T)||Object(l.default)(!1),new y.a(e.toString()).toBuffer("le",8)},e.to128Buffer=function(e,t){void 0===t&&(t=0),Math.abs(t)<N||Object(l.default)(!1),(e=e.mul(A.pow(t)).round()).greaterThanOrEqualTo(_)&&e.lessThanOrEqualTo(B)||Object(l.default)(!1);var n=new y.a(e.toString());if(n.isNeg()){var r=n.add(new y.a(1)).toBuffer("le",16);return r.forEach((function(e,t,input){input[t]=255&~e})),r}return n.toBuffer("le",16)},e.toU128Buffer=function(e,t){return void 0===t&&(t=0),Math.abs(t)<N||Object(l.default)(!1),(e=e.mul(A.pow(t)).round()).greaterThanOrEqualTo(0)&&e.lessThanOrEqualTo(W)||Object(l.default)(!1),new y.a(e.toString()).toBuffer("le",16)},e}(),R=function(e){void 0===e&&(e="publicKey");var t=Object(h.blob)(32,e),n=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}(t),r=n.encode,o=n.decode,c=t;return c.decode=function(e,t){var n=o(e,t);return new d.b(n)},c.encode=function(e,t,n){var o=e.toBuffer();return r(o,t,n)},c},L=function(e,t){void 0===e&&(e="uint64"),void 0===t&&(t=0);var n=Object(h.blob)(8,e),r=n.decode.bind(n),o=n.encode.bind(n),c=n;return c.decode=function(e,n){var o=r(e,n);return K.fromU64Buffer(o,t)},c.encode=function(e,n,r){var c=K.toU64Buffer(e,t);return o(c,n,r)},c},D=function(e,t){void 0===e&&(e="uint64"),void 0===t&&(t=0);var n=Object(h.blob)(16,e),r=n.decode.bind(n),o=n.encode.bind(n),c=n;return c.decode=function(e,n){var o=r(e,n);return K.from128Buffer(o,t)},c.encode=function(e,n,r){var c=K.to128Buffer(e,t);return o(c,n,r)},c},U=function(e,t){void 0===e&&(e="uint64"),void 0===t&&(t=0);var n=Object(h.blob)(16,e),r=n.decode.bind(n),o=n.encode.bind(n),c=n;return c.decode=function(e,n){var o=r(e,n);return K.fromU128Buffer(o,t)},c.encode=function(e,n,r){var c=K.toU128Buffer(e,t);return o(c,n,r)},c};function z(){if(k.a.config(),e.env.LIVE){switch(e.env.CLUSTER){case"devnet":case"testnet":case"mainnet-beta":return e.env.CLUSTER}throw'Unknown cluster "'+e.env.CLUSTER+'", check the .env file'}}var M,C=z();e.env.RPC_URL||e.env.LIVE,e.env.RPC_URL||e.env.LIVE,e.env.WALLET_URL;function F(e,t){return G.apply(this,arguments)}function G(){return G=w(I.mark((function e(t,n){var r,o,c,l=arguments;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=l[c];return e.abrupt("return",Object(d.g)(t,n,o,{skipPreflight:!1,commitment:"recent",preflightCommitment:"recent"}));case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function H(e,t){return V.apply(this,arguments)}function V(){return(V=w(I.mark((function e(t,n){return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.e.getAssociatedTokenAddress(O.a,O.d,t,n,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n,r){return O.e.createAssociatedTokenAccountInstruction(O.a,O.d,e,t,n,r)}function J(e,t){return X.apply(this,arguments)}function X(){return(X=w(I.mark((function e(t,n){var r,o,i,c,h,d,f;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenAccountsByOwner(n,{programId:O.d});case 2:for(r=e.sent,o=[],i=0;i<r.value.length;i++)c=r.value[i],h=c.pubkey,null==(null==(d=c.account)?void 0:d.data)&&Object(l.default)(!1),(f=Y(d)).address=h,o.push(f);return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){null==(null==e?void 0:e.data)&&Object(l.default)(!1);var t=O.b.decode(null==e?void 0:e.data);return t.mint=new d.b(t.mint),t.owner=new d.b(t.owner),t.amount=O.f.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new O.f(0)):(t.delegate=new d.b(t.delegate),t.delegatedAmount=O.f.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=O.f.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new d.b(t.closeAuthority),t}!function(e){e[e.Initialize=0]="Initialize",e[e.Swap=1]="Swap",e[e.DepositAllTokenTypes=2]="DepositAllTokenTypes",e[e.WithdrawAllTokenTypes=3]="WithdrawAllTokenTypes",e[e.Claim=4]="Claim",e[e.ManagerClaim=5]="ManagerClaim",e[e.AddUserPosition=6]="AddUserPosition",e[e.UpdateFee=7]="UpdateFee",e[e.SimulateSwap=8]="SimulateSwap"}(M||(M={}));var Z=Object(h.struct)([Object(h.u8)("instruction")]),Q=function(e,t,n){var data=r.alloc(Z.span);Z.encode({instruction:M.AddUserPosition},data);var o=[{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:o,programId:e,data:data})},ee=Object(h.struct)([Object(h.u8)("instruction"),L("positionIndex")]),te=function(e,t,n,o,c,l,h,f,y,m,k,j,w){var data=r.alloc(ee.span);ee.encode({instruction:M.Claim,positionIndex:w},data);var v=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:v,programId:e,data:data})},ne=Object(h.struct)([Object(h.u8)("instruction"),Object(h.u8)("isNewPosition"),U("liquityAmount"),Object(h.s32)("tickLower"),Object(h.s32)("tickUpper"),L("maximumTokenA"),L("maximumTokenB"),L("positionIndex")]),re=function(e,t,n,o,c,l,h,f,y,m,k,j,w,v,S,I,A,x,P){var data=r.alloc(ne.span);ne.encode({instruction:M.DepositAllTokenTypes,isNewPosition:w,liquityAmount:I,tickLower:v,tickUpper:S,maximumTokenA:A,maximumTokenB:x,positionIndex:P},data);var E=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:E,programId:e,data:data})},ie=Object(h.struct)([Object(h.u8)("instruction"),Object(h.u8)("nonce"),Object(h.u8)("curveType"),L("fee",12),L("managerFee",12),Object(h.u32)("tickSpace"),U("currentSqrtPrice",12),U("currentLiquity"),U("feeGrowthGlobal0"),U("feeGrowthGlobal1"),U("managerFeeA"),U("managerFeeB")]),oe=function(e,t,n,o,l,h,f,y,m,k,j,w,v,S,I,A){var data=r.alloc(ie.span);ie.encode({instruction:M.Initialize,nonce:j,curveType:w,fee:v,managerFee:S,tickSpace:I,currentSqrtPrice:A,currentLiquity:new c.a(0),feeGrowthGlobal0:new c.a(0),feeGrowthGlobal1:new c.a(0),managerFeeA:new c.a(0),managerFeeB:new c.a(0)},data);var x=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:x,programId:e,data:data})},se=Object(h.struct)([Object(h.u8)("instruction")]),ae=function(e,t,n,o,c,l,h,f){var data=r.alloc(se.span);se.encode({instruction:M.ManagerClaim},data);var y=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:y,programId:e,data:data})},ce=Object(h.struct)([Object(h.u8)("instruction"),L("amountIn"),L("minimumAmountOut")]),ue=function(e,t,n,o,c,l,h,f,y,m,k){var data=r.alloc(ce.span);ce.encode({instruction:M.Swap,amountIn:m,minimumAmountOut:k},data);var j=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:j,programId:e,data:data})},le=Object(h.struct)([Object(h.u8)("instruction"),L("liquityAmount"),L("minimumTokenA"),L("minimumTokenB"),L("positionIndex")]),he=function(e,t,n,o,c,l,h,f,y,m,k,j,w,v,S,I){var data=r.alloc(le.span);le.encode({instruction:M.WithdrawAllTokenTypes,liquityAmount:w,minimumTokenA:v,minimumTokenB:S,positionIndex:I},data);var A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:O.d,isSigner:!1,isWritable:!1}];return new d.e({keys:A,programId:e,data:data})},de=Object(h.struct)([Object(h.u8)("instruction"),L("amountIn"),Object(h.u8)("direction")]),fe=function(e,t,n,o,c){var data=r.alloc(de.span);de.encode({instruction:M.SimulateSwap,amountIn:o,direction:c},data);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return new d.e({keys:l,programId:e,data:data})},be=504e3,pe=Object(h.struct)([Object(h.s32)("tick"),U("tickPrice",12),U("liquityGross"),D("liquityNet"),U("feeGrowthOutsideA",16),U("feeGrowthOutsideB",16)],"tickInfo"),ye=Object(h.struct)([Object(h.u8)("swapVersion"),R("tokenSwapKey"),Object(h.u8)("accountType"),Object(h.s32)("len"),Object(h.blob)(503962,"dataFlat")],"ticksAccount"),ge=function(e){return e.data.length===be},me=function(e,t){if(ge(t)){var n=r.from(t.data),o=ye.decode(n),c=o.swapVersion,l=o.tokenSwapKey,d=o.accountType,f=o.len,y=o.dataFlat,m=f*pe.span,k=y.slice(0,m);return{pubkey:e,info:t,data:{swapVersion:c,tokenSwapKey:l,accountType:d,len:f,ticks:Object(h.seq)(pe,f).decode(k)}}}},ke=36e4,Oe=Object(h.struct)([R("nftTokenId"),Object(h.s32)("lowerTick"),Object(h.s32)("upperTick"),U("liquity"),U("feeGrowthInsideALast",16),U("feeGrowthInsideBLast",16),U("tokenAFee",16),U("tokenBFee",16)],"position"),je=Object(h.struct)([Object(h.u8)("swapVersion"),R("tokenSwapKey"),Object(h.u8)("accountType"),Object(h.s32)("len"),Object(h.blob)(359962,"dataFlat")],"positionsAccount"),we=Math.floor(359962/Oe.span),ve=function(e){return e.data.length===ke},Se=function(e,t){if(ve(t)){var n=r.from(t.data),o=je.decode(n),c=o.swapVersion,l=o.tokenSwapKey,d=o.accountType,f=o.len,y=o.dataFlat,m=f*Oe.span,k=y.slice(0,m);return{pubkey:e,info:t,data:{swapVersion:c,tokenSwapKey:l,accountType:d,len:f,positions:Object(h.seq)(Oe,f).decode(k)}}}},Ie=Object(h.struct)([R("tokenSwapKey"),Object(h.u8)("accountType"),Object(h.u8)("version"),Object(h.u8)("isInitialized"),Object(h.u8)("nonce"),R("tokenProgramId"),R("manager"),R("managerTokenA"),R("managerTokenB"),R("swapTokenA"),R("swapTokenB"),R("tokenAMint"),R("tokenBMint"),R("ticksKey"),R("positionsKey"),Object(h.u8)("curveType"),L("fee",12),L("managerFee",12),Object(h.u32)("tickSpace"),U("currentSqrtPrice",12),U("currentLiquity"),U("feeGrowthGlobal0",16),U("feeGrowthGlobal1",16),U("managerFeeA"),U("managerFeeB")],"tokenSwapAccount"),Ae=Ie.span,xe=function(e){return e.data.length===Ae},Pe=function(e,t){if(xe(t)){var n=r.from(t.data);return{pubkey:e,info:t,data:Ie.decode(n)}}},Ee=443632,Te=-443632,Be=new o.Decimal("1.0001"),_e=Be.pow(Ee),We=Be.pow(Te),Ne=Be.pow(221816),Ke=Be.pow(-221816);function Re(e){return e.lessThan(Ne)||Object(l.default)(!1),e.greaterThan(Ke)||Object(l.default)(!1),e.pow(2).log(Be).toDP(0,o.Decimal.ROUND_HALF_UP).toNumber()}function Le(e){return e>=Te&&e<=Ee||Object(l.default)(!1),Be.pow(e/2)}function De(e){return e>=Te&&e<=Ee||Object(l.default)(!1),Be.pow(e)}function Ue(e,t){t>0&&t%1==0||Object(l.default)(!1),e.lessThan(_e)||Object(l.default)(!1),e.greaterThan(We)||Object(l.default)(!1);var n=function(e){return e.lessThan(_e)||Object(l.default)(!1),e.greaterThan(We)||Object(l.default)(!1),e.log(Be).toDP(0,o.Decimal.ROUND_HALF_UP).toNumber()}(e),r=(n-Te)%t;return r>t/2?n-r+t:n-r}function ze(e,t,n){return n.div(e).toDP(0,o.Decimal.ROUND_DOWN).sub(n.div(t).toDP(0,o.Decimal.ROUND_DOWN))}function qe(e,t,n){return n.mul(t.sub(e)).toDP(0,o.Decimal.ROUND_DOWN)}function Me(e,t,n){var r=t.div(n.add(t.div(e))),c=n.add(t.div(e).toDP(0,o.Decimal.ROUND_DOWN));return{amountOut:t.mul(e).toDP(0,o.Decimal.ROUND_DOWN).sub(t.mul(t).div(c).toDP(0,o.Decimal.ROUND_DOWN)),afterSqrtPrice:r}}function Ce(e,t,n){var r=n.div(t).add(e),c=n.add(t.mul(e).toDP(0,o.Decimal.ROUND_DOWN));return{amountOut:t.div(e).toDP(0,o.Decimal.ROUND_DOWN).sub(t.mul(t).div(c).toDP(0,o.Decimal.ROUND_DOWN)),afterSqrtPrice:r}}function Fe(e,t,n,r,o){e<t||Object(l.default)(!1);var h=Le(e),d=Le(t);r.greaterThanOrEqualTo(h)&&r.lessThanOrEqualTo(d)||Object(l.default)(!1);var f=new c.a(1);if(0===o){var y=n.div(f.div(r).sub(f.div(d)));return{desiredAmountDst:y.mul(r.sub(h)),deltaLiquity:y}}var m=n.div(r.sub(h));return{desiredAmountDst:m.mul(f.div(r).sub(f.div(d))),deltaLiquity:m}}function Ge(e,t,n){e<t||Object(l.default)(!1);var r=Le(e),o=Le(t),h=new c.a(1);return n.div(h.div(r).sub(h.div(o)))}function He(e,t,n){e<t||Object(l.default)(!1);var r=Le(e),o=Le(t);return n.div(o.sub(r))}var Ve=new d.b("11111111111111111111111111111111");c.a.config({precision:64,rounding:c.a.ROUND_HALF_DOWN,toExpNeg:-64,toExpPos:64});var $e=function(){function e(e,t,n,r){this.programId=Ve,this.tokenSwapKey=Ve,this.authority=Ve,this.isLoaded=!1,this.currentTick=0,this.tokenSwapInfo={tokenSwapKey:Ve,accountType:0,version:0,isInitialized:0,nonce:0,tokenProgramId:O.d,manager:Ve,managerTokenA:Ve,managerTokenB:Ve,swapTokenA:Ve,swapTokenB:Ve,tokenAMint:Ve,tokenBMint:Ve,ticksKey:Ve,positionsKey:Ve,curveType:0,fee:new c.a(0),managerFee:new c.a(0),tickSpace:0,currentSqrtPrice:new c.a(0),currentLiquity:new c.a(0),feeGrowthGlobal0:new c.a(0),feeGrowthGlobal1:new c.a(0),managerFeeA:new c.a(0),managerFeeB:new c.a(0)},this.ticks=[],this.conn=e,this.tokenSwapKey=n,this.programId=t,this.payer=r,this.positions=new Map,this.positionsKeys=new Map}var t=e.prototype;return t.setDefaultPayer=function(e){this.payer=e},t.load=function(){var e=w(I.mark((function e(){var t,n,r,o=this;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={encoding:"base64",filters:[{memcmp:{offset:1,bytes:this.tokenSwapKey.toBase58()}}]},e.next=3,this.conn.getProgramAccounts(this.programId,t);case 3:if(e.sent.map((function(e){if(xe(e.account)){var t=Pe(e.pubkey,e.account);void 0===(null==t?void 0:t.data)&&Object(l.default)(!1),o.tokenSwapInfo=t.data}else if(ge(e.account)){var n=me(e.pubkey,e.account);void 0===(null==n?void 0:n.data)&&Object(l.default)(!1),o.ticks=n.data.ticks}else if(ve(e.account)){var r=Se(e.pubkey,e.account);void 0===(null==r?void 0:r.data)&&Object(l.default)(!1),o.positionsKeys.set(e.pubkey,r.data.positions.length);for(var i=0;i<r.data.positions.length;i++){var p=r.data.positions[i];o.positions.set(p.nftTokenId.toBase58(),{positionsKey:e.pubkey,index:new c.a(i),positionId:p.nftTokenId,lowerTick:p.lowerTick,upperTick:p.upperTick,liquity:p.liquity,feeGrowthInsideALast:p.feeGrowthInsideALast,feeGrowthInsideBLast:p.feeGrowthInsideBLast,tokenAFee:p.tokenAFee,tokenBFee:p.tokenBFee})}}else console.log("the account:%s length:%d unkown",e.pubkey.toString(),e.account.data.length)})),this.authority.toString()!==Ve.toString()){e.next=11;break}return e.next=8,d.b.findProgramAddress([this.tokenSwapKey.toBuffer()],this.programId);case 8:n=e.sent,r=n[0],this.authority=r;case 11:return this.isLoaded=!0,this.currentTick=Re(this.tokenSwapInfo.currentSqrtPrice),e.abrupt("return",this);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createTokenSwap=function(){var t=w(I.mark((function t(n,r,o,c,l,h,f,y,m,k,j){var w,v,S,A,x,P,E,T,B,_,W,N,K,R,L,D,U,z;return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===j&&(j=!1),w=d.a.generate(),v=d.a.generate(),S=d.a.generate(),t.next=6,d.b.findProgramAddress([w.publicKey.toBuffer()],r);case 6:return A=t.sent,x=A[0],P=A[1],t.next=11,n.getMinimumBalanceForRentExemption(be);case 11:return E=t.sent,t.next=14,n.getMinimumBalanceForRentExemption(ke);case 14:return T=t.sent,t.next=17,n.getMinimumBalanceForRentExemption(Ae);case 17:return B=t.sent,_=(new d.d).add(d.c.createAccount({fromPubkey:k.publicKey,newAccountPubkey:w.publicKey,lamports:B,space:Ae,programId:r}),d.c.createAccount({fromPubkey:k.publicKey,newAccountPubkey:v.publicKey,lamports:E,space:be,programId:r}),d.c.createAccount({fromPubkey:k.publicKey,newAccountPubkey:S.publicKey,lamports:T,space:ke,programId:r})),t.next=21,H(o,x);case 21:return W=t.sent,t.next=24,H(c,x);case 24:return N=t.sent,_.add($(o,W,x,k.publicKey),$(c,N,x,k.publicKey)),K=m.sqrt(),R=new O.e(n,o,O.d,k),L=new O.e(n,c,O.d,k),t.next=31,R.getOrCreateAssociatedAccountInfo(l);case 31:return D=t.sent,t.next=34,L.getOrCreateAssociatedAccountInfo(l);case 34:return U=t.sent,0,_.add(oe(r,w.publicKey,x,l,D.address,U.address,W,N,v.publicKey,S.publicKey,P,0,h,f,y,K)),t.next=39,F(n,_,k,w,v,S);case 39:return z=t.sent,j&&console.log(z),t.next=43,new e(n,r,w.publicKey,k).load();case 43:return t.abrupt("return",t.sent);case 44:case"end":return t.stop()}}),t)})));return function(e,n,r,o,c,l,h,d,f,y,m){return t.apply(this,arguments)}}(),t.mintPosition=function(){var e=w(I.mark((function e(t,n,r,o,h,f,y,m,k){var j,w,v,S,A;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===k&&(k=null),!this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return r<o||Object(l.default)(!1),null==(k=null!=k?k:this.payer)&&Object(l.default)(!1),j=d.a.generate(),e.next=10,H(j.publicKey,k.publicKey);case 10:return w=e.sent,e.next=13,O.e.getMinBalanceRentForExemptAccount(this.conn);case 13:return v=e.sent,null==(S=this.choosePosition())&&Object(l.default)(!1),(A=new d.d).add(d.c.createAccount({fromPubkey:k.publicKey,newAccountPubkey:j.publicKey,lamports:v,space:O.c.span,programId:O.d}),O.e.createInitMintInstruction(O.d,j.publicKey,0,this.authority,null),$(j.publicKey,w,k.publicKey,k.publicKey)),A.add(re(this.programId,this.tokenSwapKey,this.authority,m.publicKey,t,n,this.tokenSwapInfo.swapTokenA,this.tokenSwapInfo.swapTokenB,j.publicKey,w,this.tokenSwapInfo.ticksKey,S,0,r,o,h,f,y,new c.a(0))),e.next=21,F(this.conn,A,k,m,j);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,c,l,h,d,f){return e.apply(this,arguments)}}(),t.increaseLiquity=function(){var e=w(I.mark((function e(t,n,r,o,c,h,f){var y,m,k,j;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f&&(f=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null==(y=this.getPositionInfo(t))&&Object(l.default)(!1),null===(f=null!=f?f:this.payer)&&Object(l.default)(!1),m=new O.e(this.conn,t,O.d,f),e.t0=m,e.next=12,H(m.publicKey,f.publicKey);case 12:return e.t1=e.sent,e.next=15,e.t0.getAccountInfo.call(e.t0,e.t1);case 15:return 1!==(k=e.sent).amount.toNumber()&&Object(l.default)(!1),(j=new d.d).add(re(this.programId,this.tokenSwapKey,this.authority,f.publicKey,n,r,this.tokenSwapInfo.swapTokenA,this.tokenSwapInfo.swapTokenB,t,k.address,this.tokenSwapInfo.ticksKey,y.positionsKey,1,y.lowerTick,y.upperTick,o,c,h,y.index)),e.next=21,F(this.conn,j,f);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,c,l,h){return e.apply(this,arguments)}}(),t.decreaseLiquity=function(){var e=w(I.mark((function e(t,n,r,o,c,h,f){var y,m,k,j;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f&&(f=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null==(y=this.getPositionInfo(t))&&Object(l.default)(!1),null===(f=null!=f?f:this.payer)&&Object(l.default)(!1),m=new O.e(this.conn,t,O.d,f),e.t0=m,e.next=12,H(m.publicKey,f.publicKey);case 12:return e.t1=e.sent,e.next=15,e.t0.getAccountInfo.call(e.t0,e.t1);case 15:return 1!==(k=e.sent).amount.toNumber()&&Object(l.default)(!1),j=(new d.d).add(he(this.programId,this.tokenSwapKey,this.authority,f.publicKey,this.tokenSwapInfo.swapTokenA,this.tokenSwapInfo.swapTokenB,n,r,t,k.address,this.tokenSwapInfo.ticksKey,y.positionsKey,o,c,h,y.index)),e.next=20,F(this.conn,j,f);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,c,l,h){return e.apply(this,arguments)}}(),t.swap=function(){var e=w(I.mark((function e(t,n,r,o,c,h,f){var y,m,k,O;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f&&(f=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null===(f=null!=f?f:this.payer)&&Object(l.default)(!1),y=1===r?{swapSrc:this.tokenSwapInfo.swapTokenA,swapDst:this.tokenSwapInfo.swapTokenB}:{swapSrc:this.tokenSwapInfo.swapTokenB,swapDst:this.tokenSwapInfo.swapTokenA},m=y.swapSrc,k=y.swapDst,O=(new d.d).add(ue(this.programId,this.tokenSwapKey,this.authority,h.publicKey,t,n,m,k,this.tokenSwapInfo.ticksKey,o,c)),e.next=10,F(this.conn,O,f,h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,c,l,h){return e.apply(this,arguments)}}(),t.simulateSwap=function(){var e=w(I.mark((function e(t,n,r){var o,c;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoaded){e.next=3;break}return e.next=3,this.load();case 3:return o=(new d.d).add(fe(this.programId,this.tokenSwapKey,this.tokenSwapInfo.ticksKey,t,n)),e.next=6,this.conn.simulateTransaction(o,[r]);case 6:c=e.sent,console.log(c);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.preSwapAV2=function(){var e=w(I.mark((function e(t,n,o,c,h){var f,y,a;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoaded){e.next=3;break}return e.next=3,this.load();case 3:return f=(new d.d).add(ue(this.programId,this.tokenSwapKey,this.authority,o.publicKey,c,h,this.tokenSwapInfo.swapTokenA,this.tokenSwapInfo.swapTokenB,this.tokenSwapInfo.ticksKey,t,n)),e.next=6,this.conn.simulateTransaction(f,[],[c,h]);case 6:y=e.sent,console.log(y),null==y.value.accounts&&Object(l.default)(!1),console.log(y.value.accounts[0]),console.log(y.value.accounts[1]),data=r.from(y.value.accounts[0].data[0],"base64"),m=void 0,(m=O.b.decode(data)).mint=new d.b(m.mint),m.owner=new d.b(m.owner),m.amount=O.f.fromBuffer(m.amount),0===m.delegateOption?(m.delegate=null,m.delegatedAmount=new O.f(0)):(m.delegate=new d.b(m.delegate),m.delegatedAmount=O.f.fromBuffer(m.delegatedAmount)),m.isInitialized=0!==m.state,m.isFrozen=2===m.state,1===m.isNativeOption?(m.rentExemptReserve=O.f.fromBuffer(m.isNative),m.isNative=!0):(m.rentExemptReserve=null,m.isNative=!1),0===m.closeAuthorityOption?m.closeAuthority=null:m.closeAuthority=new d.b(m.closeAuthority),a=m,console.log(a.amount.toString());case 13:case"end":return e.stop()}var data,m}),e,this)})));return function(t,n,r,o,c){return e.apply(this,arguments)}}(),t.collect=function(){var e=w(I.mark((function e(t,n,r,o){var c,h,f,y;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o&&(o=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null==(c=this.getPositionInfo(t))&&Object(l.default)(!1),null===(o=null!=o?o:this.payer)&&Object(l.default)(!1),h=new O.e(this.conn,t,O.d,o),e.t0=h,e.next=12,H(h.publicKey,o.publicKey);case 12:return e.t1=e.sent,e.next=15,e.t0.getAccountInfo.call(e.t0,e.t1);case 15:return 1!==(f=e.sent).amount.toNumber()&&Object(l.default)(!1),y=(new d.d).add(te(this.programId,this.tokenSwapKey,this.authority,o.publicKey,this.tokenSwapInfo.swapTokenB,this.tokenSwapInfo.swapTokenB,n,r,t,f.address,this.tokenSwapInfo.ticksKey,c.positionsKey,c.index)),e.next=20,F(this.conn,y,o);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),t.managerCollect=function(){var e=w(I.mark((function e(t,n,r){var o;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null===(r=null!=r?r:this.payer)&&Object(l.default)(!1),o=(new d.d).add(ae(this.programId,this.tokenSwapKey,this.authority,r.publicKey,this.tokenSwapInfo.swapTokenA,this.tokenSwapInfo.swapTokenB,t,n)),e.next=9,F(this.conn,o,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.addPositionsAccount=function(){var e=w(I.mark((function e(t){var n,r,o;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=null),this.isLoaded){e.next=4;break}return e.next=4,this.load();case 4:return null===(t=null!=t?t:this.payer)&&Object(l.default)(!1),n=d.a.generate(),e.next=9,this.conn.getMinimumBalanceForRentExemption(ke);case 9:return r=e.sent,o=(new d.d).add(d.c.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:r,space:ke,programId:this.programId}),Q(this.programId,this.authority,n.publicKey)),e.next=13,F(this.conn,o,t,n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.approve=function(){var e=w(I.mark((function e(t,n,r,o,c){var h;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===c&&(c=null),null===(c=null!=c?c:this.payer)&&Object(l.default)(!1),h=new O.e(this.conn,n,O.d,c),e.next=6,h.approve(t,o.publicKey,c,[],r.toNumber());case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,c){return e.apply(this,arguments)}}(),t.getUserPositions=function(){var e=w(I.mark((function e(t){var n,r,o,i,c;return I.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=void 0),this.isLoaded||Object(l.default)(!1),void 0===(t=null!=t?t:null==(n=this.payer)?void 0:n.publicKey)&&Object(l.default)(!1),e.next=6,J(this.conn,t);case 6:for(r=e.sent,o=[],i=0;i<r.length;i++)void 0!==(c=this.positions.get(r[i].mint.toBase58()))&&o.push(c);return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.calculateLiquityByTokenA=function(e,t,n){if(this.isLoaded||Object(l.default)(!1),this.currentTick<=t||Object(l.default)(!1),this.currentTick<e)return{desiredAmountB:new c.a(0),liquity:Ge(e,t,n)};var r=Fe(e,t,n,this.tokenSwapInfo.currentSqrtPrice,0);return{desiredAmountB:r.desiredAmountDst,liquity:r.deltaLiquity}},t.calculateLiquityByTokenB=function(e,t,n){if(this.isLoaded||Object(l.default)(!1),this.currentTick>=e||Object(l.default)(!1),this.currentTick<t)return{desiredAmountA:new c.a(0),liquity:He(e,t,n)};var r=Fe(e,t,n,this.tokenSwapInfo.currentSqrtPrice,1);return{desiredAmountA:r.desiredAmountDst,liquity:r.deltaLiquity}},t.calculatePositionValue=function(e){this.isLoaded||Object(l.default)(!1);var t=this.getPositionInfo(e);void 0===t&&Object(l.default)(!1);var n,r,o,h,d,f,y=(n=t.lowerTick,r=t.upperTick,o=t.liquity,h=this.tokenSwapInfo.currentSqrtPrice,d=Le(n),f=Le(r),h.lessThan(d)?{amountA:o.div(d).sub(o.div(f)),amountB:new c.a(0)}:h.greaterThan(f)?{amountA:new c.a(0),amountB:o.mul(f).sub(o.mul(d))}:{amountA:o.div(h).sub(o.div(f)),amountB:o.mul(h).sub(o.mul(d))}),m=y.amountA,k=y.amountB;return{liquity:t.liquity,amountA:m,amountB:k}},t.preCollect=function(e){this.isLoaded||Object(l.default)(!1);var t=this.getPositionInfo(e);void 0===t&&Object(l.default)(!1);for(var n=null,r=null,i=0;i<=this.ticks.length;i++)this.ticks[i].tick==t.lowerTick&&(n=this.ticks[i]),this.ticks[i].tick==t.upperTick&&(r=this.ticks[i]);return null===n&&Object(l.default)(!1),null===r&&Object(l.default)(!1),this.currentTick<n.tick?{amountA:n.feeGrowthOutside0.sub(r.feeGrowthOutside0).mul(t.liquity).sub(t.feeGrowthInsideALast),amountB:n.feeGrowthOutside1.sub(r.feeGrowthOutside1).mul(t.liquity).sub(t.feeGrowthInsideBLast)}:this.currentTick>r.tick?{amountA:r.feeGrowthOutside0.sub(n.feeGrowthOutside0).mul(t.liquity).sub(t.feeGrowthInsideBLast),amountB:r.feeGrowthOutside1.sub(n.feeGrowthOutside1).mul(t.liquity).sub(t.feeGrowthInsideBLast)}:{amountA:this.tokenSwapInfo.feeGrowthGlobal0.sub(r.feeGrowthOutside0).sub(n.feeGrowthOutside0).mul(t.liquity).sub(t.feeGrowthInsideALast),amountB:this.tokenSwapInfo.feeGrowthGlobal1.sub(r.feeGrowthOutside1).sub(n.feeGrowthOutside1).mul(t.liquity).sub(t.feeGrowthInsideBLast)}},t.preSwapA=function(e){return this.isLoaded||Object(l.default)(!1),function(e,t,n,r,c){c.greaterThan(new o.Decimal(0))||Object(l.default)(!1),r.greaterThanOrEqualTo(new o.Decimal(0))||Object(l.default)(!1),e.length>0||Object(l.default)(!1);var h=Re(t);h>e[0].tick||Object(l.default)(!1);for(var d=r,f=new o.Decimal(0),y=c,m=new o.Decimal(0),k=new o.Decimal(0),O=new o.Decimal(0),j=t,i=e.length-1;i>=0;i--)if(d.equals(new o.Decimal(0)))h=e[i].tick,d=d.sub(e[i].liquityNet),j=e[i].tickPrice;else if(!(h<=e[i].tick)){var w=e[i].tickPrice,v=ze(w,j,d),S=v.mul(n).toDP(0,o.Decimal.ROUND_DOWN);if(m=y.lessThan(S)?y:y.sub(S),v.greaterThanOrEqualTo(m)){var I=Me(j,d,m=y.mul(new o.Decimal(1).sub(n)).toDP(0,o.Decimal.ROUND_UP)),A=I.amountOut,x=I.afterSqrtPrice;return O=O.add(y),k=k.add(y.sub(m)),{amountOut:f.add(A),amountUsed:O,feeUsed:k,afterPrice:x,afterLiquity:d}}y=m.sub(v),O=O.add(v).add(S),k=k.add(S),f=f.add(qe(w,j,d)),d=d.sub(e[i].liquityNet),h=e[i].tick,j=e[i].tickPrice}return{amountOut:f,amountUsed:O,feeUsed:k,afterPrice:De(h),afterLiquity:d}}(this.ticks,this.tokenSwapInfo.currentSqrtPrice,this.tokenSwapInfo.fee,this.tokenSwapInfo.currentLiquity,e)},t.preSwapB=function(e){return this.isLoaded||Object(l.default)(!1),function(e,t,n,r,c){c.greaterThan(new o.Decimal(0))||Object(l.default)(!1),r.greaterThanOrEqualTo(new o.Decimal(0))||Object(l.default)(!1),e.length>0||Object(l.default)(!1);var h=Re(t);h<e[e.length-1].tick||Object(l.default)(!1);for(var d=r,f=new o.Decimal(0),y=c,m=new o.Decimal(0),k=new o.Decimal(0),O=new o.Decimal(0),j=t,i=0;i<e.length;i++)if(d.equals(new o.Decimal(0)))h=e[i].tick,d=d.add(e[i].liquityNet),j=e[i].tickPrice;else if(!(h>=e[i].tick)){var w=e[i].tickPrice,v=qe(j,w,d),S=v.mul(n).toDP(0,o.Decimal.ROUND_DOWN);if(m=y.lessThan(S)?y:y.sub(S),v.greaterThanOrEqualTo(m)){var I=Ce(j,d,m=y.mul(new o.Decimal(1).sub(n)).toDP(0,o.Decimal.ROUND_UP)),A=I.amountOut,x=I.afterSqrtPrice;return k=k.add(y),O=O.add(y.sub(m)),{amountOut:f.add(A),feeUsed:O,amountUsed:k,afterPrice:x.pow(2),afterLiquity:d}}y=m.sub(v),k=k.add(v).add(S),O=O.add(S),f=f.add(ze(j,w,d)),d=d.add(e[i].liquityNet),h=e[i].tick,j=e[i].tickPrice}return{amountOut:f,amountUsed:k,feeUsed:O,afterPrice:De(h),afterLiquity:d}}(this.ticks,this.tokenSwapInfo.currentSqrtPrice,this.tokenSwapInfo.fee,this.tokenSwapInfo.currentLiquity,e)},t.getNearestTickByPrice=function(e){return this.isLoaded||Object(l.default)(!1),Ue(e,this.tokenSwapInfo.tickSpace)},t.getPositionInfo=function(e){return this.isLoaded||Object(l.default)(!1),this.positions.get(e.toBase58())},t.choosePosition=function(){this.isLoaded||Object(l.default)(!1);for(var e,t=S(this.positionsKeys);!(e=t()).done;){var n=e.value,r=n[0];if(n[1]<we)return r}return null},t.log=function(){var e=null!==this.payer?this.payer.publicKey.toBase58():"null";console.log(JSON.stringify({programId:this.programId.toString(),tokenSwapKey:this.tokenSwapKey.toString(),payer:e,authority:this.authority.toString(),currentTick:this.currentTick,currentPrice:this.tokenSwapInfo.currentSqrtPrice.pow(2).toString(),tokenSwapInfo:{accountType:this.tokenSwapInfo.accountType,version:this.tokenSwapInfo.version,isInitialized:this.tokenSwapInfo.isInitialized,nonce:this.tokenSwapInfo.nonce,manager:this.tokenSwapInfo.manager.toString(),managerTokenA:this.tokenSwapInfo.managerTokenA.toString(),managerTokenB:this.tokenSwapInfo.managerTokenB.toString(),swapTokenA:this.tokenSwapInfo.swapTokenA.toString(),swapTokenB:this.tokenSwapInfo.swapTokenB.toString(),tokenAMint:this.tokenSwapInfo.tokenAMint.toString(),tokenBMint:this.tokenSwapInfo.tokenBMint.toString(),ticksKey:this.tokenSwapInfo.ticksKey.toString(),positionsKey:this.tokenSwapInfo.positionsKey.toString(),curveType:this.tokenSwapInfo.curveType,fee:this.tokenSwapInfo.fee,managerFee:this.tokenSwapInfo.managerFee,tickSpace:this.tokenSwapInfo.tickSpace,currentSqrtPrice:this.tokenSwapInfo.currentSqrtPrice,currentLiquity:this.tokenSwapInfo.currentLiquity,feeGrowthGlobal0:this.tokenSwapInfo.feeGrowthGlobal0,feeGrowthGlobal1:this.tokenSwapInfo.feeGrowthGlobal1,managerFeeA:this.tokenSwapInfo.managerFeeA,managerFeeB:this.tokenSwapInfo.managerFeeB},positions:Object.fromEntries(this.positions),positionsKeys:Object.fromEntries(this.positionsKeys),ticks:this.ticks},null,4))},e}()}).call(this,n(104),n(5).Buffer)},1958:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return cr})),n.d(t,"b",(function(){return Gt})),n.d(t,"c",(function(){return kn})),n.d(t,"d",(function(){return an})),n.d(t,"e",(function(){return sn})),n.d(t,"f",(function(){return Sr})),n.d(t,"g",(function(){return dn}));var r=n(49),o=n.n(r),c=n(5),l=n(11),h=n.n(l),d=n(19),f=n.n(d),y=n(195),m=n(3),k=n(1959),O=(n(360),n(361),n(362)),j=n.n(O),w=n(250),v=n.n(w);const S=e=>c.Buffer.isBuffer(e)?e:e instanceof Uint8Array?c.Buffer.from(e.buffer,e.byteOffset,e.byteLength):c.Buffer.from(e);var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};var A={},x={},P=E;function E(e,t){if(!e)throw new Error(t||"Assertion failed")}E.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var T={exports:{}};"function"==typeof Object.create?T.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:T.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var B=P,_=T.exports;function W(e,i){return 55296==(64512&e.charCodeAt(i))&&(!(i<0||i+1>=e.length)&&56320==(64512&e.charCodeAt(i+1)))}function N(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function K(e){return 1===e.length?"0"+e:e}function R(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}x.inherits=_,x.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var p=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?n[p++]=r:r<2048?(n[p++]=r>>6|192,n[p++]=63&r|128):W(e,i)?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),n[p++]=r>>18|240,n[p++]=r>>12&63|128,n[p++]=r>>6&63|128,n[p++]=63&r|128):(n[p++]=r>>12|224,n[p++]=r>>6&63|128,n[p++]=63&r|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},x.toHex=function(e){for(var t="",i=0;i<e.length;i++)t+=K(e[i].toString(16));return t},x.htonl=N,x.toHex32=function(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];"little"===t&&(r=N(r)),n+=R(r.toString(16))}return n},x.zero2=K,x.zero8=R,x.join32=function(e,t,n,r){var o=n-t;B(o%4==0);for(var c=new Array(o/4),i=0,l=t;i<c.length;i++,l+=4){var h;h="big"===r?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],c[i]=h>>>0}return c},x.split32=function(e,t){for(var n=new Array(4*e.length),i=0,r=0;i<e.length;i++,r+=4){var o=e[i];"big"===t?(n[r]=o>>>24,n[r+1]=o>>>16&255,n[r+2]=o>>>8&255,n[r+3]=255&o):(n[r+3]=o>>>24,n[r+2]=o>>>16&255,n[r+1]=o>>>8&255,n[r]=255&o)}return n},x.rotr32=function(e,b){return e>>>b|e<<32-b},x.rotl32=function(e,b){return e<<b|e>>>32-b},x.sum32=function(a,b){return a+b>>>0},x.sum32_3=function(a,b,e){return a+b+e>>>0},x.sum32_4=function(a,b,e,t){return a+b+e+t>>>0},x.sum32_5=function(a,b,e,t,n){return a+b+e+t+n>>>0},x.sum64=function(e,t,n,r){var o=e[t],c=r+e[t+1]>>>0,l=(c<r?1:0)+n+o;e[t]=l>>>0,e[t+1]=c},x.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},x.sum64_lo=function(e,t,n,r){return t+r>>>0},x.sum64_4_hi=function(e,t,n,r,o,c,l,dl){var h=0,d=t;return h+=(d=d+r>>>0)<t?1:0,h+=(d=d+c>>>0)<c?1:0,e+n+o+l+(h+=(d=d+dl>>>0)<dl?1:0)>>>0},x.sum64_4_lo=function(e,t,n,r,o,c,l,dl){return t+r+c+dl>>>0},x.sum64_5_hi=function(e,t,n,r,o,c,l,dl,h,d){var f=0,y=t;return f+=(y=y+r>>>0)<t?1:0,f+=(y=y+c>>>0)<c?1:0,f+=(y=y+dl>>>0)<dl?1:0,e+n+o+l+h+(f+=(y=y+d>>>0)<d?1:0)>>>0},x.sum64_5_lo=function(e,t,n,r,o,c,l,dl,h,d){return t+r+c+dl+d>>>0},x.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},x.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},x.shr64_hi=function(e,t,n){return e>>>n},x.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0};var L={},D=x,U=P;function z(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}L.BlockHash=z,z.prototype.update=function(e,t){if(e=D.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=D.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},z.prototype.digest=function(e){return this.update(this._pad()),U(null===this.pending),this._digest(e)},z.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r};var M={},C={},F=x.rotr32;function G(e,t,n){return e&t^~e&n}function H(e,t,n){return e&t^e&n^t&n}function V(e,t,n){return e^t^n}C.ft_1=function(s,e,t,n){return 0===s?G(e,t,n):1===s||3===s?V(e,t,n):2===s?H(e,t,n):void 0},C.ch32=G,C.maj32=H,C.p32=V,C.s0_256=function(e){return F(e,2)^F(e,13)^F(e,22)},C.s1_256=function(e){return F(e,6)^F(e,11)^F(e,25)},C.g0_256=function(e){return F(e,7)^F(e,18)^e>>>3},C.g1_256=function(e){return F(e,17)^F(e,19)^e>>>10};var $=x,J=L,X=C,Y=$.rotl32,Z=$.sum32,Q=$.sum32_5,ee=X.ft_1,te=J.BlockHash,ne=[1518500249,1859775393,2400959708,3395469782];function re(){if(!(this instanceof re))return new re;te.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}$.inherits(re,te);var ie=re;re.blockSize=512,re.outSize=160,re.hmacStrength=80,re.padLength=64,re.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Y(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],b=this.h[1],r=this.h[2],o=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var s=~~(i/20),l=Q(Y(a,5),ee(s,b,r,o),c,n[i],ne[s]);c=o,o=r,r=Y(b,30),b=a,a=l}this.h[0]=Z(this.h[0],a),this.h[1]=Z(this.h[1],b),this.h[2]=Z(this.h[2],r),this.h[3]=Z(this.h[3],o),this.h[4]=Z(this.h[4],c)},re.prototype._digest=function(e){return"hex"===e?$.toHex32(this.h,"big"):$.split32(this.h,"big")};var oe=x,se=L,ae=C,ce=P,ue=oe.sum32,le=oe.sum32_4,he=oe.sum32_5,de=ae.ch32,fe=ae.maj32,be=ae.s0_256,pe=ae.s1_256,ye=ae.g0_256,ge=ae.g1_256,me=se.BlockHash,ke=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Oe(){if(!(this instanceof Oe))return new Oe;me.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ke,this.W=new Array(64)}oe.inherits(Oe,me);var je=Oe;Oe.blockSize=512,Oe.outSize=256,Oe.hmacStrength=192,Oe.padLength=64,Oe.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=le(ge(n[i-2]),n[i-7],ye(n[i-15]),n[i-16]);var a=this.h[0],b=this.h[1],r=this.h[2],o=this.h[3],c=this.h[4],l=this.h[5],g=this.h[6],h=this.h[7];for(ce(this.k.length===n.length),i=0;i<n.length;i++){var d=he(h,pe(c),de(c,l,g),this.k[i],n[i]),f=ue(be(a),fe(a,b,r));h=g,g=l,l=c,c=ue(o,d),o=r,r=b,b=a,a=ue(d,f)}this.h[0]=ue(this.h[0],a),this.h[1]=ue(this.h[1],b),this.h[2]=ue(this.h[2],r),this.h[3]=ue(this.h[3],o),this.h[4]=ue(this.h[4],c),this.h[5]=ue(this.h[5],l),this.h[6]=ue(this.h[6],g),this.h[7]=ue(this.h[7],h)},Oe.prototype._digest=function(e){return"hex"===e?oe.toHex32(this.h,"big"):oe.split32(this.h,"big")};var we=x,ve=je;function Se(){if(!(this instanceof Se))return new Se;ve.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}we.inherits(Se,ve);var Ie=Se;Se.blockSize=512,Se.outSize=224,Se.hmacStrength=192,Se.padLength=64,Se.prototype._digest=function(e){return"hex"===e?we.toHex32(this.h.slice(0,7),"big"):we.split32(this.h.slice(0,7),"big")};var Ae=x,xe=L,Pe=P,Ee=Ae.rotr64_hi,Te=Ae.rotr64_lo,Be=Ae.shr64_hi,_e=Ae.shr64_lo,We=Ae.sum64,Ne=Ae.sum64_hi,Ke=Ae.sum64_lo,Re=Ae.sum64_4_hi,Le=Ae.sum64_4_lo,De=Ae.sum64_5_hi,Ue=Ae.sum64_5_lo,ze=xe.BlockHash,qe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Me(){if(!(this instanceof Me))return new Me;ze.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=qe,this.W=new Array(160)}Ae.inherits(Me,ze);var Ce=Me;function Fe(e,t,n,r,o){var c=e&n^~e&o;return c<0&&(c+=4294967296),c}function Ge(e,t,n,r,o,c){var l=t&r^~t&c;return l<0&&(l+=4294967296),l}function He(e,t,n,r,o){var c=e&n^e&o^n&o;return c<0&&(c+=4294967296),c}function Ve(e,t,n,r,o,c){var l=t&r^t&c^r&c;return l<0&&(l+=4294967296),l}function $e(e,t){var n=Ee(e,t,28)^Ee(t,e,2)^Ee(t,e,7);return n<0&&(n+=4294967296),n}function Je(e,t){var n=Te(e,t,28)^Te(t,e,2)^Te(t,e,7);return n<0&&(n+=4294967296),n}function Xe(e,t){var n=Ee(e,t,14)^Ee(e,t,18)^Ee(t,e,9);return n<0&&(n+=4294967296),n}function Ye(e,t){var n=Te(e,t,14)^Te(e,t,18)^Te(t,e,9);return n<0&&(n+=4294967296),n}function Ze(e,t){var n=Ee(e,t,1)^Ee(e,t,8)^Be(e,t,7);return n<0&&(n+=4294967296),n}function Qe(e,t){var n=Te(e,t,1)^Te(e,t,8)^_e(e,t,7);return n<0&&(n+=4294967296),n}function et(e,t){var n=Ee(e,t,19)^Ee(t,e,29)^Be(e,t,6);return n<0&&(n+=4294967296),n}function tt(e,t){var n=Te(e,t,19)^Te(t,e,29)^_e(e,t,6);return n<0&&(n+=4294967296),n}Me.blockSize=1024,Me.outSize=512,Me.hmacStrength=192,Me.padLength=128,Me.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var r=et(n[i-4],n[i-3]),o=tt(n[i-4],n[i-3]),c=n[i-14],l=n[i-13],h=Ze(n[i-30],n[i-29]),d=Qe(n[i-30],n[i-29]),f=n[i-32],y=n[i-31];n[i]=Re(r,o,c,l,h,d,f,y),n[i+1]=Le(r,o,c,l,h,d,f,y)}},Me.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],o=this.h[1],c=this.h[2],l=this.h[3],h=this.h[4],d=this.h[5],f=this.h[6],dl=this.h[7],y=this.h[8],m=this.h[9],k=this.h[10],O=this.h[11],j=this.h[12],w=this.h[13],v=this.h[14],S=this.h[15];Pe(this.k.length===n.length);for(var i=0;i<n.length;i+=2){var I=v,A=S,x=Xe(y,m),P=Ye(y,m),E=Fe(y,m,k,O,j),T=Ge(y,m,k,O,j,w),B=this.k[i],_=this.k[i+1],W=n[i],N=n[i+1],K=De(I,A,x,P,E,T,B,_,W,N),R=Ue(I,A,x,P,E,T,B,_,W,N);I=$e(r,o),A=Je(r,o),x=He(r,o,c,l,h),P=Ve(r,o,c,l,h,d);var L=Ne(I,A,x,P),D=Ke(I,A,x,P);v=j,S=w,j=k,w=O,k=y,O=m,y=Ne(f,dl,K,R),m=Ke(dl,dl,K,R),f=h,dl=d,h=c,d=l,c=r,l=o,r=Ne(K,R,L,D),o=Ke(K,R,L,D)}We(this.h,0,r,o),We(this.h,2,c,l),We(this.h,4,h,d),We(this.h,6,f,dl),We(this.h,8,y,m),We(this.h,10,k,O),We(this.h,12,j,w),We(this.h,14,v,S)},Me.prototype._digest=function(e){return"hex"===e?Ae.toHex32(this.h,"big"):Ae.split32(this.h,"big")};var nt=x,it=Ce;function ot(){if(!(this instanceof ot))return new ot;it.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}nt.inherits(ot,it);var st=ot;ot.blockSize=1024,ot.outSize=384,ot.hmacStrength=192,ot.padLength=128,ot.prototype._digest=function(e){return"hex"===e?nt.toHex32(this.h.slice(0,12),"big"):nt.split32(this.h.slice(0,12),"big")},M.sha1=ie,M.sha224=Ie,M.sha256=je,M.sha384=st,M.sha512=Ce;var at={},ct=x,ut=L,lt=ct.rotl32,ht=ct.sum32,ft=ct.sum32_3,bt=ct.sum32_4,pt=ut.BlockHash;function yt(){if(!(this instanceof yt))return new yt;pt.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function gt(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function mt(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function kt(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}ct.inherits(yt,pt),at.ripemd160=yt,yt.blockSize=512,yt.outSize=160,yt.hmacStrength=192,yt.padLength=64,yt.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],o=this.h[2],c=this.h[3],l=this.h[4],h=n,d=r,f=o,y=c,m=l,k=0;k<80;k++){var O=ht(lt(bt(n,gt(k,r,o,c),e[Ot[k]+t],mt(k)),s[k]),l);n=l,l=c,c=lt(o,10),o=r,r=O,O=ht(lt(bt(h,gt(79-k,d,f,y),e[jt[k]+t],kt(k)),wt[k]),m),h=m,m=y,y=lt(f,10),f=d,d=O}O=ft(this.h[1],o,y),this.h[1]=ft(this.h[2],c,m),this.h[2]=ft(this.h[3],l,h),this.h[3]=ft(this.h[4],n,d),this.h[4]=ft(this.h[0],r,f),this.h[0]=O},yt.prototype._digest=function(e){return"hex"===e?ct.toHex32(this.h,"little"):ct.split32(this.h,"little")};var Ot=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],jt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],wt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vt=x,St=P;function It(e,t,n){if(!(this instanceof It))return new It(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(vt.toArray(t,n))}var At=It;It.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),St(e.length<=this.blockSize);for(var i=e.length;i<this.blockSize;i++)e.push(0);for(i=0;i<e.length;i++)e[i]^=54;for(this.inner=(new this.Hash).update(e),i=0;i<e.length;i++)e[i]^=106;this.outer=(new this.Hash).update(e)},It.prototype.update=function(e,t){return this.inner.update(e,t),this},It.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=x,t.common=L,t.sha=M,t.ripemd=at,t.hmac=At,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(A);var xt=A;let Pt=!1,Et=!1;const Tt={debug:1,default:2,info:2,warning:3,error:4,off:5};let Bt=Tt.default,_t=null;const Wt=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((form=>{try{if("test"!=="test".normalize(form))throw new Error("bad normalize")}catch(t){e.push(form)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Nt,Kt;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Nt||(Nt={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(Kt||(Kt={}));const Rt="0123456789abcdef";class Lt{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();null==Tt[n]&&this.throwArgumentError("invalid log level name","logLevel",e),Bt>Tt[n]||console.log.apply(console,t)}debug(...e){this._log(Lt.levels.DEBUG,e)}info(...e){this._log(Lt.levels.INFO,e)}warn(...e){this._log(Lt.levels.WARNING,e)}makeError(e,code,t){if(Et)return this.makeError("censored error",code,{});code||(code=Lt.errors.UNKNOWN_ERROR),t||(t={});const n=[];Object.keys(t).forEach((e=>{const r=t[e];try{if(r instanceof Uint8Array){let t="";for(let i=0;i<r.length;i++)t+=Rt[r[i]>>4],t+=Rt[15&r[i]];n.push(e+"=Uint8Array(0x"+t+")")}else n.push(e+"="+JSON.stringify(r))}catch(r){n.push(e+"="+JSON.stringify(t[e].toString()))}})),n.push(`code=${code}`),n.push(`version=${this.version}`);const r=e;n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=r,o.code=code,Object.keys(t).forEach((function(e){o[e]=t[e]})),o}throwError(e,code,t){throw this.makeError(e,code,t)}throwArgumentError(e,t,n){return this.throwError(e,Lt.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,code,n){e||this.throwError(t,code,n)}assertArgument(e,t,n,r){e||this.throwArgumentError(t,n,r)}checkNormalize(e){Wt&&this.throwError("platform missing String.prototype.normalize",Lt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Wt})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Lt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Lt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,Lt.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Lt.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Lt.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Lt.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Lt.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return _t||(_t=new Lt("logger/5.5.0")),_t}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Lt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Pt){if(!e)return;this.globalLogger().throwError("error censorship permanent",Lt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Et=!!e,Pt=!!t}static setLogLevel(e){const t=Tt[e.toLowerCase()];null!=t?Bt=t:Lt.globalLogger().warn("invalid log level - "+e)}static from(e){return new Lt(e)}}Lt.errors=Kt,Lt.levels=Nt;const Dt=new Lt("bytes/5.5.0");function Ut(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Ut(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function zt(e){return"number"==typeof e&&e==e&&e%1==0}function qt(e,t){if(t||(t={}),"number"==typeof e){Dt.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Ut(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){if("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))return!1;if(t&&e.length!==2+2*t)return!1;return!0}(e)){let n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0x0"+n.substring(2):"right"===t.hexPad?n+="0":Dt.throwArgumentError("hex data is odd-length","value",e));const r=[];for(let i=0;i<n.length;i+=2)r.push(parseInt(n.substring(i,i+2),16));return Ut(new Uint8Array(r))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!zt(e.length)||e.length<0)return!1;for(let i=0;i<e.length;i++){const t=e[i];if(!zt(t)||t<0||t>=256)return!1}return!0}(e)?Ut(new Uint8Array(e)):Dt.throwArgumentError("invalid arrayify value","value",e)}function Mt(data){return"0x"+xt.sha256().update(qt(data)).digest("hex")}new Lt("sha2/5.5.0");class Ct{constructor(e){Object.assign(this,e)}encode(){return c.Buffer.from(Object(y.serialize)(Ft,this))}static decode(data){return Object(y.deserialize)(Ft,this,data)}static decodeUnchecked(data){return Object(y.deserializeUnchecked)(Ft,this,data)}}const Ft=new Map;class Gt extends Ct{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=f.a.decode(e);if(32!=t.length)throw new Error("Invalid public key input");this._bn=new h.a(t)}else this._bn=new h.a(e);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(e){return this._bn.eq(e._bn)}toBase58(){return f.a.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){const b=this._bn.toArrayLike(c.Buffer);if(32===b.length)return b;const e=c.Buffer.alloc(32);return b.copy(e,32-b.length),e}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const r=c.Buffer.concat([e.toBuffer(),c.Buffer.from(t),n.toBuffer()]),o=Mt(new Uint8Array(r)).slice(2);return new Gt(c.Buffer.from(o,"hex"))}static async createProgramAddress(e,t){let n=c.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");n=c.Buffer.concat([n,S(e)])})),n=c.Buffer.concat([n,t.toBuffer(),c.Buffer.from("ProgramDerivedAddress")]);let r=Mt(new Uint8Array(n)).slice(2),o=new h.a(r,16).toArray(void 0,32);if(Vt(o))throw new Error("Invalid seeds, address must fall off the curve");return new Gt(o)}static async findProgramAddress(e,t){let address,n=255;for(;0!=n;){try{const r=e.concat(c.Buffer.from([n]));address=await this.createProgramAddress(r,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[address,n]}throw new Error("Unable to find a viable program address nonce")}static isOnCurve(e){return 1==Vt(e)}}Gt.default=new Gt("11111111111111111111111111111111"),Ft.set(Gt,{kind:"struct",fields:[["_bn","u256"]]});let Ht=o.a.lowlevel;function Vt(p){var e=[Ht.gf(),Ht.gf(),Ht.gf(),Ht.gf()],t=Ht.gf(),n=Ht.gf(),r=Ht.gf(),o=Ht.gf(),c=Ht.gf(),l=Ht.gf(),h=Ht.gf();return Ht.set25519(e[2],$t),Ht.unpack25519(e[1],p),Ht.S(r,e[1]),Ht.M(o,r,Ht.D),Ht.Z(r,r,e[2]),Ht.A(o,e[2],o),Ht.S(c,o),Ht.S(l,c),Ht.M(h,l,c),Ht.M(t,h,r),Ht.M(t,t,o),Ht.pow2523(t,t),Ht.M(t,t,r),Ht.M(t,t,o),Ht.M(t,t,o),Ht.M(e[0],t,o),Ht.S(n,e[0]),Ht.M(n,n,o),Xt(n,r)&&Ht.M(e[0],e[0],Jt),Ht.S(n,e[0]),Ht.M(n,n,o),Xt(n,r)?0:1}let $t=Ht.gf([1]),Jt=Ht.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Xt(a,b){var e=new Uint8Array(32),t=new Uint8Array(32);return Ht.pack25519(e,a),Ht.pack25519(t,b),Ht.crypto_verify_32(e,0,t,0)}new Gt("BPFLoader1111111111111111111111111111111111");const Yt=(e="publicKey")=>m.blob(32,e),Zt=(e="string")=>{const t=m.struct([m.u32("length"),m.u32("lengthPadding"),m.blob(m.offset(m.u32(),-8),"chars")],e),n=t.decode.bind(t),r=t.encode.bind(t);return t.decode=(e,t)=>n(e,t).chars.toString("utf8"),t.encode=(e,t,n)=>{const data={chars:c.Buffer.from(e,"utf8")};return r(data,t,n)},t.alloc=e=>m.u32().span+m.u32().span+c.Buffer.from(e,"utf8").length,t};function Qt(e){let t=0,n=0;for(;;){let r=e.shift();if(t|=(127&r)<<7*n,n+=1,0==(128&r))break}return t}function en(e,t){let n=t;for(;;){let t=127&n;if(n>>=7,0==n){e.push(t);break}t|=128,e.push(t)}}class tn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new Gt(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];en(t,e);const n=this.instructions.map((e=>{const{accounts:t,programIdIndex:n}=e,data=f.a.decode(e.data);let r=[];en(r,t.length);let o=[];return en(o,data.length),{programIdIndex:n,keyIndicesCount:c.Buffer.from(r),keyIndices:c.Buffer.from(t),dataLength:c.Buffer.from(o),data:data}}));let r=[];en(r,n.length);let o=c.Buffer.alloc(on);c.Buffer.from(r).copy(o);let l=r.length;n.forEach((e=>{const t=m.struct([m.u8("programIdIndex"),m.blob(e.keyIndicesCount.length,"keyIndicesCount"),m.seq(m.u8("keyIndex"),e.keyIndices.length,"keyIndices"),m.blob(e.dataLength.length,"dataLength"),m.seq(m.u8("userdatum"),e.data.length,"data")]).encode(e,o,l);l+=t})),o=o.slice(0,l);const h=m.struct([m.blob(1,"numRequiredSignatures"),m.blob(1,"numReadonlySignedAccounts"),m.blob(1,"numReadonlyUnsignedAccounts"),m.blob(t.length,"keyCount"),m.seq(Yt("key"),e,"keys"),Yt("recentBlockhash")]),d={numRequiredSignatures:c.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:c.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:c.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:c.Buffer.from(t),keys:this.accountKeys.map((e=>S(e.toBytes()))),recentBlockhash:f.a.decode(this.recentBlockhash)};let y=c.Buffer.alloc(2048);const k=h.encode(d,y);return o.copy(y,k),y.slice(0,k+o.length)}static from(e){let t=[...e];const n=t.shift(),r=t.shift(),o=t.shift(),l=Qt(t);let h=[];for(let i=0;i<l;i++){const e=t.slice(0,32);t=t.slice(32),h.push(f.a.encode(c.Buffer.from(e)))}const d=t.slice(0,32);t=t.slice(32);const y=Qt(t);let m=[];for(let i=0;i<y;i++){const e=t.shift(),n=Qt(t),r=t.slice(0,n);t=t.slice(n);const o=Qt(t),l=t.slice(0,o),data=f.a.encode(c.Buffer.from(l));t=t.slice(o),m.push({programIdIndex:e,accounts:r,data:data})}const k={header:{numRequiredSignatures:n,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:o},recentBlockhash:f.a.encode(c.Buffer.from(d)),accountKeys:h,instructions:m};return new tn(k)}}function nn(e,t){if(!e)throw new Error(t||"Assertion failed")}const rn=c.Buffer.alloc(64).fill(0),on=1232;class sn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=c.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}}class an{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.nonceInfo=void 0,e&&Object.assign(this,e)}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new sn(e))})),this}compileMessage(){const{nonceInfo:e}=this;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));const{recentBlockhash:t}=this;if(!t)throw new Error("Transaction recentBlockhash required");let n;if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let i=0;i<this.instructions.length;i++)if(void 0===this.instructions[i].programId)throw new Error(`Transaction instruction index ${i} has undefined program id`);const r=[],o=[];this.instructions.forEach((e=>{e.keys.forEach((e=>{o.push({...e})}));const t=e.programId.toString();r.includes(t)||r.push(t)})),r.forEach((e=>{o.push({pubkey:new Gt(e),isSigner:!1,isWritable:!1})})),o.sort((function(e,t){const n=e.pubkey.toBase58().localeCompare(t.pubkey.toBase58()),r=e.isSigner===t.isSigner?0:e.isSigner?-1:1,o=e.isWritable===t.isWritable?n:e.isWritable?-1:1;return r||o}));const c=[];o.forEach((e=>{const t=e.pubkey.toString(),n=c.findIndex((e=>e.pubkey.toString()===t));n>-1?c[n].isWritable=c[n].isWritable||e.isWritable:c.push(e)}));const l=c.findIndex((e=>e.pubkey.equals(n)));if(l>-1){const[e]=c.splice(l,1);e.isSigner=!0,e.isWritable=!0,c.unshift(e)}else c.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=c.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);c[t].isSigner||(c[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let h=0,d=0,y=0;const m=[],k=[];c.forEach((({pubkey:e,isSigner:t,isWritable:n})=>{t?(m.push(e.toString()),h+=1,n||(d+=1)):(k.push(e.toString()),n||(y+=1))}));const O=m.concat(k),j=this.instructions.map((e=>{const{data:data,programId:t}=e;return{programIdIndex:O.indexOf(t.toString()),accounts:e.keys.map((meta=>O.indexOf(meta.pubkey.toString()))),data:f.a.encode(data)}}));return j.forEach((e=>{nn(e.programIdIndex>=0),e.accounts.forEach((e=>nn(e>=0)))})),new tn({header:{numRequiredSignatures:h,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:y},accountKeys:O,recentBlockhash:t,instructions:j})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every(((e,n)=>t[n].equals(e.publicKey))))return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const n=e.toString();return!t.has(n)&&(t.add(n),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,n=[];for(const r of e){const e=r.publicKey.toString();t.has(e)||(t.add(e),n.push(r))}this.signatures=n.map((e=>({signature:null,publicKey:e.publicKey})));const r=this._compile();this._partialSign(r,...n),this._verifySignatures(r.serialize(),!0)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,n=[];for(const r of e){const e=r.publicKey.toString();t.has(e)||(t.add(e),n.push(r))}const r=this._compile();this._partialSign(r,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach((e=>{const t=o.a.sign.detached(n,e.secretKey);this._addSignature(e.publicKey,S(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){nn(64===t.length);const n=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=c.Buffer.from(t)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(e,t){for(const{signature:n,publicKey:r}of this.signatures)if(null===n){if(t)return!1}else if(!o.a.sign.detached.verify(e,n,r.toBuffer()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=this.serializeMessage();if(n&&!this._verifySignatures(r,t))throw new Error("Signature verification failed");return this._serialize(r)}_serialize(e){const{signatures:t}=this,n=[];en(n,t.length);const r=n.length+64*t.length+e.length,o=c.Buffer.alloc(r);return nn(t.length<256),c.Buffer.from(n).copy(o,0),t.forEach((({signature:e},t)=>{null!==e&&(nn(64===e.length,"signature has invalid length"),c.Buffer.from(e).copy(o,n.length+64*t))})),e.copy(o,n.length+64*t.length),nn(o.length<=on,`Transaction too large: ${o.length} > ${on}`),o}get keys(){return nn(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return nn(1===this.instructions.length),this.instructions[0].programId}get data(){return nn(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const n=Qt(t);let r=[];for(let i=0;i<n;i++){const e=t.slice(0,64);t=t.slice(64),r.push(f.a.encode(c.Buffer.from(e)))}return an.populate(tn.from(t),r)}static populate(e,t=[]){const n=new an;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach(((t,r)=>{const o={signature:t==f.a.encode(rn)?null:f.a.decode(t),publicKey:e.accountKeys[r]};n.signatures.push(o)})),e.instructions.forEach((t=>{const r=t.accounts.map((t=>{const r=e.accountKeys[t];return{pubkey:r,isSigner:n.signatures.some((e=>e.publicKey.toString()===r.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));n.instructions.push(new sn({keys:r,programId:e.accountKeys[t.programIdIndex],data:f.a.decode(t.data)}))})),n}}const cn=new Gt("SysvarC1ock11111111111111111111111111111111"),un=(new Gt("SysvarEpochSchedu1e111111111111111111111111"),new Gt("Sysvar1nstructions1111111111111111111111111"),new Gt("SysvarRecentB1ockHashes11111111111111111111")),ln=new Gt("SysvarRent111111111111111111111111111111111"),hn=(new Gt("SysvarRewards111111111111111111111111111111"),new Gt("SysvarS1otHashes111111111111111111111111111"),new Gt("SysvarS1otHistory11111111111111111111111111"),new Gt("SysvarStakeHistory1111111111111111111111111"));async function dn(e,t,n,r){const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries},c=await e.sendTransaction(t,n,o),l=(await e.confirmTransaction(c,r&&r.commitment)).value;if(l.err)throw new Error(`Transaction ${c} failed (${JSON.stringify(l)})`);return c}function fn(e){return new Promise((t=>setTimeout(t,e)))}function bn(e,t){const n=e.layout.span>=0?e.layout.span:function(e,t){let n=0;return e.layout.fields.forEach((e=>{e.span>=0?n+=e.span:"function"==typeof e.alloc&&(n+=e.alloc(t[e.property]))})),n}(e,t),data=c.Buffer.alloc(n),r=Object.assign({instruction:e.index},t);return e.layout.encode(r,data),data}const pn=m.nu64("lamportsPerSignature"),yn=m.struct([m.u32("version"),m.u32("state"),Yt("authorizedPubkey"),Yt("nonce"),m.struct([pn],"feeCalculator")]),gn=yn.span;const mn=Object.freeze({Create:{index:0,layout:m.struct([m.u32("instruction"),m.ns64("lamports"),m.ns64("space"),Yt("programId")])},Assign:{index:1,layout:m.struct([m.u32("instruction"),Yt("programId")])},Transfer:{index:2,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},CreateWithSeed:{index:3,layout:m.struct([m.u32("instruction"),Yt("base"),Zt("seed"),m.ns64("lamports"),m.ns64("space"),Yt("programId")])},AdvanceNonceAccount:{index:4,layout:m.struct([m.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:m.struct([m.u32("instruction"),Yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:m.struct([m.u32("instruction"),Yt("authorized")])},Allocate:{index:8,layout:m.struct([m.u32("instruction"),m.ns64("space")])},AllocateWithSeed:{index:9,layout:m.struct([m.u32("instruction"),Yt("base"),Zt("seed"),m.ns64("space"),Yt("programId")])},AssignWithSeed:{index:10,layout:m.struct([m.u32("instruction"),Yt("base"),Zt("seed"),Yt("programId")])},TransferWithSeed:{index:11,layout:m.struct([m.u32("instruction"),m.ns64("lamports"),Zt("seed"),Yt("programId")])}});class kn{constructor(){}static createAccount(e){const data=bn(mn.Create,{lamports:e.lamports,space:e.space,programId:S(e.programId.toBuffer())});return new sn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:data})}static transfer(e){let data,t;if("basePubkey"in e){data=bn(mn.TransferWithSeed,{lamports:e.lamports,seed:e.seed,programId:S(e.programId.toBuffer())}),t=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{data=bn(mn.Transfer,{lamports:e.lamports}),t=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new sn({keys:t,programId:this.programId,data:data})}static assign(e){let data,t;if("basePubkey"in e){data=bn(mn.AssignWithSeed,{base:S(e.basePubkey.toBuffer()),seed:e.seed,programId:S(e.programId.toBuffer())}),t=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{data=bn(mn.Assign,{programId:S(e.programId.toBuffer())}),t=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new sn({keys:t,programId:this.programId,data:data})}static createAccountWithSeed(e){const data=bn(mn.CreateWithSeed,{base:S(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:S(e.programId.toBuffer())});let t=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&t.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new sn({keys:t,programId:this.programId,data:data})}static createNonceAccount(e){const t=new an;"basePubkey"in e&&"seed"in e?t.add(kn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:gn,programId:this.programId})):t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:gn,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const data=bn(mn.InitializeNonceAccount,{authorized:S(e.authorizedPubkey.toBuffer())}),t={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:this.programId,data:data};return new sn(t)}static nonceAdvance(e){const data=bn(mn.AdvanceNonceAccount),t={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:data};return new sn(t)}static nonceWithdraw(e){const data=bn(mn.WithdrawNonceAccount,{lamports:e.lamports});return new sn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}static nonceAuthorize(e){const data=bn(mn.AuthorizeNonceAccount,{authorized:S(e.newAuthorizedPubkey.toBuffer())});return new sn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}static allocate(e){let data,t;if("basePubkey"in e){data=bn(mn.AllocateWithSeed,{base:S(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:S(e.programId.toBuffer())}),t=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{data=bn(mn.Allocate,{space:e.space}),t=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new sn({keys:t,programId:this.programId,data:data})}}kn.programId=new Gt("11111111111111111111111111111111");const On=on-300;class jn{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/jn.chunkSize)+1+1)}static async load(e,t,n,r,data){{const o=await e.getMinimumBalanceForRentExemption(data.length),c=await e.getAccountInfo(n.publicKey,"confirmed");let l=null;if(null!==c){if(c.executable)return console.error("Program load failed, account is already executable"),!1;c.data.length!==data.length&&(l=l||new an,l.add(kn.allocate({accountPubkey:n.publicKey,space:data.length}))),c.owner.equals(r)||(l=l||new an,l.add(kn.assign({accountPubkey:n.publicKey,programId:r}))),c.lamports<o&&(l=l||new an,l.add(kn.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:o-c.lamports})))}else l=(new an).add(kn.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:o>0?o:1,space:data.length,programId:r}));null!==l&&await dn(e,l,[t,n],{commitment:"confirmed"})}const o=m.struct([m.u32("instruction"),m.u32("offset"),m.u32("bytesLength"),m.u32("bytesLengthPadding"),m.seq(m.u8("byte"),m.offset(m.u32(),-8),"bytes")]),l=jn.chunkSize;let h=0,d=data,f=[];for(;d.length>0;){const y=d.slice(0,l),data=c.Buffer.alloc(l+16);o.encode({instruction:0,offset:h,bytes:y},data);const m=(new an).add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:r,data:data});if(f.push(dn(e,m,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await fn(1e3/e)}h+=l,d=d.slice(l)}await Promise.all(f);{const o=m.struct([m.u32("instruction")]),data=c.Buffer.alloc(o.span);o.encode({instruction:1},data);const l=(new an).add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:r,data:data});await dn(e,l,[t,n],{commitment:"confirmed"})}return!0}}jn.chunkSize=On;new Gt("BPFLoader2111111111111111111111111111111111");var wn={exports:{}};!function(e,t){var n="undefined"!=typeof self?self:I,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),c="FormData"in e,l="ArrayBuffer"in e;if(l)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&h.indexOf(Object.prototype.toString.call(e))>-1};function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function y(e){return"string"!=typeof e&&(e=String(e)),e}function m(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function k(e){this.map={},e instanceof k?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(header){this.append(header[0],header[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function O(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function j(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function w(e){var t=new FileReader,n=j(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var view=new Uint8Array(e.byteLength);return view.set(new Uint8Array(e)),view.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(body){var e;this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:o&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:c&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:n&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():l&&o&&((e=body)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l&&(ArrayBuffer.prototype.isPrototypeOf(body)||d(body))?this._bodyArrayBuffer=v(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=O(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?O(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var e,t,n,r=O(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=j(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var view=new Uint8Array(e),t=new Array(view.length),i=0;i<view.length;i++)t[i]=String.fromCharCode(view[i]);return t.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}k.prototype.append=function(e,t){e=f(e),t=y(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},k.prototype.delete=function(e){delete this.map[f(e)]},k.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},k.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},k.prototype.set=function(e,t){this.map[f(e)]=y(t)},k.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},k.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),m(e)},k.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),m(e)},k.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),m(e)},r&&(k.prototype[Symbol.iterator]=k.prototype.entries);var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(input,e){var t,n,body=(e=e||{}).body;if(input instanceof A){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,e.headers||(this.headers=new k(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new k(e.headers)),this.method=(t=e.method||this.method||"GET",n=t.toUpperCase(),I.indexOf(n)>-1?n:t),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function x(body){var form=new FormData;return body.trim().split("&").forEach((function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");form.append(decodeURIComponent(n),decodeURIComponent(r))}})),form}function P(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new k(t.headers),this.url=t.url||"",this._initBody(e)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},S.call(A.prototype),S.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},P.error=function(){var e=new P(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];P.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new P(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function T(input,e){return new Promise((function(n,r){var c=new A(input,e);if(c.signal&&c.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function h(){l.abort()}l.onload=function(){var e,t,r={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new k,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var e=line.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();t.append(n,r)}})),t)};r.url="responseURL"in l?l.responseURL:r.headers.get("X-Request-URL");var body="response"in l?l.response:l.responseText;n(new P(body,r))},l.onerror=function(){r(new TypeError("Network request failed"))},l.ontimeout=function(){r(new TypeError("Network request failed"))},l.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},l.open(c.method,c.url,!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&o&&(l.responseType="blob"),c.headers.forEach((function(e,t){l.setRequestHeader(t,e)})),c.signal&&(c.signal.addEventListener("abort",h),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",h)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}T.polyfill=!0,e.fetch||(e.fetch=T,e.Headers=k,e.Request=A,e.Response=P),t.Headers=k,t.Request=A,t.Response=P,t.fetch=T,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(wn,wn.exports);Error;const vn=Object(k.e)(Object(k.g)(Gt),Object(k.m)(),(e=>new Gt(e))),Sn=Object(k.n)([Object(k.m)(),Object(k.h)("base64")]),In=Object(k.e)(Object(k.g)(c.Buffer),Sn,(e=>c.Buffer.from(e[0],"base64")));function An(e){return Object(k.p)([Object(k.o)({jsonrpc:Object(k.h)("2.0"),id:Object(k.m)(),result:e}),Object(k.o)({jsonrpc:Object(k.h)("2.0"),id:Object(k.m)(),error:Object(k.o)({code:Object(k.q)(),message:Object(k.m)(),data:Object(k.k)(Object(k.a)())})})])}const xn=An(Object(k.q)());function Pn(e){return Object(k.e)(An(e),xn,(t=>"error"in t?t:{...t,result:Object(k.f)(t.result,e)}))}function En(e){return Pn(Object(k.o)({context:Object(k.o)({slot:Object(k.j)()}),value:e}))}function Tn(e){return Object(k.o)({context:Object(k.o)({slot:Object(k.j)()}),value:e})}const Bn=Object(k.o)({foundation:Object(k.j)(),foundationTerm:Object(k.j)(),initial:Object(k.j)(),taper:Object(k.j)(),terminal:Object(k.j)()}),_n=(Pn(Object(k.b)(Object(k.i)(Object(k.o)({epoch:Object(k.j)(),effectiveSlot:Object(k.j)(),amount:Object(k.j)(),postBalance:Object(k.j)()})))),Object(k.o)({epoch:Object(k.j)(),slotIndex:Object(k.j)(),slotsInEpoch:Object(k.j)(),absoluteSlot:Object(k.j)(),blockHeight:Object(k.k)(Object(k.j)()),transactionCount:Object(k.k)(Object(k.j)())})),Wn=Object(k.o)({slotsPerEpoch:Object(k.j)(),leaderScheduleSlotOffset:Object(k.j)(),warmup:Object(k.d)(),firstNormalEpoch:Object(k.j)(),firstNormalSlot:Object(k.j)()}),Nn=Object(k.l)(Object(k.m)(),Object(k.b)(Object(k.j)())),Kn=Object(k.i)(Object(k.p)([Object(k.o)({}),Object(k.m)()])),Rn=Object(k.o)({err:Kn}),Ln=Object(k.h)("receivedSignature");Object(k.o)({"solana-core":Object(k.m)(),"feature-set":Object(k.k)(Object(k.j)())}),En(Object(k.o)({err:Object(k.i)(Object(k.p)([Object(k.o)({}),Object(k.m)()])),logs:Object(k.i)(Object(k.b)(Object(k.m)())),accounts:Object(k.k)(Object(k.i)(Object(k.b)(Object(k.o)({executable:Object(k.d)(),owner:Object(k.m)(),lamports:Object(k.j)(),data:Object(k.b)(Object(k.m)()),rentEpoch:Object(k.k)(Object(k.j)())})))),unitsConsumed:Object(k.k)(Object(k.j)())}));Pn(Bn),Pn(_n),Pn(Wn),Pn(Nn),Pn(Object(k.j)()),En(Object(k.o)({total:Object(k.j)(),circulating:Object(k.j)(),nonCirculating:Object(k.j)(),nonCirculatingAccounts:Object(k.b)(vn)}));const Dn=Object(k.o)({amount:Object(k.m)(),uiAmount:Object(k.i)(Object(k.j)()),decimals:Object(k.j)(),uiAmountString:Object(k.k)(Object(k.m)())}),Un=(En(Object(k.b)(Object(k.o)({address:vn,amount:Object(k.m)(),uiAmount:Object(k.i)(Object(k.j)()),decimals:Object(k.j)(),uiAmountString:Object(k.k)(Object(k.m)())}))),En(Object(k.b)(Object(k.o)({pubkey:vn,account:Object(k.o)({executable:Object(k.d)(),owner:vn,lamports:Object(k.j)(),data:In,rentEpoch:Object(k.j)()})}))),Object(k.o)({program:Object(k.m)(),parsed:Object(k.q)(),space:Object(k.j)()})),zn=(En(Object(k.b)(Object(k.o)({pubkey:vn,account:Object(k.o)({executable:Object(k.d)(),owner:vn,lamports:Object(k.j)(),data:Un,rentEpoch:Object(k.j)()})}))),En(Object(k.b)(Object(k.o)({lamports:Object(k.j)(),address:vn}))),Object(k.o)({executable:Object(k.d)(),owner:vn,lamports:Object(k.j)(),data:In,rentEpoch:Object(k.j)()})),qn=(Object(k.o)({pubkey:vn,account:zn}),Object(k.e)(Object(k.p)([Object(k.g)(c.Buffer),Un]),Object(k.p)([Sn,Un]),(e=>Array.isArray(e)?Object(k.f)(e,In):e))),Mn=Object(k.o)({executable:Object(k.d)(),owner:vn,lamports:Object(k.j)(),data:qn,rentEpoch:Object(k.j)()}),Cn=(Object(k.o)({pubkey:vn,account:Mn}),Object(k.o)({state:Object(k.p)([Object(k.h)("active"),Object(k.h)("inactive"),Object(k.h)("activating"),Object(k.h)("deactivating")]),active:Object(k.j)(),inactive:Object(k.j)()}),Pn(Object(k.b)(Object(k.o)({signature:Object(k.m)(),slot:Object(k.j)(),err:Kn,memo:Object(k.i)(Object(k.m)()),blockTime:Object(k.k)(Object(k.i)(Object(k.j)()))}))),Pn(Object(k.b)(Object(k.o)({signature:Object(k.m)(),slot:Object(k.j)(),err:Kn,memo:Object(k.i)(Object(k.m)()),blockTime:Object(k.k)(Object(k.i)(Object(k.j)()))}))),Object(k.o)({subscription:Object(k.j)(),result:Tn(zn)}),Object(k.o)({pubkey:vn,account:zn})),Fn=(Object(k.o)({subscription:Object(k.j)(),result:Tn(Cn)}),Object(k.o)({parent:Object(k.j)(),slot:Object(k.j)(),root:Object(k.j)()})),Gn=(Object(k.o)({subscription:Object(k.j)(),result:Fn}),Object(k.p)([Object(k.o)({type:Object(k.p)([Object(k.h)("firstShredReceived"),Object(k.h)("completed"),Object(k.h)("optimisticConfirmation"),Object(k.h)("root")]),slot:Object(k.j)(),timestamp:Object(k.j)()}),Object(k.o)({type:Object(k.h)("createdBank"),parent:Object(k.j)(),slot:Object(k.j)(),timestamp:Object(k.j)()}),Object(k.o)({type:Object(k.h)("frozen"),slot:Object(k.j)(),timestamp:Object(k.j)(),stats:Object(k.o)({numTransactionEntries:Object(k.j)(),numSuccessfulTransactions:Object(k.j)(),numFailedTransactions:Object(k.j)(),maxTransactionsPerEntry:Object(k.j)()})}),Object(k.o)({type:Object(k.h)("dead"),slot:Object(k.j)(),timestamp:Object(k.j)(),err:Object(k.m)()})])),Hn=(Object(k.o)({subscription:Object(k.j)(),result:Gn}),Object(k.o)({subscription:Object(k.j)(),result:Tn(Object(k.p)([Rn,Ln]))}),Object(k.o)({subscription:Object(k.j)(),result:Object(k.j)()}),Object(k.o)({pubkey:Object(k.m)(),gossip:Object(k.i)(Object(k.m)()),tpu:Object(k.i)(Object(k.m)()),rpc:Object(k.i)(Object(k.m)()),version:Object(k.i)(Object(k.m)())}),Object(k.o)({votePubkey:Object(k.m)(),nodePubkey:Object(k.m)(),activatedStake:Object(k.j)(),epochVoteAccount:Object(k.d)(),epochCredits:Object(k.b)(Object(k.n)([Object(k.j)(),Object(k.j)(),Object(k.j)()])),commission:Object(k.j)(),lastVote:Object(k.j)(),rootSlot:Object(k.i)(Object(k.j)())})),Vn=(Pn(Object(k.o)({current:Object(k.b)(Hn),delinquent:Object(k.b)(Hn)})),Object(k.p)([Object(k.h)("processed"),Object(k.h)("confirmed"),Object(k.h)("finalized")])),$n=Object(k.o)({slot:Object(k.j)(),confirmations:Object(k.i)(Object(k.j)()),err:Kn,confirmationStatus:Object(k.k)(Vn)}),Jn=(En(Object(k.b)(Object(k.i)($n))),Pn(Object(k.j)()),Object(k.o)({signatures:Object(k.b)(Object(k.m)()),message:Object(k.o)({accountKeys:Object(k.b)(Object(k.m)()),header:Object(k.o)({numRequiredSignatures:Object(k.j)(),numReadonlySignedAccounts:Object(k.j)(),numReadonlyUnsignedAccounts:Object(k.j)()}),instructions:Object(k.b)(Object(k.o)({accounts:Object(k.b)(Object(k.j)()),data:Object(k.m)(),programIdIndex:Object(k.j)()})),recentBlockhash:Object(k.m)()})})),Xn=Object(k.o)({parsed:Object(k.q)(),program:Object(k.m)(),programId:vn}),Yn=Object(k.o)({accounts:Object(k.b)(vn),data:Object(k.m)(),programId:vn}),Zn=Object(k.p)([Yn,Xn]),Qn=Object(k.p)([Object(k.o)({parsed:Object(k.q)(),program:Object(k.m)(),programId:Object(k.m)()}),Object(k.o)({accounts:Object(k.b)(Object(k.m)()),data:Object(k.m)(),programId:Object(k.m)()})]),er=Object(k.e)(Zn,Qn,(e=>"accounts"in e?Object(k.f)(e,Yn):Object(k.f)(e,Xn))),nr=Object(k.o)({signatures:Object(k.b)(Object(k.m)()),message:Object(k.o)({accountKeys:Object(k.b)(Object(k.o)({pubkey:vn,signer:Object(k.d)(),writable:Object(k.d)()})),instructions:Object(k.b)(er),recentBlockhash:Object(k.m)()})}),rr=Object(k.o)({accountIndex:Object(k.j)(),mint:Object(k.m)(),owner:Object(k.k)(Object(k.m)()),uiTokenAmount:Dn}),ir=Object(k.o)({err:Kn,fee:Object(k.j)(),innerInstructions:Object(k.k)(Object(k.i)(Object(k.b)(Object(k.o)({index:Object(k.j)(),instructions:Object(k.b)(Object(k.o)({accounts:Object(k.b)(Object(k.j)()),data:Object(k.m)(),programIdIndex:Object(k.j)()}))})))),preBalances:Object(k.b)(Object(k.j)()),postBalances:Object(k.b)(Object(k.j)()),logMessages:Object(k.k)(Object(k.i)(Object(k.b)(Object(k.m)()))),preTokenBalances:Object(k.k)(Object(k.i)(Object(k.b)(rr))),postTokenBalances:Object(k.k)(Object(k.i)(Object(k.b)(rr)))}),or=Object(k.o)({err:Kn,fee:Object(k.j)(),innerInstructions:Object(k.k)(Object(k.i)(Object(k.b)(Object(k.o)({index:Object(k.j)(),instructions:Object(k.b)(er)})))),preBalances:Object(k.b)(Object(k.j)()),postBalances:Object(k.b)(Object(k.j)()),logMessages:Object(k.k)(Object(k.i)(Object(k.b)(Object(k.m)()))),preTokenBalances:Object(k.k)(Object(k.i)(Object(k.b)(rr))),postTokenBalances:Object(k.k)(Object(k.i)(Object(k.b)(rr)))}),sr=(Pn(Object(k.i)(Object(k.o)({blockhash:Object(k.m)(),previousBlockhash:Object(k.m)(),parentSlot:Object(k.j)(),transactions:Object(k.b)(Object(k.o)({transaction:Jn,meta:Object(k.i)(ir)})),rewards:Object(k.k)(Object(k.b)(Object(k.o)({pubkey:Object(k.m)(),lamports:Object(k.j)(),postBalance:Object(k.i)(Object(k.j)()),rewardType:Object(k.i)(Object(k.m)())}))),blockTime:Object(k.i)(Object(k.j)()),blockHeight:Object(k.i)(Object(k.j)())}))),Pn(Object(k.i)(Object(k.o)({blockhash:Object(k.m)(),previousBlockhash:Object(k.m)(),parentSlot:Object(k.j)(),transactions:Object(k.b)(Object(k.o)({transaction:Jn,meta:Object(k.i)(ir)})),rewards:Object(k.k)(Object(k.b)(Object(k.o)({pubkey:Object(k.m)(),lamports:Object(k.j)(),postBalance:Object(k.i)(Object(k.j)()),rewardType:Object(k.i)(Object(k.m)())}))),blockTime:Object(k.i)(Object(k.j)())}))),Pn(Object(k.i)(Object(k.o)({blockhash:Object(k.m)(),previousBlockhash:Object(k.m)(),parentSlot:Object(k.j)(),signatures:Object(k.b)(Object(k.m)()),blockTime:Object(k.i)(Object(k.j)())}))),Pn(Object(k.i)(Object(k.o)({slot:Object(k.j)(),meta:ir,blockTime:Object(k.k)(Object(k.i)(Object(k.j)())),transaction:Jn}))),Pn(Object(k.i)(Object(k.o)({slot:Object(k.j)(),transaction:nr,meta:Object(k.i)(or),blockTime:Object(k.k)(Object(k.i)(Object(k.j)()))}))),En(Object(k.o)({blockhash:Object(k.m)(),feeCalculator:Object(k.o)({lamportsPerSignature:Object(k.j)()})})),En(Object(k.o)({blockhash:Object(k.m)(),lastValidBlockHeight:Object(k.j)()})),Object(k.o)({slot:Object(k.j)(),numTransactions:Object(k.j)(),numSlots:Object(k.j)(),samplePeriodSecs:Object(k.j)()})),ar=(Pn(Object(k.b)(sr)),En(Object(k.i)(Object(k.o)({feeCalculator:Object(k.o)({lamportsPerSignature:Object(k.j)()})}))),Pn(Object(k.m)()),Pn(Object(k.m)()),Object(k.o)({err:Kn,logs:Object(k.b)(Object(k.m)()),signature:Object(k.m)()}));Object(k.o)({result:Tn(ar),subscription:Object(k.j)()});class cr{constructor(e){this._keypair=void 0,this._keypair=e||o.a.sign.keyPair()}static generate(){return new cr(o.a.sign.keyPair())}static fromSecretKey(e,t){const n=o.a.sign.keyPair.fromSecretKey(e);if(!t||!t.skipValidation){const e=(new TextEncoder).encode("@solana/web3.js-validation-v1"),t=o.a.sign.detached(e,n.secretKey);if(!o.a.sign.detached.verify(e,t,n.publicKey))throw new Error("provided secretKey is invalid")}return new cr(n)}static fromSeed(e){return new cr(o.a.sign.keyPair.fromSeed(e))}get publicKey(){return new Gt(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const ur=m.struct([m.u8("numSignatures"),m.u8("padding"),m.u16("signatureOffset"),m.u16("signatureInstructionIndex"),m.u16("publicKeyOffset"),m.u16("publicKeyInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u16("messageInstructionIndex")]);class lr{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:r,instructionIndex:o}=e;nn(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),nn(64===r.length,`Signature must be 64 bytes but received ${r.length} bytes`);const l=ur.span,h=l+t.length,d=h+r.length,f=c.Buffer.alloc(d+n.length);return ur.encode({numSignatures:1,padding:0,signatureOffset:h,signatureInstructionIndex:o,publicKeyOffset:l,publicKeyInstructionIndex:o,messageDataOffset:d,messageDataSize:n.length,messageInstructionIndex:o},f),f.fill(t,l),f.fill(r,h),f.fill(n,d),new sn({keys:[],programId:lr.programId,data:f})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:r}=e;nn(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=cr.fromSecretKey(t),c=e.publicKey.toBytes(),l=o.a.sign.detached(n,e.secretKey);return this.createInstructionWithPublicKey({publicKey:c,message:n,signature:l,instructionIndex:r})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}lr.programId=new Gt("Ed25519SigVerify111111111111111111111111111");const dr=new Gt("StakeConfig11111111111111111111111111111111");class fr{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}fr.default=new fr(0,0,Gt.default);const pr=Object.freeze({Initialize:{index:0,layout:m.struct([m.u32("instruction"),((e="authorized")=>m.struct([Yt("staker"),Yt("withdrawer")],e))(),((e="lockup")=>m.struct([m.ns64("unixTimestamp"),m.ns64("epoch"),Yt("custodian")],e))()])},Authorize:{index:1,layout:m.struct([m.u32("instruction"),Yt("newAuthorized"),m.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:m.struct([m.u32("instruction")])},Split:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Withdraw:{index:4,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])},Deactivate:{index:5,layout:m.struct([m.u32("instruction")])},Merge:{index:7,layout:m.struct([m.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:m.struct([m.u32("instruction"),Yt("newAuthorized"),m.u32("stakeAuthorizationType"),Zt("authoritySeed"),Yt("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class yr{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:r}=e,o=r||fr.default,data=bn(pr.Initialize,{authorized:{staker:S(n.staker.toBuffer()),withdrawer:S(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:S(o.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1}],programId:this.programId,data:data};return new sn(c)}static createAccountWithSeed(e){const t=new an;t.add(kn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:r,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:o}))}static createAccount(e){const t=new an;t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:r,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:o}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:r}=e,data=bn(pr.Delegate);return(new an).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:dr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:r,stakeAuthorizationType:o,custodianPubkey:c}=e,data=bn(pr.Authorize,{newAuthorized:S(r.toBuffer()),stakeAuthorizationType:o.index}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return c&&l.push({pubkey:c,isSigner:!1,isWritable:!1}),(new an).add({keys:l,programId:this.programId,data:data})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:r,authorityOwner:o,newAuthorizedPubkey:c,stakeAuthorizationType:l,custodianPubkey:h}=e,data=bn(pr.AuthorizeWithSeed,{newAuthorized:S(c.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:r,authorityOwner:S(o.toBuffer())}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:cn,isSigner:!1,isWritable:!1}];return h&&d.push({pubkey:h,isSigner:!1,isWritable:!1}),(new an).add({keys:d,programId:this.programId,data:data})}static split(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:r,lamports:o}=e,c=new an;c.add(kn.createAccount({fromPubkey:n,newAccountPubkey:r,lamports:0,space:this.space,programId:this.programId}));const data=bn(pr.Split,{lamports:o});return c.add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:r}=e,data=bn(pr.Merge);return(new an).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:r,lamports:o,custodianPubkey:c}=e,data=bn(pr.Withdraw,{lamports:o}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:hn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return c&&l.push({pubkey:c,isSigner:!1,isWritable:!1}),(new an).add({keys:l,programId:this.programId,data:data})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,data=bn(pr.Deactivate);return(new an).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:data})}}yr.programId=new Gt("Stake11111111111111111111111111111111111111"),yr.space=200;const{publicKeyCreate:gr,ecdsaSign:mr}=j.a,kr=m.struct([m.u8("numSignatures"),m.u16("signatureOffset"),m.u8("signatureInstructionIndex"),m.u16("ethAddressOffset"),m.u8("ethAddressInstructionIndex"),m.u16("messageDataOffset"),m.u16("messageDataSize"),m.u8("messageInstructionIndex"),m.blob(20,"ethAddress"),m.blob(64,"signature"),m.u8("recoveryId")]);class Or{constructor(){}static publicKeyToEthAddress(e){nn(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return c.Buffer.from(v.a.keccak_256.update(S(e)).digest()).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:r,recoveryId:o,instructionIndex:c}=e;return Or.createInstructionWithEthAddress({ethAddress:Or.publicKeyToEthAddress(t),message:n,signature:r,recoveryId:o,instructionIndex:c})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:r,recoveryId:o,instructionIndex:l=0}=e;let h;h="string"==typeof t?t.startsWith("0x")?c.Buffer.from(t.substr(2),"hex"):c.Buffer.from(t,"hex"):t,nn(20===h.length,`Address must be 20 bytes but received ${h.length} bytes`);const d=12+h.length,f=d+r.length+1,y=c.Buffer.alloc(kr.span+n.length);return kr.encode({numSignatures:1,signatureOffset:d,signatureInstructionIndex:l,ethAddressOffset:12,ethAddressInstructionIndex:l,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:l,signature:S(r),ethAddress:S(h),recoveryId:o},y),y.fill(S(n),kr.span),new sn({keys:[],programId:Or.programId,data:y})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:r}=e;nn(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=S(t),o=gr(e,!1).slice(1),l=c.Buffer.from(v.a.keccak_256.update(S(n)).digest()),{signature:h,recid:d}=mr(l,e);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:h,recoveryId:d,instructionIndex:r})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Or.programId=new Gt("KeccakSecp256k11111111111111111111111111111");new Gt("Va1idator1nfo111111111111111111111111111111"),Object(k.o)({name:Object(k.m)(),website:Object(k.k)(Object(k.m)()),details:Object(k.k)(Object(k.m)()),keybaseUsername:Object(k.k)(Object(k.m)())});new Gt("Vote111111111111111111111111111111111111111"),m.struct([Yt("nodePubkey"),Yt("authorizedWithdrawer"),m.u8("commission"),m.nu64(),m.seq(m.struct([m.nu64("slot"),m.u32("confirmationCount")]),m.offset(m.u32(),-8),"votes"),m.u8("rootSlotValid"),m.nu64("rootSlot"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),Yt("authorizedVoter")]),m.offset(m.u32(),-8),"authorizedVoters"),m.struct([m.seq(m.struct([Yt("authorizedPubkey"),m.nu64("epochOfLastAuthorizedSwitch"),m.nu64("targetEpoch")]),32,"buf"),m.nu64("idx"),m.u8("isEmpty")],"priorVoters"),m.nu64(),m.seq(m.struct([m.nu64("epoch"),m.nu64("credits"),m.nu64("prevCredits")]),m.offset(m.u32(),-8),"epochCredits"),m.struct([m.nu64("slot"),m.nu64("timestamp")],"lastTimestamp")]);const jr=Object.freeze({InitializeAccount:{index:0,layout:m.struct([m.u32("instruction"),((e="voteInit")=>m.struct([Yt("nodePubkey"),Yt("authorizedVoter"),Yt("authorizedWithdrawer"),m.u8("commission")],e))()])},Withdraw:{index:3,layout:m.struct([m.u32("instruction"),m.ns64("lamports")])}});class wr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:r}=e,data=bn(jr.InitializeAccount,{voteInit:{nodePubkey:S(r.nodePubkey.toBuffer()),authorizedVoter:S(r.authorizedVoter.toBuffer()),authorizedWithdrawer:S(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:data};return new sn(o)}static createAccount(e){const t=new an;return t.add(kn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:r,toPubkey:o}=e,data=bn(jr.Withdraw,{lamports:r}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return(new an).add({keys:c,programId:this.programId,data:data})}}wr.programId=new Gt("Vote111111111111111111111111111111111111111"),wr.space=3731;const vr={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Sr(e,t){const n=!1===t?"http":"https";if(!e)return vr[n].devnet;const r=vr[n][e];if(!r)throw new Error(`Unknown ${n} cluster: ${e}`);return r}}).call(this,n(37))},1959:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return A})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return B})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return W})),n.d(t,"o",(function(){return N})),n.d(t,"p",(function(){return K})),n.d(t,"q",(function(){return R}));class r extends TypeError{constructor(e,t){let n;const{message:r,...o}=e,{path:path}=e;super(0===path.length?r:"At path: "+path.join(".")+" -- "+r),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[e,...t()]}}}function o(e){return"object"==typeof e&&null!=e}function c(e){return"string"==typeof e?JSON.stringify(e):""+e}function l(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:path,branch:o}=t,{type:l}=n,{refinement:h,message:d="Expected a value of type `"+l+"`"+(h?" with refinement `"+h+"`":"")+", but received: `"+c(r)+"`"}=e;return{value:r,type:l,refinement:h,key:path[path.length-1],path:path,branch:o,...e,message:d}}function*h(e,t,n,r){var c;o(c=e)&&"function"==typeof c[Symbol.iterator]||(e=[e]);for(const o of e){const e=l(o,t,n,r);e&&(yield e)}}function*d(e,t,n={}){const{path:path=[],branch:r=[e],coerce:c=!1,mask:mask=!1}=n,l={path:path,branch:r};if(c&&(e=t.coercer(e,l),mask&&"type"!==t.type&&o(t.schema)&&o(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let h=!0;for(const n of t.validator(e,l))h=!1,yield[n,void 0];for(let[n,f,s]of t.entries(e,l)){const t=d(f,s,{path:void 0===n?path:[...path,n],branch:void 0===n?r:[...r,f],coerce:c,mask:mask});for(const r of t)r[0]?(h=!1,yield[r[0],void 0]):c&&(f=r[1],void 0===n?e=f:e instanceof Map?e.set(n,f):e instanceof Set?e.add(f):o(e)&&(e[n]=f))}if(h)for(const n of t.refiner(e,l))h=!1,yield[n,void 0];h&&(yield[void 0,e])}class f{constructor(e){const{type:t,schema:n,validator:r,refiner:o,coercer:c=(e=>e),entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=c,this.validator=r?(e,t)=>h(r(e,t),t,this,e):()=>[],this.refiner=o?(e,t)=>h(o(e,t),t,this,e):()=>[]}assert(e){return y(e,this)}create(e){return m(e,this)}is(e){return k(e,this)}mask(e){return function(e,t){const n=O(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(e,this)}validate(e,t={}){return O(e,this,t)}}function y(e,t){const n=O(e,t);if(n[0])throw n[0]}function m(e,t){const n=O(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function k(e,t){return!O(e,t)[0]}function O(e,t,n={}){const o=d(e,t,n),c=function(input){const{done:e,value:t}=input.next();return e?void 0:t}(o);if(c[0]){return[new r(c[0],(function*(){for(const e of o)e[0]&&(yield e[0])})),void 0]}return[void 0,c[1]]}function j(e,t){return new f({type:e,schema:null,validator:t})}function w(){return j("any",(()=>!0))}function v(e){return new f({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[i,n]of t.entries())yield[i,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+c(e)})}function S(){return j("boolean",(e=>"boolean"==typeof e))}function I(e){return j("instance",(t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+c(t)))}function A(e){const t=c(e),n=typeof e;return new f({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||"Expected the literal `"+t+"`, but received: "+c(n)})}function x(){return j("never",(()=>!1))}function P(e){return new f({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function E(){return j("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+c(e)))}function T(e){return new f({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function B(e,t){return new f({type:"record",schema:null,*entries(n){if(o(n))for(const r in n){const o=n[r];yield[r,r,e],yield[r,o,t]}},validator:e=>o(e)||"Expected an object, but received: "+c(e)})}function _(){return j("string",(e=>"string"==typeof e||"Expected a string, but received: "+c(e)))}function W(e){const t=x();return new f({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||"Expected an array, but received: "+c(e)})}function N(e){const t=Object.keys(e);return new f({type:"type",schema:e,*entries(n){if(o(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>o(e)||"Expected an object, but received: "+c(e)})}function K(e){const t=e.map((s=>s.type)).join(" | ");return new f({type:"union",schema:null,validator(n,r){const o=[];for(const t of e){const[...e]=d(n,t,r),[c]=e;if(!c[0])return[];for(const[t]of e)t&&o.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+c(n),...o]}})}function R(){return j("unknown",(()=>!0))}function L(e,t,n){return new f({...e,coercer:(r,o)=>k(r,t)?e.coercer(n(r,o),o):e.coercer(r,o)})}},1960:function(e,t,n){(function(t){const r=n(391),path=n(813),o=n(812);function c(e){console.log(`[dotenv][DEBUG] ${e}`)}const l=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,h=/\\n/g,d=/\r\n|\n|\r/;function f(e,t){const n=Boolean(t&&t.debug),r={};return e.toString().split(d).forEach((function(line,e){const t=line.match(l);if(null!=t){const e=t[1];let n=t[2]||"";const o=n.length-1,c='"'===n[0]&&'"'===n[o];"'"===n[0]&&"'"===n[o]||c?(n=n.substring(1,o),c&&(n=n.replace(h,"\n"))):n=n.trim(),r[e]=n}else n&&c(`did not match key and value when parsing line ${e+1}: ${line}`)})),r}e.exports.config=function(e){let n=path.resolve(t.cwd(),".env"),l="utf8",h=!1;var d;e&&(null!=e.path&&(n="~"===(d=e.path)[0]?path.join(o.homedir(),d.slice(1)):d),null!=e.encoding&&(l=e.encoding),null!=e.debug&&(h=!0));try{const e=f(r.readFileSync(n,{encoding:l}),{debug:h});return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(t.env,n)?h&&c(`"${n}" is already defined in \`process.env\` and will not be overwritten`):t.env[n]=e[n]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=f}).call(this,n(104))},2029:function(e,t,n){"use strict";var r=n(231),o=n(517),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;var h=function(e,object){if(Object(r.a)(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Object(o.a)(e))||(l.test(e)||!c.test(e)||null!=object&&e in Object(object))},d=n(521);function f(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],c=n.cache;if(c.has(o))return c.get(o);var l=e.apply(this,r);return n.cache=c.set(o,l)||c,l};return n.cache=new(f.Cache||d.a),n}f.Cache=d.a;var y=f;var m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,O=function(e){var t=y(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(m,(function(e,n,r,o){t.push(r?o.replace(k,"$1"):n||e)})),t})),j=n(171);var w=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},v=j.a?j.a.prototype:void 0,S=v?v.toString:void 0;var I=function e(t){if("string"==typeof t)return t;if(Object(r.a)(t))return w(t,e)+"";if(Object(o.a)(t))return S?S.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var A=function(e){return null==e?"":I(e)};var x=function(e,object){return Object(r.a)(e)?e:h(e,object)?[e]:O(A(e))};var P=function(e){if("string"==typeof e||Object(o.a)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var E=function(object,path){for(var e=0,t=(path=x(path,object)).length;null!=object&&e<t;)object=object[P(path[e++])];return e&&e==t?object:void 0};t.a=function(object,path,e){var t=null==object?void 0:E(object,path);return void 0===t?e:t}}}]);