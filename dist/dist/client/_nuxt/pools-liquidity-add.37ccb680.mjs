import{_ as Bo}from"./back.fe7c48ab.mjs";import{_ as Oo}from"./refresh-icon.eaaabcd4.mjs";import{_ as Po}from"./assets-card.ce3dfb1c.mjs";import{_ as Ro}from"./coin-select.2f4a3700.mjs";import{_ as Yo,a as Vo}from"./img-leverage_2x.d1a63b40.mjs";import{_ as Do}from"./swap-setting.7e62e97c.mjs";import{a as po,Q as Xo,b as Co,r as t,i as ho,j as yo,k as Mo,l as bo,J as jo,o as u,c as Y,w as E,p as e,t as s,m as c,q as N,G as Fo,B as go,y as $o,z as So,X as Eo,e as j,Y as Wo,A as Ko,Z as m,$ as F,h as Uo,a0 as zo,a1 as H,a2 as x,a3 as vo,a4 as Go,a5 as Jo,a6 as Qo,s as fo,v as g}from"./entry.c597b80b.mjs";const Zo=po({components:{Modal:Xo},props:{isIncrease:{type:Boolean,required:!1},fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},currentLpInfo:{type:Object,required:!0},share:{type:String,required:!0},rate:{type:String,required:!0},currentRecivedLp:{type:String,required:!0}},emits:["to-add","on-close"],setup(o,n){const T=Co(),h=t(T.slippage||.5),$=t(!0),w=t(!1);function L(b){$.value=b}return{importIcon:ho,fixD:yo,decimalFormat:Mo,direct:$,changeDirect:L,rateChange:w,clickNextBtn:async()=>{n.emit("to-add")},slippage:h}}});const I=o=>($o("data-v-f048f67a"),o=o(),So(),o),Ho=I(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xo={class:"add-confirm-container"},oe={class:"card-content"},ee={class:"top"},ne={class:"coin"},se=["src"],ie=["src"],te={class:"bottom"},ae={class:"induction"},le={class:"item"},ue=I(()=>e("div",{class:"induction-text"},"Rate",-1)),re={class:"induction-value induction-value-change"},de={key:0},ce={key:1},me=I(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ve=[me],fe={class:"item"},pe=I(()=>e("div",{class:"induction-text"},"Slippage Tolerance",-1)),Ce={class:"induction-value"},he={class:"item"},ye=I(()=>e("div",{class:"induction-text"},"Liquidity Deposited",-1)),be={key:0,class:"induction-value"},ge={key:1,class:"induction-value"},$e={class:"item liquidity-item"},Se=I(()=>e("div",{class:"induction-text"},null,-1)),Ae={key:0,class:"induction-value"},we={key:1,class:"induction-value"},Le={class:"item"},ke=I(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),_e={key:0,class:"induction-value"},Ie={key:1,class:"induction-value"},qe=Fo(s("Confirm Supply"));function Ne(o,n,T,h,$,w){const L=go,A=jo("Modal");return u(),Y(A,{width:"440px",visible:!0,footer:null,title:"You will receive",class:"add-confirm-modal",onCancel:n[1]||(n[1]=b=>o.$emit("on-close"))},{closeIcon:E(()=>[Ho]),default:E(()=>[e("div",xo,[e("div",oe,[e("div",ee,[e("div",ne,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,se),e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,ie),e("p",null,s(o.currentRecivedLp)+" LP",1)])]),e("div",te,[e("div",ae,[e("div",le,[ue,e("div",re,[o.rateChange?(u(),c("span",ce,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",de,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=b=>o.rateChange=!o.rateChange)},ve))])]),e("div",fe,[pe,e("div",Ce,s(o.slippage)+"%",1)]),e("div",he,[ye,o.isIncrease?(u(),c("div",ge,s(o.fixD(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinXAmount)+Number(o.fromCoinAmount),o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("div",be,s(o.fromCoinAmount)+" "+s(o.fromCoin.symbol),1))]),e("div",$e,[Se,o.isIncrease?(u(),c("div",we,s(o.fixD(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinYAmount)+Number(o.toCoinAmount),o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)):(u(),c("div",Ae,s(o.toCoinAmount)+" "+s(o.toCoin.symbol),1))]),e("div",Le,[ke,o.isIncrease?(u(),c("div",Ie,s(o.currentLpInfo.myshareOfPool)+"% \u2192 "+s(o.share)+"%",1)):(u(),c("div",_e,s(o.share)+"%",1))])])])])]),N(L,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:E(()=>[qe]),_:1},8,["onClick"])]),_:1})}const Te=bo(Zo,[["render",Ne],["__scopeId","data-v-f048f67a"]]),Be=po({setup(o,n){const T=Eo(),h=j(()=>T),$=Co(),w=Wo();let L=t(!0),A=t(!1),b=t(!1),W=t(!1),K=t(!1),U=t(!1);const B=t("fromCoin"),O=t(""),r=t(""),z=t(!1),G=t(!1),p=t(!0),oo=t(!1),J=t(!1),v=t(""),f=t(""),Q=t(20),q=t(0),eo=t(null),P=Ko(),V=P.currentRoute.value.query.from,D=P.currentRoute.value.query.to,a=t(m[V]||Object.values(F)[0].coinA),l=t(m[D]||Object.values(F)[0].coinB),Z=t(""),Ao=j(()=>$.slippage),no=j(()=>{let i="",d="";return a.value&&l.value?(i=a.value.symbol+"-"+l.value.symbol,d=l.value.symbol+"-"+a.value.symbol):(i="",d=""),!Object.keys(F).includes(i)&&!Object.keys(F).includes(d)?"Pool not found":a.value&&Number(v.value)>Number(R.value.tokens[a.value.symbol].balance)?`Insufficient ${a.value.symbol} balance`:l.value&&Number(f.value)>Number(R.value.tokens[l.value.symbol].balance)?`Insufficient ${l.value.symbol} balance`:Number(v.value)?"Add to pool":"Enter an amount"}),wo=i=>{var d,C,S,_;B.value=i,i==="fromCoin"?(O.value=((d=l.value)==null?void 0:d.symbol)||"",r.value=((C=a.value)==null?void 0:C.symbol)||""):(O.value=((S=a.value)==null?void 0:S.symbol)||"",r.value=((_=l.value)==null?void 0:_.symbol)||""),z.value=!0},Lo=i=>{v.value="",f.value="",B.value==="fromCoin"?(l.value&&i.symbol.toLowerCase()===(l==null?void 0:l.value.symbol.toLowerCase())&&(l.value=null),a.value=i):(a.value&&i.symbol.toLowerCase()===(a==null?void 0:a.value.symbol.toLowerCase())&&(a.value=null),l.value=i),z.value=!1},ko=i=>{i==="fromCoin"?(p.value=!0,v.value=a.value&&a.value.balance):(p.value=!1,f.value=l.value&&l.value.balance)};Uo(async()=>{const i=P.currentRoute.value.query.from,d=P.currentRoute.value.query.to;Z.value=await k.getPrice({coinX:m[i],coinY:m[d]}),io()});const so=async()=>{q.value=0,b.value=!0,setTimeout(()=>{b.value=!1},1e3),h.value.address&&w.setMyLplist(h.value.address),Z.value=await k.getPrice({coinX:m[V],coinY:m[D]})},_o=()=>{const i=a.value;a.value=l.value,l.value=i,A.value=!0,setTimeout(()=>{A.value=!1},300)},io=()=>{eo.value=setInterval(()=>{oo.value||q.value<Q.value&&(q.value+=1,q.value===Q.value&&(q.value=0))},1e3)},Io=async()=>{G.value=!0},k=zo();H(p,x((i,d)=>{p.value=i},800)),H(v,x((i,d)=>{i&&p.value&&lo(i),i==""&&p.value&&(f.value="")},500)),H(f,x((i,d)=>{i&&!p.value&&lo(i),i==""&&!p.value&&(v.value="")},500));const to=t(""),ao=t(""),lo=async i=>{const d=t({});if(i!==""&&no.value!=="Pool not found"){if(p.value?d.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],amount:i}:d.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],amount:i},d.value)try{const C=await k.getLiquidityAndCoinYByCoinX(d.value);p.value?f.value=C.coinYAmount:v.value=C.coinYAmount,to.value=C.lpAmountView;const S=await k.getShareOfPool({coinX:m[V],coinY:m[D],currentLpVal:C.lpAmount});ao.value=S}catch{}}else p.value?f.value="":v.value=""},R=j(()=>w),uo=t({});vo(async()=>{h.value.address&&w.setMyLplist(h.value.address)}),vo(()=>{if(a.value&&l.value&&R.value.myLplist&&R.value.myLplist.length>0&&h.value.address){const i=R.value.myLplist;let d;if(a.value.symbol&&l.value.symbol&&(d=Qo(a.value.symbol,l.value.symbol)),d){const C=i.filter(S=>S.symbol===d.symbol)[0];uo.value=C}}});const{setIsShowSuccess:qo,setIsShowRejected:ro,setIsShowWaiting:X,setTransactionDesc:No,setTransactionTxid:co}=$;return{addCommom:Go,share:ao,prettyAmount:Jo,fixD:yo,currentLpInfo:uo,lpAmountView:to,coinfrom:V,cointo:D,router:P,wallet:h,hasLiquidity:L,importIcon:ho,clickExchange:_o,clickRefresh:so,refresh:b,change:A,isShowAddress:W,isShowSwapSetting:K,fromCoin:a,toCoin:l,slippage:Ao,openCoinSelect:wo,onCoinSelect:Lo,existingCoins:O,lastSelectCoin:r,currentCoinKey:B,showCoinSelect:z,fromCoinAmount:v,toCoinAmount:f,maxBtnSelect:ko,fixedFromCoin:p,BtnText:no,clickBtn:Io,loading:oo,swaping:J,autoRefreshTime:Q,countdown:q,setMarketTimer:io,marketTimer:eo,rateChange:U,isShowAddConfirm:G,rate:Z,toAdd:async()=>{var i,d,C,S;G.value=!1,co(""),No(`Supplied ${v.value} ${(i=a.value)==null?void 0:i.symbol} and 
        ${f.value} ${(d=l.value)==null?void 0:d.symbol}`),X(!0);try{const _=t({});p.value?_.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],coinXAmount:v.value,coinYAmount:f.value,slippage:Number($.slippage)/100}:_.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],coinXAmount:f.value,coinYAmount:v.value,slippage:Number($.slippage)/100};const To=await k.createAddLiquidityTransactionPayload(_.value),M=await h.value.currentWallet.signAndSubmitTransaction(To);if(M&&M.hash){co(M.hash),X(!1),qo(!0);const mo={title:"Add Liquidity",desc:`Supplying ${v.value} ${(C=a.value)==null?void 0:C.symbol} and 
        ${f.value} ${(S=l.value)==null?void 0:S.symbol}`,hash:M.hash};k.showTransitionPending(mo),await k.watchTransaction(mo)&&setTimeout(()=>{so()},1e3)}else X(!1),ro(!0);J.value=!1,f.value="",v.value=""}catch{J.value=!1,X(!1),ro(!0),f.value="",v.value=""}}}}});const y=o=>($o("data-v-5a27b17b"),o=o(),So(),o),Oe={class:"linquidity-add-container"},Pe={class:"title"},Re=y(()=>e("div",{class:"left"},"Add Liquidity",-1)),Ye={class:"right title-right"},Ve=y(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),De=y(()=>e("use",{"xlink:href":"#icon-icon-information"},null,-1)),Xe=[De],Me={class:"swap-card"},je={class:"card-container"},Fe={class:"card-item"},Ee={class:"card-item"},We={class:"exchange"},Ke=y(()=>e("use",{"xlink:href":"#icon-icon-add1"},null,-1)),Ue=[Ke],ze={key:0,class:"induction"},Ge={key:0,class:"item"},Je=y(()=>e("div",{class:"induction-text"},"Rate",-1)),Qe={class:"induction-value induction-value-change"},Ze={key:0},He={key:1},xe=y(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),on=[xe],en={key:1,class:"item"},nn=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),sn={class:"induction-value"},tn={key:2,class:"item"},an=y(()=>e("div",{class:"induction-text"},"Estimated LP Tokens Received",-1)),ln={class:"induction-value"},un={key:0,class:"icon","aria-hidden":"true"},rn=y(()=>e("use",{"xlink:href":"#icon-icon-add"},null,-1)),dn=[rn],cn={key:0,class:"showMyLiquidity"},mn={class:"myLiquidity"},vn=y(()=>e("div",{class:"left"},"Your Liquidity",-1)),fn={class:"right"},pn={class:"liquidityAsset"},Cn={class:"item"},hn={class:"left"},yn=["src"],bn={class:"right"},gn={class:"item"},$n={class:"left"},Sn=["src"],An={class:"right"},wn={class:"induction induction-liquidity"},Ln={class:"item"},kn=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),_n={class:"induction-value"};function In(o,n,T,h,$,w){const L=Bo,A=Oo,b=Po,W=go,K=Ro,U=Vo,B=Do,O=Te;return u(),c("div",Oe,[N(L),e("div",Pe,[Re,e("div",Ye,[e("div",{class:"slippage-icon",onClick:n[0]||(n[0]=r=>o.isShowSwapSetting=!0)},[Ve,e("span",null,s(o.slippage)+"%",1)]),(u(),c("svg",{class:"icon information-icon","aria-hidden":"true",onClick:n[1]||(n[1]=r=>o.isShowAddress=!0)},Xe)),N(A,{loading:o.refresh,"auto-refresh-time":o.autoRefreshTime,countdown:o.countdown,onClickRefresh:o.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),e("div",Me,[e("div",je,[e("div",Fe,[N(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[2]||(n[2]=r=>o.fromCoinAmount=r),"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.fromCoin?o.fromCoin.balance:null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:n[3]||(n[3]=r=>o.maxBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=r=>o.fromCoinAmount=r),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0}),onOnSelect:n[6]||(n[6]=r=>o.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",Ee,[N(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[7]||(n[7]=r=>o.toCoinAmount=r),"input-value":o.toCoinAmount,"coin-name":o.toCoin?o.toCoin.symbol:"",balance:o.toCoin?o.toCoin.balance:null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:n[8]||(n[8]=r=>o.maxBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=r=>o.toCoinAmount=r),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1}),onOnSelect:n[11]||(n[11]=r=>o.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("img",{class:fo(o.change?"gang animationex":"gang"),src:Yo,alt:""},null,2),e("div",We,[(u(),c("svg",{class:fo(o.change?"icon animationex":"icon"),"aria-hidden":"true"},Ue,2))])]),o.BtnText!=="Pool not found"?(u(),c("div",ze,[o.fromCoin&&o.toCoin?(u(),c("div",Ge,[Je,e("div",Qe,[o.rateChange?(u(),c("span",He,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",Ze,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[12]||(n[12]=r=>o.rateChange=!o.rateChange)},on))])])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",en,[nn,e("div",sn,s(o.share)+"%",1)])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",tn,[an,e("div",ln,s(o.lpAmountView),1)])):g("",!0)])):g("",!0)]),N(W,{disabled:o.wallet.connected?o.loading||o.swaping||!o.fromCoin||!o.toCoin||!Number(o.fromCoinAmount)||!Number(o.toCoinAmount)||Number(o.fromCoinAmount)>o.fromCoin.balance||Number(o.toCoinAmount)>Number(o.toCoin.balance)||o.swapBtnText=="Pool not found":!1,loading:o.swaping,class:"big-btn",onClick:n[13]||(n[13]=r=>o.wallet.connected?o.isShowAddConfirm=!0:o.wallet.setIsShowWalletModal(!0))},{default:E(()=>[o.wallet.connected?(u(),c("svg",un,dn)):g("",!0),e("span",null,s(o.wallet.connected?o.BtnText:"Connect Wallet"),1)]),_:1},8,["disabled","loading"]),o.currentLpInfo&&o.currentLpInfo.myLpBalance&&Number(o.currentLpInfo.balance)!==0&&o.wallet.connected&&o.BtnText!=="Pool not found"?(u(),c("div",cn,[e("div",mn,[vn,e("div",fn,[e("p",null,s(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+s(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])]),e("div",pn,[e("div",Cn,[e("div",hn,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,yn),e("span",null,s(o.fromCoin.symbol),1)]),e("div",bn,s(o.currentLpInfo.myCoinXAmount),1)]),e("div",gn,[e("div",$n,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,Sn),e("span",null,s(o.toCoin.symbol),1)]),e("div",An,s(o.currentLpInfo.myCoinYAmount),1)])]),e("div",wn,[e("div",Ln,[kn,e("div",_n,s(o.currentLpInfo.myshareOfPool)+" %",1)])])])):g("",!0),o.showCoinSelect?(u(),Y(K,{key:1,"existing-coins":o.existingCoins,"last-select-coin":o.lastSelectCoin,onOnSelect:o.onCoinSelect,onOnClose:n[14]||(n[14]=r=>o.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):g("",!0),o.isShowAddress?(u(),Y(U,{key:2,"from-coins":o.fromCoin,"to-coins":o.toCoin,onOnClose:n[15]||(n[15]=r=>o.isShowAddress=!1)},null,8,["from-coins","to-coins"])):g("",!0),o.isShowSwapSetting?(u(),Y(B,{key:3,onOnClose:n[16]||(n[16]=r=>o.isShowSwapSetting=!1)})):g("",!0),o.isShowAddConfirm?(u(),Y(O,{key:4,"current-lp-info":o.currentLpInfo,"is-increase":!!(o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0),"fixed-from-coin":o.fixedFromCoin,"from-coin":o.fromCoin,"to-coin":o.toCoin,share:o.share,rate:o.rate,"lp-amount":o.lpAmountView,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"current-recived-lp":o.lpAmountView,onOnClose:n[17]||(n[17]=r=>o.isShowAddConfirm=!1),onToAdd:o.toAdd},null,8,["current-lp-info","is-increase","fixed-from-coin","from-coin","to-coin","share","rate","lp-amount","from-coin-amount","to-coin-amount","current-recived-lp","onToAdd"])):g("",!0)])}const Dn=bo(Be,[["render",In],["__scopeId","data-v-5a27b17b"]]);export{Dn as default};
