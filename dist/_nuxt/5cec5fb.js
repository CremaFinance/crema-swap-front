(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1878:function(t,o,r){var content=r(1950);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(102).default)("d36981e0",content,!0,{sourceMap:!1})},1949:function(t,o,r){"use strict";r(1878)},1950:function(t,o,r){var e=r(101)(!1);e.push([t.i,".chart[data-v-04c6f192]{position:relative}.chart .zoom-button-box[data-v-04c6f192]{width:80px;height:28px;background:linear-gradient(220deg,#3e434e,#23262b);box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:-14px}.chart .zoom-button-box div[data-v-04c6f192]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-04c6f192]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-04c6f192]{width:20px;height:20px;fill:#fff;cursor:pointer}@media screen and (max-width:750px){.chart .zoom-button-box[data-v-04c6f192]{top:0}}",""]),t.exports=e},2043:function(t,o,r){"use strict";r.r(o);var e=r(39),n=(r(36),r(88),r(121),r(334),r(29)),c=r(2035),l=r(179),h=r(60),d=r(9),f=r.n(d),m=n.default.extend({props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0}},data:function(){return{isDraw:!1,zoom:.125}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(h.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},mounted:function(){this.isDraw||!this.poolInfo||Object(h.b)(this.poolInfo)||this.dataProcessing(this.poolInfo,this.zoom)},methods:{poolInfoWatch:function(t,o){t&&!Object(h.b)(t)&&t!==o&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t,o){console.log("minPriceWatch没走到这儿####newVal",t),t!==o&&this.dataProcessing(this.poolInfo,this.zoom)},maxPriceWatch:function(t,o){console.log("maxPriceWatch没走到这儿####newVal",t),t!==o&&this.dataProcessing(this.poolInfo,this.zoom)},zoomOut:function(){if(!(this.zoom<.015625)){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},zoomIn:function(){if(!(this.zoom>32)){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},dataProcessing:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.125;if(console.log("zoom####",o),t&&t.coin){var r=this.direction?t.currentPriceView:t.currentPriceViewReverse;console.log("dataProcessing####current_price#####",r);var n=Object(l.price2Tick)(new f.a(r));console.log("这里this.minPrice####",this.minPrice),console.log("这里this.maxPrice####",this.maxPrice);var c=n+1e3*o,d=n-1e3*o;console.log("这里currentTick####",n),console.log("这里tickMax####",c),console.log("这里tickMin####",d),console.log("this.minPrice123123####",this.minPrice),console.log("this.maxPrice123123####",this.maxPrice);var m=Object(l.price2Tick)(new f.a(Object(h.c)(String(this.minPrice),12))),x=Object(l.price2Tick)(new f.a(Object(h.c)(String(this.maxPrice),12)));console.log("infos.current_liquity####",t.current_liquity.toString());var v=new f.a(t.current_liquity.toString()).div(Math.pow(10,6)).toNumber(),k=t.tick_info_array;console.log("tick_info_array######",k);for(var P=[],w=[],y={},i=0;i<k.length;i++)(y=k[i]).tick<=n&&y.tick>=d?P.unshift(y):y.tick>n&&y.tick<=c&&w.push(y);for(var z=v,M=0;M<P.length;M++)P[M].liquityAmount=z,z-=new f.a(P[M].liquity_net.toString()).div(Math.pow(10,6)).toNumber();for(var O=v,j=0;j<w.length;j++)w[j].liquityAmount=O,O+=new f.a(w[j].liquity_net.toString()).div(Math.pow(10,6)).toNumber();console.log("d3####leftArray#####",P),console.log("d3####rightArray#####",w);var A=[];A=[].concat(Object(e.a)(P.reverse()),[{tick:n,liquityAmount:v}],w),this.direction||(A=A.reverse()),console.log("d3##chartData#####",A),console.log("这里这里####minPriceTick####",m),console.log("这里这里####maxPriceTick####",x),console.log("这里这里####currentTick####",n),console.log("这里这里####tickMin####",d),console.log("这里这里####tickMax####",c),this.drawChart(A,d,c,m,x,n)}},drawChart:function(t,o,r,e,n,d){var f=this,m=20,x=20,v=20,k=20,P=460-k-x,w=195-m-v,y=[o,d-(d-o)/2,d,d+(r-d)/2,r],z=[];console.log("xArr123####",y);var M=y[0]-2*(y[1]-y[0]),O=y[4]+2*(y[4]-y[3]);console.log("utickMin#####",M),console.log("utickMax#####",O),console.log("width###",P);var j=P/(O-M);c.e("#chart").selectAll("*").remove();var svg=c.e("#chart").attr("width",P+k+x).attr("height",w+m+v).append("g").attr("transform","translate(".concat(k,",").concat(x,")")),A=c.b(t,(function(t){return Number(t.liquityAmount)}))||0,I=c.d().range([0,w]).domain([A,0]);c.c().rangeRound([0,P]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(e,n){return 0===n?0:f.direction?Math.abs(t[n-1].tick-o)*j:Math.abs(r-t[n-1].tick)*j})).attr("y",(function(o,r){return 0===r?0:f.direction?I(t[r-1].liquityAmount):I(o.liquityAmount)})).attr("width",(function(o,r){return 0===r?0:f.direction?Math.abs(o.tick-t[r-1].tick)*j:Math.abs(t[r-1].tick-o.tick)*j})).attr("height",(function(o,r){return 0===r?0:f.direction?w-I(t[r-1].liquityAmount):w-I(o.liquityAmount)})).attr("fill","#2C4A57").attr("class","bars");var _=svg.append("g"),S=(_.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),_.append("g"));if(f.direction)for(var i=0;i<y.length;i++){var C=Object(h.c)(String(Object(l.tick2Price)(y[i]).toNumber()),6)||"0";z.push(C),console.log("xArr[i]####",y[i]),console.log("tickMin####",o),console.log("unit####",j);var T=Math.abs(y[i]-M)*j;console.log("x#####",T);for(var N=0,W=0;W<C.length;W++)"1"===C[W]?N+=4.02:"."===C[W]?N+=2.64:"7"===C[W]?N+=5.48:N+=6;console.log("length#####",N),S.append("text").text(C).attr("x",T-N/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(var V=y.length-1;V>=0;V--){var D=Object(h.c)(String(Object(l.tick2Price)(y[V]).toNumber()/1),6)||"0";z.push(D);for(var E=Math.abs(y[V]-M)*j,F=0,$=0;$<D.length;$++)"1"===D[$]?F+=4.02:"."===D[$]?F+=2.64:"7"===D[$]?F+=5.48:F+=6;S.append("text").text(D).attr("x",E-F/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}console.log("xPriceArr#####",z);var B=svg.append("g").attr("id","left-handle");B.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),B.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#1EE1CF").attr("stroke","#707378").attr("transform","translate(1, 32) rotate(180)"),B.append("rect").attr("width",1).attr("height",10).attr("x",-9).attr("y",10).attr("fill","white"),B.append("rect").attr("width",1).attr("height",10).attr("x",-6).attr("y",10).attr("fill","white");var J=svg.append("g").attr("id","right-handle");J.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),J.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#005AFF").attr("stroke","#707378").attr("transform","translate(-1, -2)"),J.append("rect").attr("width",1).attr("height",10).attr("x",6).attr("y",10).attr("fill","white"),J.append("rect").attr("width",1).attr("height",10).attr("x",9).attr("y",10).attr("fill","white");var R=c.a().extent([[0,0],[P,w]]).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;console.log(t.selection),B.attr("transform","translate("+t.selection[0]+", 0)"),J.attr("transform","translate("+t.selection[1]+", 0)");var r=Object(l.tick2Price)(t.selection[0]/j+o).toNumber(),e=Object(l.tick2Price)(t.selection[1]/j+o).toNumber();f.$emit("onChangeMinPrice",String(r)),f.$emit("onChangeMaxPrice",String(e))})),X=Math.abs(e-o)*j,G=Math.abs(n-o)*j;"0"===this.minPrice&&(X=0),"∞"===this.maxPrice&&(G=P),console.log("unit####",j),console.log("this.minPrice123####",this.minPrice),console.log("this.maxPrice123####",this.maxPrice),console.log("minPriceTickX#####",X),console.log("maxPriceTickX#####",G),svg.append("g").attr("class","brush").call(R).call(R.move,[X,G]),B.attr("transform","translate("+X+", 0)"),J.attr("transform","translate("+G+", 0)"),c.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255, 255, 255, 0.4")}}}),x=m,v=(r(1949),r(103)),component=Object(v.a)(x,(function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{staticClass:"chart"},[r("div",{staticClass:"zoom-button-box"},[r("div",[r("svg",{staticClass:"icon",attrs:{id:"zoomOut","aria-hidden":"true"},on:{click:t.zoomOut}},[r("use",{attrs:{"xlink:href":"#icon-big"}})])]),t._v(" "),r("div",[r("svg",{staticClass:"icon",attrs:{id:"zoomIn","aria-hidden":"true"},on:{click:t.zoomIn}},[r("use",{attrs:{"xlink:href":"#icon-small"}})])])]),t._v(" "),r("svg",{attrs:{id:"chart"}})])}),[],!1,null,"04c6f192",null);o.default=component.exports}}]);