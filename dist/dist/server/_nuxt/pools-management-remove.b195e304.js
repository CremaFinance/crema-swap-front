import{_ as ae}from"./back.ca646315.js";import{_ as le}from"./assets-card.810a9ad9.js";import{_ as re}from"./swap-setting.677c55de.js";import{v as e,M as ce,u as U,d as j,b as W,e as O,i as z,f as K,g as S,B as G,A as de,c as ue,T as f,w as me,C as M,x as X,y as pe,z as ve,L as fe,I as ye,D as he,S as ge}from"../server.mjs";import{_ as H}from"./_plugin-vue_export-helper.a1a6add7.js";/* empty css              */import"#internal/nitro";const Ce=e.defineComponent({components:{Modal:ce},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(o,t){const E=U();j();const d=W();e.computed(()=>d),O();const b=e.ref(E.slippage||.5),a=e.ref(!0),c=e.ref(!1);function u(y){a.value=y}return{slippage:b,importIcon:z,fixD:K,decimalFormat:S,direct:a,changeDirect:u,rateChange:c,clickNextBtn:async()=>{t.emit("to-remove")}}}});const I=o=>(e.pushScopeId("data-v-0dc82e2b"),o=o(),e.popScopeId(),o),Ve=I(()=>e.createElementVNode("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ne={class:"remove-confirm-container"},ke={class:"card-content"},Se={class:"top"},Ee={class:"coin"},be=["src"],_e=e.createTextVNode(" \xA0\xA0 "),Be=I(()=>e.createElementVNode("div",{class:"svg-box"},[e.createElementVNode("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-icon-add1"})])],-1)),$e={class:"coin"},we=["src"],Le=e.createTextVNode(" \xA0\xA0 "),Ae={class:"bottom"},Ie={class:"desc"},De={class:"induction"},qe={class:"item"},Re=I(()=>e.createElementVNode("div",{class:"induction-text"},"Rate",-1)),Te={class:"induction-value induction-value-change"},Me={key:0},Oe={key:1},Fe=I(()=>e.createElementVNode("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Pe=[Fe],Ye={class:"item"},Xe={class:"induction-text"},Ue={class:"induction-value"},je=e.createTextVNode(e.toDisplayString("Confirm Remove"));function We(o,t,E,d,b,a){const c=G,u=e.resolveComponent("Modal");return e.openBlock(),e.createBlock(u,{width:"440px",visible:!0,footer:null,title:"You will receive",class:"remove-confirm-modal",onCancel:t[1]||(t[1]=N=>o.$emit("on-close"))},{closeIcon:e.withCtx(()=>[Ve]),default:e.withCtx(()=>[e.createElementVNode("div",Ne,[e.createElementVNode("div",ke,[e.createElementVNode("div",Se,[e.createElementVNode("div",Ee,[e.createElementVNode("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,be),e.createElementVNode("p",null,e.toDisplayString(o.fromCoinAmount),1),_e,e.createElementVNode("p",null,e.toDisplayString(o.fromCoin.symbol),1)]),Be,e.createElementVNode("div",$e,[e.createElementVNode("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,we),e.createElementVNode("p",null,e.toDisplayString(o.toCoinAmount),1),Le,e.createElementVNode("p",null,e.toDisplayString(o.toCoin.symbol),1)])]),e.createElementVNode("div",Ae,[e.createElementVNode("div",Ie,"Output is estimated. if the price changes by more than "+e.toDisplayString(o.slippage)+"% your transaction will revert.",1),e.createElementVNode("div",De,[e.createElementVNode("div",qe,[Re,e.createElementVNode("div",Te,[o.rateChange?(e.openBlock(),e.createElementBlock("span",Oe,"1 "+e.toDisplayString(o.toCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(1/o.currentLpInfo.price,2))+" "+e.toDisplayString(o.fromCoin.symbol),1)):(e.openBlock(),e.createElementBlock("span",Me,"1 "+e.toDisplayString(o.fromCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(o.currentLpInfo.price,2))+" "+e.toDisplayString(o.toCoin.symbol),1)),(e.openBlock(),e.createElementBlock("svg",{class:"icon-change","aria-hidden":"true",onClick:t[0]||(t[0]=N=>o.rateChange=!o.rateChange)},Pe))])]),e.createElementVNode("div",Ye,[e.createElementVNode("div",Xe,e.toDisplayString(o.fromCoin.symbol)+" - "+e.toDisplayString(o.toCoin.symbol)+" LP Burned",1),e.createElementVNode("div",Ue,e.toDisplayString(o.burnValue),1)])])])])]),e.createVNode(c,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:e.withCtx(()=>[je]),_:1},8,["onClick"])]),_:1})}const ze=H(Ce,[["render",We],["__scopeId","data-v-0dc82e2b"]]),Ke=e.defineComponent({setup(o,t){const E=e.h(de,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),d=ue.exports.useRouter();O();const b=W(),a=e.computed(()=>b),c=O(),u=e.computed(()=>c);let N=e.ref(!1),y=e.ref(!1),h=e.ref(!1),_=e.ref(!1);const B=e.ref(!1),$=e.ref(!0),n=e.ref(!0),m=e.ref(""),g=e.ref(""),k=e.ref("50"),D=U(),J=e.computed(()=>D.slippage),C=e.ref(f[d.currentRoute.value.query.from]||f.USDC),V=e.ref(f[d.currentRoute.value.query.to]||f.USDT),s=e.ref({}),q=e.ref(""),F=e.ref(""),Q=e.computed(()=>Number(m.value)?"Remove":"Enter an amount"),Z=()=>{B.value=!0,setTimeout(()=>{B.value=!1},1e3),a.value.address&&c.setMyLplist(a.value.address)},x=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],ee=()=>{const i=C.value;C.value=V.value,V.value=i,_.value=!0,setTimeout(()=>{_.value=!1},300)},oe=i=>{i==="fromCoin"?($.value=!0,m.value=C.value&&S(C.value.balance,s.value.coinA.value.decimals)||""):($.value=!1,g.value=V.value&&S(V.value.balance,s.value.coinB.value.decimals)||"")},w=j();e.watch(k,me((i,p)=>{if(k.value=i,i!==p){const l=Number(k.value)/100;k.value==="100"?R(s.value.balanceOrigin):R(M(s.value.balanceOrigin).mul(l).toString())}},500)),e.watch(s,()=>{s.value&&R(M(s.value.balanceOrigin).mul(Number(k.value)/100).toString())});const R=async i=>{const p=X(C.value.symbol,V.value.symbol);q.value=i,F.value=S(M(i).div(Math.pow(10,p.decimals)).toString(),p.decimals)||"";const l=e.ref({});if(i!==""&&i!==0&&i!=="0"){if(l.value={coinX:f[C.value.symbol],coinY:f[V.value.symbol],liquidity:i},l.value)try{const r=await w.getCoinXYForLiquidity(l.value);m.value=S(r.coinXAmount,s.value.coinA.decimals)||"",g.value=S(r.coinYAmount,s.value.coinB.decimals)||""}catch{}}else g.value="",m.value=""},L=e.ref(!1),{setIsShowSuccess:te,setIsShowRejected:P,setIsShowWaiting:A,setTransactionDesc:ne,setTransactionTxid:Y}=D,ie=async()=>{y.value=!1,L.value=!0,Y(""),ne(`Removing ${m.value} ${s.value.coinA.symbol} and 
        ${g.value} ${s.value.coinB.symbol}`),A(!0);try{const i=e.ref({});i.value={coinX:f[s.value.coinA.symbol],coinY:f[s.value.coinB.symbol],liquidity:parseInt(q.value),slippage:Number(D.slippage)/100};const p=await w.removeLiquidityTransactionPayload(i.value),l=await a.value.currentWallet.signAndSubmitTransaction(p);if(l&&l.hash){Y(l.hash),A(!1),te(!0);const r={title:"Remove Liquidity",desc:`Removed ${m.value} ${s.value.coinA.symbol} and 
        ${g.value} ${s.value.coinB.symbol}`,hash:l.hash};w.showTransitionPending(r),await w.watchTransaction(r)&&(setTimeout(()=>{c.setMyLplist(a.value.address)},3e3),setTimeout(()=>{c.setMyLplist(a.value.address)},6e3))}else A(!1),P(!0);L.value=!1}catch{L.value=!1,A(!1),P(!0)}};return e.watchEffect(async()=>{a.value.address&&c.setMyLplist(a.value.address)}),e.watchEffect(()=>{if(u.value.myLplist&&a.value.address){const i=u.value.myLplist,p=d.currentRoute.value.query.from,l=d.currentRoute.value.query.to;let r;if(p&&l&&(r=X(p,l)),r){if(!r.balance||!Number(r.balance)){d.push("/pools");return}const T=i.filter(se=>se.symbol===r.symbol)[0];T&&(s.value=T)}}}),{loading:L,indicator:E,addCommom:pe,fixD:K,prettyAmount:ve,liquidity:u,clickExchange:ee,change:_,fixedFromCoin:$,router:d,wallet:a,refresh:B,amountArr:x,sliderVal:k,slippage:J,importIcon:z,clickRefresh:Z,isShowSwapSetting:N,fromCoin:C,toCoin:V,maxBtnSelect:oe,fromCoinAmount:m,toCoinAmount:g,direct:n,rateChange:h,isShowRemoveModal:y,btnText:Q,LP_TOKENS:fe,currentLpInfo:s,selectLp:q,selectLpView:F,toRemove:ie}}});const v=o=>(e.pushScopeId("data-v-e0085664"),o=o(),e.popScopeId(),o),Ge={class:"management-remove-liquidity"},He={class:"remove-liquidity-top"},Je=v(()=>e.createElementVNode("div",{class:"remove-title"},"Remove Liquidity",-1)),Qe={class:"right title-right"},Ze=v(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),xe=v(()=>e.createElementVNode("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),eo=[xe],oo={class:"remove-liquidity-center"},to={class:"bottom"},no={class:"add-amount"},io={class:"add-amount-header"},so=v(()=>e.createElementVNode("span",null,"Amount",-1)),ao={class:"amount-list"},lo=["onClick"],ro={class:"slider-box"},co={class:"card-container"},uo={class:"card-item"},mo={class:"card-item"},po={class:"induction remove-liquidity-bottom"},vo={class:"item"},fo=v(()=>e.createElementVNode("div",{class:"induction-text"},"Rate",-1)),yo={key:0},ho={key:0},go={key:1},Co=v(()=>e.createElementVNode("svg",{class:"icon-change","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),Vo={key:0,"aria-hidden":"true"},No=v(()=>e.createElementVNode("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),ko=[No],So={key:0,class:"showMyLiquidity"},Eo={class:"myLiquidity"},bo=v(()=>e.createElementVNode("div",{class:"left"},"Your Liquidity",-1)),_o={key:0,class:"right"},Bo={class:"liquidityAsset"},$o={class:"item"},wo={class:"left"},Lo=["src"],Ao={key:0,class:"right"},Io={class:"item"},Do={class:"left"},qo=["src"],Ro={key:0,class:"right"},To={class:"induction induction-liquidity"},Mo={class:"item"},Oo=v(()=>e.createElementVNode("div",{class:"induction-text"},"Share of Pool",-1)),Fo={key:0,class:"induction-value"};function Po(o,t,E,d,b,a){const c=ae,u=ye,N=he,y=le,h=ge,_=G,B=re,$=ze;return e.openBlock(),e.createElementBlock("div",Ge,[e.createVNode(c),e.createElementVNode("div",He,[Je,e.createElementVNode("div",Qe,[e.createElementVNode("div",{class:"slippage-icon",onClick:t[0]||(t[0]=n=>o.isShowSwapSetting=!0)},[Ze,e.createElementVNode("span",null,e.toDisplayString(o.slippage)+"%",1)]),(e.openBlock(),e.createElementBlock("svg",{"aria-hidden":"true",class:e.normalizeClass(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:t[1]||(t[1]=(...n)=>o.clickRefresh&&o.clickRefresh(...n))},eo,2))])]),e.createElementVNode("div",oo,[e.createElementVNode("div",to,[e.createElementVNode("div",no,[e.createElementVNode("div",io,[so,e.createElementVNode("div",ao,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.amountArr,(n,m)=>(e.openBlock(),e.createElementBlock("div",{key:m,class:e.normalizeClass(["amount-item",o.sliderVal==n.value?"amount-item-active":""]),onClick:g=>o.sliderVal=n.value},e.toDisplayString(n.name),11,lo))),128))])]),e.createElementVNode("div",ro,[e.createVNode(u,{value:o.sliderVal,"onUpdate:value":t[2]||(t[2]=n=>o.sliderVal=n),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),e.createVNode(N,{value:o.sliderVal,"onUpdate:value":t[3]||(t[3]=n=>o.sliderVal=n)},null,8,["value"])])])])]),e.createElementVNode("div",co,[e.createElementVNode("div",uo,[e.createVNode(y,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=n=>o.fromCoinAmount=n),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.currentLpInfo.myCoinXAmount||null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:t[5]||(t[5]=n=>o.maxBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=n=>o.fromCoinAmount=n),onOnFocus:t[7]||(t[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e.createElementVNode("div",mo,[e.createVNode(y,{modelValue:o.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=n=>o.toCoinAmount=n),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":o.toCoinAmount,"coin-name":o.fromCoin?o.toCoin.symbol:"",balance:o.currentLpInfo.myCoinYAmount||null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:t[9]||(t[9]=n=>o.maxBtnSelect("toCoin")),onOnInput:t[10]||(t[10]=n=>o.toCoinAmount=n),onOnFocus:t[11]||(t[11]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])])]),e.createElementVNode("div",po,[e.createElementVNode("div",vo,[fo,e.createElementVNode("div",{class:"induction-value induction-value-change",onClick:t[12]||(t[12]=n=>o.rateChange=!o.rateChange)},[o.rateChange?(e.openBlock(),e.createElementBlock("span",go,"1 "+e.toDisplayString(o.toCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(1/o.currentLpInfo.price,2))+" "+e.toDisplayString(o.fromCoin.symbol),1)):(e.openBlock(),e.createElementBlock("span",yo,[e.createTextVNode(" 1 "+e.toDisplayString(o.fromCoin.symbol)+" \u2248 ",1),o.currentLpInfo.price?(e.openBlock(),e.createElementBlock("span",ho,e.toDisplayString(o.fixD(o.currentLpInfo.price,2)),1)):(e.openBlock(),e.createBlock(h,{key:1,indicator:o.indicator},null,8,["indicator"])),e.createTextVNode(" "+e.toDisplayString(o.toCoin.symbol),1)])),Co])])]),e.createVNode(_,{disabled:o.wallet.connected?!o.fromCoinAmount||!o.toCoinAmount||o.loading:!1,class:"remove-btn big-btn",onClick:t[13]||(t[13]=n=>o.wallet.connected?o.isShowRemoveModal=!0:o.wallet.setIsShowWalletModal(!0))},{default:e.withCtx(()=>[o.wallet.connected?(e.openBlock(),e.createElementBlock("svg",Vo,ko)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(o.wallet.connected?o.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),o.wallet.connected?(e.openBlock(),e.createElementBlock("div",So,[e.createElementVNode("div",Eo,[bo,o.currentLpInfo.myLpBalance?(e.openBlock(),e.createElementBlock("div",_o,[e.createElementVNode("p",null,e.toDisplayString(o.currentLpInfo.myLpBalance)+" LP",1),e.createElementVNode("span",null,"\u2248 $"+e.toDisplayString(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])):(e.openBlock(),e.createBlock(h,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e.createElementVNode("div",Bo,[e.createElementVNode("div",$o,[e.createElementVNode("div",wo,[e.createElementVNode("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,Lo),e.createElementVNode("span",null,e.toDisplayString(o.fromCoin.symbol),1)]),o.currentLpInfo.myCoinXAmount?(e.openBlock(),e.createElementBlock("div",Ao,e.toDisplayString(o.currentLpInfo.myCoinXAmount),1)):(e.openBlock(),e.createBlock(h,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e.createElementVNode("div",Io,[e.createElementVNode("div",Do,[e.createElementVNode("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,qo),e.createElementVNode("span",null,e.toDisplayString(o.toCoin.symbol),1)]),o.currentLpInfo.myCoinYAmount?(e.openBlock(),e.createElementBlock("div",Ro,e.toDisplayString(o.currentLpInfo.myCoinYAmount),1)):(e.openBlock(),e.createBlock(h,{key:1,indicator:o.indicator},null,8,["indicator"]))])]),e.createElementVNode("div",To,[e.createElementVNode("div",Mo,[Oo,o.currentLpInfo.myshareOfPool?(e.openBlock(),e.createElementBlock("div",Fo,e.toDisplayString(o.currentLpInfo.myshareOfPool)+" %",1)):(e.openBlock(),e.createBlock(h,{key:1,indicator:o.indicator},null,8,["indicator"]))])])])):e.createCommentVNode("",!0),o.isShowSwapSetting?(e.openBlock(),e.createBlock(B,{key:1,onOnClose:t[14]||(t[14]=n=>o.isShowSwapSetting=!1)})):e.createCommentVNode("",!0),o.isShowRemoveModal?(e.openBlock(),e.createBlock($,{key:2,"liquidity-balance":o.selectLp,"fixed-from-coin":o.fixedFromCoin,"from-coin":o.currentLpInfo.coinA,"to-coin":o.currentLpInfo.coinB,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"burn-value":o.selectLpView,"current-lp-info":o.currentLpInfo,onOnClose:t[15]||(t[15]=n=>o.isShowRemoveModal=!1),onToRemove:o.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","onToRemove"])):e.createCommentVNode("",!0)])}const Go=H(Ke,[["render",Po],["__scopeId","data-v-e0085664"]]);export{Go as default};
