(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{3325:function(t,e,o){var content=o(3380);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(211).default)("439dceb6",content,!0,{sourceMap:!1})},3379:function(t,e,o){"use strict";o(3325)},3380:function(t,e,o){var n=o(210)(!1);n.push([t.i,".chart-box[data-v-94ea37e4]{position:relative;min-height:201px}.chart-box .chart-loading[data-v-94ea37e4]{position:absolute;left:50%;top:50%;transform:translate(-50% -50%)}.chart[data-v-94ea37e4]{position:relative}.chart .zoom-button-box[data-v-94ea37e4]{width:80px;height:28px;box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:-18px}.chart .zoom-button-box div[data-v-94ea37e4]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-94ea37e4]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-94ea37e4]{width:20px;height:20px;fill:#fff;cursor:pointer}@media screen and (max-width:750px){.chart .zoom-button-box[data-v-94ea37e4]{top:-30px}}",""]),t.exports=n},3438:function(t,e,o){"use strict";o.r(e);var n=o(20),r=(o(3240),o(3241)),c=o.n(r),h=(o(177),o(21),o(50),o(41),o(57)),l=o(3352),d=o(186),f=o(98),m=o(295),x=o(220),k=h.default.extend({components:{Spin:c.a},props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:function(){return[]}},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1}},data:function(){return{isDraw:!1,zoom:1,isLoading:!1}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},tickList:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)},currentTick:function(t){this.poolInfo&&!Object(f.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},methods:{poolInfoWatch:function(t,e){t&&!Object(f.b)(t)&&t!==e&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t,e){t!==e&&this.dataProcessing(this.poolInfo,this.zoom)},maxPriceWatch:function(t,e){t!==e&&this.dataProcessing(this.poolInfo,this.zoom)},zoomOut:function(){if(!(this.zoom<.015625)){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},zoomIn:function(){if(!(this.zoom>32)){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)}},dataProcessing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t&&t.token_a&&this.tickList.length>0&&!this.chartLoading&&this.minPrice&&this.maxPrice){this.isDraw=!0;var o,r,c=this.currentTick,h=c+100*e,l=c-100*e;"0.01%"!==t.fee&&(h=c+3e3*e,l=c-3e3*e),r="∞"===this.maxPrice?0:this.direction?x.TickMath.priceToTickIndex(new m.a(this.maxPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):x.TickMath.priceToTickIndex(new m.a(1/this.minPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal),o="0"===this.minPrice?0:this.direction?x.TickMath.priceToTickIndex(new m.a(this.minPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal):x.TickMath.priceToTickIndex(new m.a(1/this.maxPrice),this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal);for(var d=Number(t.currentLiquity)/Math.pow(10,6),f=this.tickList,k=[],v=[],I={},i=0;i<f.length;i++)(I=f[i]).index<=c&&I.index>=l?k.unshift(I):I.index>c&&I.index<=h&&v.push(I);for(var w=d,y=0;y<k.length;y++)k[y].liquityAmount=w,w-=Number(k[y].liquidityNet.toString())/Math.pow(10,6);for(var _=d,P=0;P<v.length;P++)v[P].liquityAmount=_,_+=Number(v[P].liquidityNet.toString())/Math.pow(10,6);var M=[];M=[].concat(Object(n.a)(k.reverse()),[{tick:c,liquityAmount:d}],v),this.direction||(M=M.reverse()),this.drawChart(M,l,h,o,r,c)}},drawChart:function(t,e,o,n,r,c){var h=this,m=20,k=20,v=20,I=20,w=460-I-k,y=195-m-v,_=[e,c-(c-e)/2,c,c+(o-c)/2,o],P=[],M=_[0]-(_[1]-_[0]),z=_[4]+(_[4]-_[3]),T=w/(z-M);l.e("#chart").selectAll("*").remove();var svg=l.e("#chart").attr("width",w+I+k).attr("height",y+m+v).append("g").attr("transform","translate(".concat(I,",").concat(k,")")),C=l.b(t,(function(t){return Number(t.liquityAmount)}))||0,O=l.d().range([0,y]).domain([C,0]);l.c().rangeRound([0,w]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(e,o){return 0===o?0:h.direction?Math.abs(t[o-1].index-M)*T:Math.abs(z-t[o-1].index)*T})).attr("y",(function(e,o){return 0===o?0:h.direction?O(t[o-1].liquityAmount):O(e.liquityAmount)})).attr("width",(function(e,o){return 0===o?0:h.direction?Math.abs(e.index-t[o-1].index)*T:Math.abs(t[o-1].index-e.index)*T})).attr("height",(function(e,o){return 0===o?0:h.direction?y-O(t[o-1].liquityAmount):y-O(e.liquityAmount)})).attr("fill","#3F3B7F").attr("class","bars");var j=svg.append("g"),F=(j.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),j.append("g")),N=0;if(h.direction){for(var i=0;i<_.length;i++){var S=(Object(f.c)(String(Object(d.f)(_[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)<1e-6?Object(f.c)(String(Object(d.f)(_[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),9):Object(f.c)(String(Object(d.f)(_[i],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6))||"0";P.push(S);for(var A=Math.abs(_[i]-M)*T,L=0,E=0;E<S.length;E++)"1"===S[E]?L+=4.02:"."===S[E]?L+=2.64:"7"===S[E]?L+=5.48:L+=6;F.append("text").text(S).attr("x",A-L/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}N=Math.abs(c-M)*T}else{for(var W=_.length-1;W>=0;W--){var B=Object(f.c)(String(1/Object(d.f)(_[W],this.poolInfo.token_a.decimal,this.poolInfo.token_b.decimal).toNumber()),6)||"0";P.push(B);for(var D=Math.abs(_[W]-z)*T,J=0,V=0;V<B.length;V++)"1"===B[V]?J+=4.02:"."===B[V]?J+=2.64:"7"===B[V]?J+=5.48:J+=6;F.append("text").text(B).attr("x",D-J/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}N=Math.abs(c-z)*T}svg.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#7EC2FF").attr("transform","translate("+N+", 0)");var $=svg.append("g").attr("id","left-handle");$.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke",h.direction?"#1CE1CF":"#0090FF"),$.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill",h.direction?"#1CE1CF":"#0090FF").attr("transform","translate(1, 32) rotate(180)"),$.append("rect").attr("width",1).attr("height",10).attr("x",-9).attr("y",10).attr("fill","white"),$.append("rect").attr("width",1).attr("height",10).attr("x",-6).attr("y",10).attr("fill","white");var R=svg.append("g").attr("id","right-handle");R.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke",h.direction?"#0090FF":"#1CE1CF"),R.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill",h.direction?"#0090FF":"#1CE1CF").attr("transform","translate(-1, -2)"),R.append("rect").attr("width",1).attr("height",10).attr("x",6).attr("y",10).attr("fill","white"),R.append("rect").attr("width",1).attr("height",10).attr("x",9).attr("y",10).attr("fill","white");var G,H,K=l.a().extent([[0,0],[w,y]]).handleSize(30).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;var e,o;$.attr("transform","translate("+t.selection[0]+", 0)"),R.attr("transform","translate("+t.selection[1]+", 0)"),h.direction?(e=x.TickMath.tickIndexToPrice(t.selection[0]/T+M,h.poolInfo.token_a.decimal,h.poolInfo.token_b.decimal).toNumber(),o=x.TickMath.tickIndexToPrice(t.selection[1]/T+M,h.poolInfo.token_a.decimal,h.poolInfo.token_b.decimal).toNumber()):(e=1/x.TickMath.tickIndexToPrice(z-t.selection[0]/T,h.poolInfo.token_a.decimal,h.poolInfo.token_b.decimal).toNumber(),o=1/x.TickMath.tickIndexToPrice(z-t.selection[1]/T,h.poolInfo.token_a.decimal,h.poolInfo.token_b.decimal).toNumber());h.$emit("onChangeMinPrice",String(e)),h.$emit("onChangeMaxPrice",String(o))}));this.direction?(G=n<M?-100:Math.abs(n-M)*T,H=r<M?-100:Math.abs(r-M)*T):(H=n<M?-100:Math.abs(z-n)*T,G=r<M?-100:Math.abs(z-r)*T),"0"===this.minPrice&&(G=0),"∞"===this.maxPrice&&(H=w),svg.append("g").attr("class","brush").call(K).call(K.move,[G,H]),$.attr("transform","translate("+G+", 0)"),R.attr("transform","translate("+H+", 0)"),l.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#000000"),this.isDraw=!1}}}),v=k,I=(o(3379),o(212)),component=Object(I.a)(v,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.chartLoading,expression:"!chartLoading"}],staticClass:"chart"},[e("div",{staticClass:"zoom-button-box"},[e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomOut","aria-hidden":"true"},on:{click:t.zoomOut}},[e("use",{attrs:{"xlink:href":"#icon-big"}})])]),t._v(" "),e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomIn","aria-hidden":"true"},on:{click:t.zoomIn}},[e("use",{attrs:{"xlink:href":"#icon-small"}})])])]),t._v(" "),e("svg",{attrs:{id:"chart"}})]),t._v(" "),t.chartLoading?e("Spin",{staticClass:"chart-loading"}):t._e()],1)}),[],!1,null,"94ea37e4",null);e.default=component.exports}}]);