(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1700:function(t,r,e){var content=e(1754);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(62).default)("91b0e2f8",content,!0,{sourceMap:!1})},1753:function(t,r,e){"use strict";e(1700)},1754:function(t,r,e){var n=e(61)(!1);n.push([t.i,".chart[data-v-e6696870]{position:relative}.chart .zoom-button-box[data-v-e6696870]{width:80px;height:28px;background:linear-gradient(220deg,#3e434e,#23262b);box-shadow:0 2px 9px 0 rgba(26,28,31,.52);border-radius:10px;display:flex;align-items:center;position:absolute;right:0;top:0}.chart .zoom-button-box div[data-v-e6696870]{width:40px;height:20px;display:flex;align-items:center;justify-content:center}.chart .zoom-button-box div[data-v-e6696870]:first-child{border-right:1px solid hsla(0,0%,100%,.1)}.chart .zoom-button-box div svg[data-v-e6696870]{width:20px;height:20px;fill:#fff;cursor:pointer}",""]),t.exports=n},1851:function(t,r,e){"use strict";e.r(r);var n=e(92),o=(e(130),e(387),e(13)),c=e(1843),l=e(203),h=e(77),d=o.default.extend({props:{poolInfo:{type:Object,default:function(){return{}}},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0}},data:function(){return{isDraw:!1,zoom:1}},watch:{poolInfo:{handler:"poolInfoWatch",immediate:!0},minPrice:{handler:"minPriceWatch",immediate:!0},maxPrice:{handler:"maxPriceWatch",immediate:!0},direction:function(t){this.poolInfo&&!Object(h.b)(this.poolInfo)&&this.dataProcessing(this.poolInfo,this.zoom)}},mounted:function(){this.isDraw||!this.poolInfo||Object(h.b)(this.poolInfo)||this.dataProcessing(this.poolInfo,this.zoom)},methods:{poolInfoWatch:function(t,r){t&&!Object(h.b)(t)&&t!==r&&this.dataProcessing(t,this.zoom)},minPriceWatch:function(t){this.currentChartData&&this.currentChartData.length>0&&this.updateChartRange(t,this.maxPrice)},maxPriceWatch:function(t){this.currentChartData&&this.currentChartData.length>0&&("∞"!==t?this.updateChartRange(this.minPrice,t):this.updateChartRange(this.minPrice,String(this.currentChartData[this.currentChartData.length-1][0])))},zoomOut:function(){var t=this.zoom/2;this.zoom=t,this.dataProcessing(this.poolInfo,t)},zoomIn:function(){var t=2*this.zoom;this.zoom=t,this.dataProcessing(this.poolInfo,t)},dataProcessing:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t&&t.coin){var e=t.currentPriceView,o=Object(l.j)(Math.sqrt(e)),c=(o+1e3)*r,h=(o-1e3)*r,d=Object(l.j)(this.minPrice),f=Object(l.j)(this.maxPrice);console.log("tickMax#####",c),console.log("tickMin#####",h);for(var m=t.current_liquity.toNumber(),v=t.tick_info_array,x=[],y=[],k={},i=0;i<v.length;i++)(k=v[i]).tick<=o&&k.tick>=h?x.unshift(k):k.tick>o&&k.tick<=c&&y.push(k);for(var w=m,z=0;z<x.length;z++)x[z].liquityAmount=w,w-=x[z].liquity_net.toNumber();for(var P=m,C=0;C<y.length;C++)y[C].liquityAmount=P,P+=y[C].liquity_net.toNumber();console.log("d3####leftArray#####",x),console.log("d3####rightArray#####",y);var j=[];j=[].concat(Object(n.a)(x.reverse()),[{tick:o,liquityAmount:m}],y),this.direction||(j=j.reverse()),console.log("d3##chartData#####",j),this.drawChart(j,h,c,d,f,o)}},drawChart:function(t,r,e,n,o,d){console.log("进来了吗####d3###drawChart");var f=this,m=20,v=20,x=20,y=20,k=460-y-v,w=195-m-x,z=k/(e-r);console.log("unit####",z),c.e("#chart").selectAll("*").remove();var svg=c.e("#chart").attr("width",k+y+v).attr("height",w+m+x).append("g").attr("transform","translate(".concat(y,",").concat(v,")")),P=c.b(t,(function(t){return Number(t.liquityAmount)}))||0;console.log("d3######",P);var C=c.d().range([0,w]).domain([P,0]);c.c().rangeRound([0,k]).padding(.1);svg.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect").attr("x",(function(n,o){return 0===o?0:f.direction?Math.abs(t[o-1].tick-r)*z:Math.abs(e-t[o-1].tick)*z})).attr("y",(function(r,e){return 0===e?0:f.direction?C(t[e-1].liquityAmount):C(r.liquityAmount)})).attr("width",(function(r,e){return 0===e?0:f.direction?Math.abs(r.tick-t[e-1].tick)*z:Math.abs(t[e-1].tick-r.tick)*z})).attr("height",(function(r,e){return 0===e?0:f.direction?w-C(t[e-1].liquityAmount):w-C(r.liquityAmount)})).attr("fill","#2C4A57").attr("class","bars");var j=svg.append("g"),M=(j.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D"),j.append("g")),O=[r/1.2,r/2.4,d,e/2.4,e/1.2],A=[];if(f.direction)for(var i=0;i<O.length;i++){var I=Object(h.c)(String(Object(l.k)(O[i])),6)||"0";A.push(I);for(var _=Math.abs(O[i]-r)*z,D=0,S=0;S<I.length;S++)"1"===I[S]?D+=4.02:"."===I[S]?D+=4:D+=5.7;M.append("text").text(I).attr("x",_-D/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(var W=O.length-1;W>=0;W--){var E=Object(h.c)(String(Object(l.k)(O[W])/1),6)||"0";A.push(E);for(var N=Math.abs(O[W]-r)*z,R=0,F=0;F<E.length;F++)"1"===E[F]?R+=4.02:"."===E[F]?R+=4:R+=5.7;M.append("text").text(E).attr("x",N-R/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}console.log("xPriceArr#####",A);var V=svg.append("g").attr("id","left-handle");V.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),V.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#1EE1CF").attr("stroke","#707378").attr("transform","translate(1, 32) rotate(180)"),V.append("rect").attr("width",1).attr("height",10).attr("x",-9).attr("y",10).attr("fill","white"),V.append("rect").attr("width",1).attr("height",10).attr("x",-6).attr("y",10).attr("fill","white");var $=svg.append("g").attr("id","right-handle");$.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","rgba(255, 255, 255, 0.4)"),$.append("path").attr("d","M 1 0 V 0 M 0 1 h 12 q 5 0, 5 5 v 22 q 0 5 -5 5 h -12 z").attr("fill","#005AFF").attr("stroke","#707378").attr("transform","translate(-1, -2)"),$.append("rect").attr("width",1).attr("height",10).attr("x",6).attr("y",10).attr("fill","white"),$.append("rect").attr("width",1).attr("height",10).attr("x",9).attr("y",10).attr("fill","white");var B=c.a().extent([[0,0],[k,w]]).on("end",(function(t){if(!t.sourceEvent)return;if(!t.selection)return;console.log(t.selection),V.attr("transform","translate("+t.selection[0]+", 0)"),$.attr("transform","translate("+t.selection[1]+", 0)");var e=Object(l.k)(t.selection[0]/z+r),n=Object(l.k)(t.selection[1]/z+r);f.$emit("onChangeMinPrice",String(e)),f.$emit("onChangeMaxPrice",String(n))})),J=Math.abs(n-r)*z,G=Math.abs(o-r)*z;svg.append("g").attr("class","brush").call(B).call(B.move,[J,G]),V.attr("transform","translate("+J+", 0)"),$.attr("transform","translate("+G+", 0)"),c.e(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","rgba(255, 255, 255, 0.4")}}}),f=d,m=(e(1753),e(55)),component=Object(m.a)(f,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"chart"},[e("div",{staticClass:"zoom-button-box"},[e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomOut","aria-hidden":"true"},on:{click:t.zoomOut}},[e("use",{attrs:{"xlink:href":"#icon-big"}})])]),t._v(" "),e("div",[e("svg",{staticClass:"icon",attrs:{id:"zoomIn","aria-hidden":"true"},on:{click:t.zoomIn}},[e("use",{attrs:{"xlink:href":"#icon-small"}})])])]),t._v(" "),e("svg",{attrs:{id:"chart"}})])}),[],!1,null,"e6696870",null);r.default=component.exports}}]);