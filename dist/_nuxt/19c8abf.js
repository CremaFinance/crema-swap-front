(window.webpackJsonp=window.webpackJsonp||[]).push([[3,30],{3013:function(t,e,n){"use strict";n.r(e);n(611);var r=n(431),o=n.n(r),c=(n(610),n(292)),l=n.n(c),d=(n(87),n(45)),f=n(200),h=n(962);d.default.use(l.a);var m=d.default.extend({components:{Modal:l.a,Button:o.a},props:{currentPool:{type:Object,default:function(){return{}}},currentPosition:{type:Object,default:function(){return{}}},newPoolInfo:{type:Object,default:function(){return{}}},isUnStaking:{type:Boolean,default:!1},unStakeSuccess:{type:Boolean,default:!1},unStakeFailed:{type:Boolean,default:!1},newStakeSuccess:{type:Boolean,default:!1},newStakeFailed:{type:Boolean,default:!1},isNewStaking:{type:Boolean,default:!1}},computed:Object.assign(Object.assign({},Object(f.e)(["wallet","farmingv2"])),{newPoolApr:function(){var t;return this.farmingv2.aprAndTvlObj&&this.newPoolInfo&&this.newPoolInfo.mpKey?(null===(t=this.farmingv2.aprAndTvlObj[this.newPoolInfo.mpKey])||void 0===t?void 0:t.aprView)+"%":0}}),watch:{newStakeSuccess:function(t){t&&this.closeTips()}},methods:{importIcon:h.a,closeTips:function(){this.$emit("onClose")},unstake:function(){this.$emit("onUnstake")},processNftAddress:function(address){return address?"".concat(address.substr(0,4),"...").concat(address.substr(address.length-4,4)):""}}}),k=(n(3125),n(150)),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"caffeine-unstake-tips-modal",attrs:{title:"Migrate to new pool","z-index":999,centered:"",width:"400px",visible:!0,footer:null},on:{cancel:t.closeTips}},[r("div",{staticClass:"unstake-tips-content"},[r("div",{staticClass:"info-block"},[r("div",{staticClass:"left"},[t.currentPool&&t.currentPool.tokenA?r("img",{attrs:{src:t.currentPool.tokenA.icon||t.importIcon("/coins/"+t.currentPool.tokenA.symbol.toLowerCase()+".png")}}):t._e(),t._v(" "),t.currentPool&&t.currentPool.tokenB?r("img",{staticClass:"last",attrs:{src:t.currentPool.tokenB.icon||t.importIcon("/coins/"+t.currentPool.tokenB.symbol.toLowerCase()+".png")}}):t._e(),t._v(" "),r("span",[t._v(t._s(t.currentPool&&t.currentPool.name))])]),t._v(" "),r("div",{staticClass:"right"},[t._v("\n        NFT "),r("span",[t._v(t._s(t.currentPosition&&t.processNftAddress(t.currentPosition.nftMintAddress)))])])]),t._v(" "),r("div",{staticClass:"tips"},[t._v("\n      Stake to the new pool, enjoy "),r("span",[t._v(t._s(t.newPoolApr))]),t._v(" APR\n    ")]),t._v(" "),r("div",{staticClass:"schedule-box"},[r("div",{staticClass:"schedule-block",class:t.unStakeSuccess?"disabled":""},[r("i",[t._v("1")]),t._v(" "),r("span",[t._v("Unstake from Caffeine Farm")])]),t._v(" "),r("img",{staticClass:"arrow-icon",attrs:{src:n(1518)}}),t._v(" "),r("div",{staticClass:"schedule-block",class:t.unStakeSuccess?"":"disabled"},[r("i",[t._v("2")]),t._v(" "),r("span",[t._v("Stake to Earn More")])])]),t._v(" "),r("div",{staticClass:"btn-box"},[t.unStakeSuccess?r("Button",{staticClass:"unstake-btn",attrs:{loading:t.isNewStaking,disabled:t.isNewStaking},on:{click:function(e){return t.$emit("onNewStake")}}},[t._v("Stake")]):r("Button",{staticClass:"unstake-btn",attrs:{loading:t.isUnStaking,disabled:t.isUnStaking},on:{click:t.unstake}},[t._v("Unstake")])],1)])])}),[],!1,null,"29366dbc",null);e.default=component.exports},3043:function(t,e,n){"use strict";var r=n(44),o=(n(2916),n(2917)),c=n.n(o),l=(n(2930),n(2931)),d=n.n(l),f=(n(611),n(431)),h=n.n(f),m=(n(52),n(27),n(59),n(68),n(113),n(87),n(373),n(45)),k=n(962),v=n(200),w=n(85),x=n(1),S=n(10),y=n(407),O=n(13),j=function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function d(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,d)}f((r=r.apply(t,e||[])).next())}))};m.default.use(h.a),e.a=m.default.extend({components:{Button:h.a,Tooltip:d.a,Spin:c.a},props:{isStaked:{type:String,default:"All"},stakeSuccess:{type:Boolean,default:!1},stakeFailed:{type:Boolean,default:!1},isNewStaking:{type:Boolean,default:!1}},data:function(){return{stakeTitle:"Stake",showStake:!1,isShowTableTr:-1,changeNFT:!1,dataNFT:!0,tableData:[{NFTID:"2",Liquidity:"$ 856.89",PriceRange:"1 - 1.002",isStaked:"Stake"},{NFTID:"1",Liquidity:"$ 1,395.27",PriceRange:"1 - 1.002",isStaked:"Unstake"}],nftData:[],isEewardRangeTab:-1,dataList:[],isStaking:!1,isUnStaking:!1,isClaiming:!1,isDisabled:!1,currentPosition:null,currentPool:null,tvlDataObjNew:{},isOpenArr:{},showUnstakeTips:!1,newPoolInfo:null,unStakeSuccess:!1,unStakeFailed:!1,newPoolObj:null}},computed:Object.assign({},Object(v.e)(["wallet","transaction","url","farming","liquidity","farmingv2"])),watch:{"farming.farmingList":{handler:"watchFarmingList",immediate:!0},tableData:{handler:function(t,e){t[0]?this.changeNFT=!1:this.changeNFT=!0},deep:!0},tvlData:{handler:"tvlDataWatch",immediate:!0},"farmingv2.farmingList":{handler:"farmingv2ListWatch",immediate:!0}},methods:{importIcon:k.a,farmingv2ListWatch:function(t){var e={};t&&t.forEach((function(t){e[t.name]=t})),this.newPoolObj=e},closeUnstakeTips:function(){this.showUnstakeTips=!1},openUnstake:function(t,e){this.currentPool=t,this.currentPosition=e;var n=this.farmingv2.farmingList.filter((function(e){return e.name.toUpperCase()===t.name.toUpperCase()}));t.isEnded&&n&&n.length>0?(this.newPoolInfo=n[0],this.showUnstakeTips=!0):this.toUnStake(t,e)},toNewStake:function(){this.$emit("newStake",this.newPoolInfo,this.currentPosition)},gotoUnstake:function(){this.toUnStake(this.currentPool,this.currentPosition)},tvlDataWatch:function(t){t&&(this.tvlDataObjNew=t)},gotoLp:function(t){if(t){var e=t.tokenA.symbol;"WSOL"===t.tokenA.symbol.toUpperCase()&&(e="SOL");var n=t.tokenB.symbol;"WSOL"===t.tokenB.symbol.toUpperCase()&&(n="SOL"),this.$router.push("/deposit?from=".concat(e,"&to=").concat(n))}},processNftAddress:function(address){return address?"".concat(address.substr(0,4),"...").concat(address.substr(address.length-4,4)):""},watchFarmingList:function(t){this.dataList=t},toogleData:function(t,e){var n=JSON.parse(JSON.stringify(this.isOpenArr));this.isOpenArr=Object.assign(Object.assign({},n),Object(r.a)({},t,!n[t])),n[t]||this.$accessor.farming.getPositionObj({tvlData:this.tvlData,farmingInfo:e,rates:this.liquidity.rates})},toStake:function(t,e){return j(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,c,l,d,f,h,m,k,v,O,j,P,$;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.currentPool=t,this.currentPosition=e,this.isStaking=!0,this.isDisabled=!0,r=new x.PublicKey(t.positionWrapper),o=e.nftTokenId,c=new x.PublicKey(t.rewarderKey),l=this.$wallet,d=this.$web3,f=Object(y.i)(d,l),n.next=12,w.b.fetchPositionWrapper(r,d);case 12:return h=n.sent,Object(S.default)(null!==h,"wrapper not found"),n.next=16,w.b.fetchSwapPositionsByOwner(h.swapKey,o,d);case 16:return m=n.sent,Object(S.default)(null!==m,"Can't find the swap position you own"),this.$accessor.transaction.setTransactionDesc("Stake ".concat(t.name," NFT")),this.$accessor.transaction.setShowWaiting(!0),k="",n.prev=21,n.next=24,f.positionWrapper.mintAndStake({wrapper:h,nftMint:o,rewarderKey:c});case 24:return v=n.sent,O={skipPreflight:!0,commitment:"confirmed",preflightCommitment:"confirmed",maxRetries:30,printLogs:!0},n.next=28,v.tx.send(O);case 28:return j=n.sent,this.$accessor.transaction.setShowWaiting(!1),j&&j.signature&&(k=j.signature,P="Stake ".concat(t.name," NFT"),this.$accessor.transaction.setShowSubmitted(!0),$=this,this.$accessor.transaction.sub({txid:k,description:P,type:"Stake",successCallback:function(){$.isStaking=!1,$.isDisabled=!1,$.toRefresh(),$.$accessor.farming.getPositionObj({tvlData:$.tvlData,farmingInfo:t,rates:$.liquidity.rates})},errorCallback:function(){$.isStaking=!1,$.isDisabled=!1}})),n.next=33,j.wait({commitment:"confirmed",useWebsocket:!0,retries:30});case 33:n.sent,n.next=44;break;case 36:n.prev=36,n.t0=n.catch(21),this.$accessor.transaction.setShowWaiting(!1),this.$accessor.transaction.setShowSubmitted(!1),this.isStaking=!1,this.isDisabled=!1,this.$notify.close(k+"loading"),this.$notify.error({key:"StakeErr",message:"Transaction failed",description:""});case 44:case"end":return n.stop()}}),n,this,[[21,36]])})))},toUnStake:function(t,e){return j(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,c,l,d,f,h,m,k,v,O,j,P,$;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.unStakeSuccess=!1,this.unStakeFailed=!1,this.currentPool=t,this.currentPosition=e,this.isUnStaking=!0,this.isDisabled=!0,r=new x.PublicKey(t.positionWrapper),o=new x.PublicKey(e.nftMintAddress),c=new x.PublicKey(t.rewarderKey),l=!1,d=this.$wallet,f=this.$web3,h=Object(y.i)(f,d),this.$accessor.transaction.setTransactionDesc("Unstake ".concat(t.name," NFT")),this.$accessor.transaction.setShowWaiting(!0),n.next=17,w.b.fetchPositionWrapper(r,f);case 17:return m=n.sent,Object(S.default)(null!==m,"wrapper not found"),k="",n.prev=20,n.next=23,h.positionWrapper.unstakeAndBurn({wrapper:m,nftMint:o,rewarderKey:c,isClaim:l});case 23:return v=n.sent,O={skipPreflight:!0,commitment:"confirmed",preflightCommitment:"confirmed",maxRetries:30,printLogs:!0},n.next=27,v.send(O);case 27:return j=n.sent,this.$accessor.transaction.setShowWaiting(!1),j&&j.signature&&(k=j.signature,P="Unstake ".concat(t.name," NFT"),this.$accessor.transaction.setShowSubmitted(!0),$=this,this.$accessor.transaction.sub({txid:k,description:P,type:"Unstake",successCallback:function(){$.unStakeSuccess=!0,$.isUnStaking=!1,$.isDisabled=!1,$.toRefresh(),$.$accessor.farming.getPositionObj({tvlData:$.tvlData,farmingInfo:t,rates:$.liquidity.rates})},errorCallback:function(){$.unStakeFailed=!0,$.isUnStaking=!1,$.isDisabled=!1}})),n.next=32,j.wait({commitment:"confirmed",useWebsocket:!0,retries:30});case 32:n.sent,n.next=44;break;case 35:n.prev=35,n.t0=n.catch(20),this.unStakeFailed=!0,this.$accessor.transaction.setShowWaiting(!1),this.$accessor.transaction.setShowSubmitted(!1),this.isUnStaking=!1,this.isDisabled=!1,this.$notify.close(k+"loading"),this.$notify.error({key:"UnStakeErr",message:"Transaction failed",description:""});case 44:case"end":return n.stop()}}),n,this,[[20,35]])})))},minerWrapper:function(t,e){return j(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,c,l,d,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.$wallet,o=this.$web3,c=Object(y.i)(o,r),n.next=5,c.mine.loadRewarderWrapper(t);case 5:return l=n.sent,n.next=8,O.k.load(c.provider.connection,e);case 8:return d=n.sent,Object(S.default)(null!==d),n.next=12,l.getQuarry(d);case 12:return f=n.sent,n.next=15,f.getMinerActions(r.publicKey);case 15:return n.abrupt("return",n.sent);case 16:case"end":return n.stop()}}),n,this)})))},toClaim:function(t){return j(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPool=t,this.isClaiming=!0,this.isDisabled=!0,this.$web3,n=new x.PublicKey(t.rewarderKey),r=new x.PublicKey(t.positionWrapperWrapMint),this.$accessor.transaction.setTransactionDesc("Harvest all rewards"),this.$accessor.transaction.setShowWaiting(!0),o="",e.prev=9,e.next=12,this.minerWrapper(n,r);case 12:return c=e.sent,e.next=15,c.claim();case 15:return l=e.sent,d={skipPreflight:!0,commitment:"confirmed",preflightCommitment:"confirmed",maxRetries:30,printLogs:!0},e.next=19,l.send(d);case 19:if(f=e.sent,this.$accessor.transaction.setShowWaiting(!1),!f||!f.signature){e.next=30;break}return o=f.signature,"Harvest all rewards",h=this,this.$accessor.transaction.setShowSubmitted(!0),this.$accessor.transaction.sub({txid:o,description:"Harvest all rewards",type:"Harvest",successCallback:function(){h.isClaiming=!1,h.isDisabled=!1,h.toRefresh(),h.$accessor.farming.getPositionObj({tvlData:h.tvlData,farmingInfo:t,rates:h.liquidity.rates})},errorCallback:function(){h.isClaiming=!1,h.isDisabled=!1}}),e.next=29,f.wait({commitment:"confirmed",useWebsocket:!0,retries:30});case 29:e.sent;case 30:e.next=40;break;case 32:e.prev=32,e.t0=e.catch(9),this.$accessor.transaction.setShowWaiting(!1),this.$accessor.transaction.setShowSubmitted(!1),this.isClaiming=!1,this.isDisabled=!1,this.$notify.close(o+"loading"),this.$notify.error({key:"HarvestErr",message:"Transaction failed",description:""});case 40:case"end":return e.stop()}}),e,this,[[9,32]])})))}}})},3044:function(t,e,n){"use strict";n(2916);var r=n(2917),o=n.n(r),c=(n(192),n(27),n(59),n(62),n(45)),l=n(200),d=n(88),f=n(131);e.a=c.default.extend({components:{Spin:o.a},data:function(){return{poolStatus:"All",searchKey:"",showFarm:"Farming",tvlData:null,timer:null,earningTimer:null}},computed:Object.assign(Object.assign({},Object(l.e)(["farming","wallet","liquidity"])),{farmingConfigData:function(){return{walletConnected:this.wallet.connected,rates:this.liquidity.rates,farmingConfigObj:this.farming.farmingConfigObj,tvlData:this.tvlData}}}),watch:{farmingConfigData:function(t,e){t.rates&&t.farmingConfigObj&&t.tvlData&&this.farming.farmingList.length<1&&this.$accessor.farming.getFarmingList({rates:t.rates,farmingConfig:t.farmingConfigObj,haveLoading:!0,tvlData:t.tvlData}),t.rates&&t.farmingConfigObj&&t.tvlData&&t.walletConnected&&Object(d.b)(this.farming.earningObj)&&this.$accessor.farming.getEarningsObj(!0)},"liquidity.poolsObj":{handler:"tokensObjWatch",immediate:!0}},created:function(){this.getFarmTvl()},mounted:function(){var t=this;this.timer=setInterval((function(){t.toRefresh(!0)}),2e4)},destroyed:function(){clearInterval(this.timer),this.timer=null},methods:{tokensObjWatch:function(t){t&&!Object(d.b)(t)&&this.$accessor.farming.getFarmingConfig(t)},getFarmTvl:function(){var t=this;this.$axios.get("https://api.crema.finance/farm/tvl").then((function(e){var n={};e&&e.wrappers&&e.wrappers.forEach((function(t){var e=100*t.apr,r=t.tvl;n[t.address]=Object.assign(Object.assign({},t),{aprView:e>1e4?1/0:"".concat(Object(d.d)(e,2),"%"),tvlView:r?"$ ".concat(Object(d.a)(r,2)):"--",etrMinPrice:Object(d.c)(Object(f.e)(t.etrMin).toString(),6),etrMaxPrice:Object(d.c)(Object(f.e)(t.etrMax).toString(),6)})})),t.tvlData=n}))},refreshEarningsObj:function(){this.$accessor.farming.getEarningsObj()},toRefresh:function(t){this.$accessor.farming.getFarmingList({rates:this.farmingConfigData.rates,farmingConfig:this.farmingConfigData.farmingConfigObj,haveLoading:!t,tvlData:this.tvlData}),this.getFarmTvl(),this.wallet.connected&&(this.$accessor.farming.getEarningsObj(!t),this.$accessor.wallet.getTokenAccounts())}}})},3046:function(t,e,n){var content=n(3126);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(149).default)("e41cb2c4",content,!0,{sourceMap:!1})},3125:function(t,e,n){"use strict";n(3046)},3126:function(t,e,n){var r=n(148)(!1);r.push([t.i,".gradient-btn-large[data-v-29366dbc]{width:100%;height:56px;background:linear-gradient(268deg,#5fe6d0,#596eff 32%,#6950f5 68%,#ad4ff6);box-shadow:0 4px 6px 0 rgba(26,28,31,.5);border-radius:10px;font-size:18px;font-weight:700;border:1px solid #e8e4ff;color:#fff}.gradient-btn-large[data-v-29366dbc]:hover{background:linear-gradient(268deg,#68f5de,#6c7fff 32%,#7058f8 68%,#ba60ff)}.gradient-btn-large[data-v-29366dbc]:disabled{border:2px solid rgba(232,228,255,.1);cursor:not-allowed}.gradient-btn-large[data-v-29366dbc]:disabled,.gradient-btn-large[data-v-29366dbc]:disabled:hover{background:hsla(0,0%,100%,.1)}.new-gradient-btn-large[data-v-29366dbc]{width:100%;height:56px;box-shadow:0 4px 12px 0 rgba(26,28,31,.5);border-radius:16px;margin-top:20px}.farm-btn-small[data-v-29366dbc],.new-gradient-btn-large[data-v-29366dbc]{background:linear-gradient(180deg,#e4e2fe,#2881f2);padding:1px}.farm-btn-small[data-v-29366dbc]{line-height:1;height:40px;border-radius:6px;border:none}.farm-btn-small div[data-v-29366dbc]{text-align:center;border-radius:6px;font-size:14px;font-weight:400;color:#fff;background:linear-gradient(268deg,#5fe6d0,#597bff 38%,#9380ff 72%,#e590ff)}.farm-btn-small div[data-v-29366dbc]:hover{background:linear-gradient(270deg,#93ffed,#84caff 34%,#a291ff 68%,#efb9ff)}.unstake-tips-content .info-block[data-v-29366dbc]{width:100%;height:72px;background:#282c34;border-radius:10px;padding:8px;display:flex;align-items:center;justify-content:space-between}.unstake-tips-content .info-block .left[data-v-29366dbc]{display:flex;align-items:center}.unstake-tips-content .info-block .left img[data-v-29366dbc]{width:32px;height:32px;border-radius:100%}.unstake-tips-content .info-block .left img.last[data-v-29366dbc]{margin-left:-10px}.unstake-tips-content .info-block .left span[data-v-29366dbc]{font-size:14px;color:#fff;margin-left:4px}.unstake-tips-content .info-block .right[data-v-29366dbc]{font-size:14px;color:#b5b8c2}.unstake-tips-content .info-block .right span[data-v-29366dbc]{font-size:14px;color:#fff;margin-left:8px}.unstake-tips-content .tips[data-v-29366dbc]{margin-top:30px;color:#fff;font-size:16px}.unstake-tips-content .tips span[data-v-29366dbc]{font-family:Arial-BoldMT,Arial;font-weight:400;color:#c88aff;line-height:20px;background:linear-gradient(90deg,#ae85ff,#94ffe4);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.unstake-tips-content .schedule-box[data-v-29366dbc]{position:relative;margin-top:18px}.unstake-tips-content .schedule-box .schedule-block[data-v-29366dbc]{width:100%;height:48px;background:rgba(40,44,52,.5);border-radius:10px;padding:0 20px;display:flex;align-items:center}.unstake-tips-content .schedule-box .schedule-block[data-v-29366dbc]:last-child{margin-top:28px}.unstake-tips-content .schedule-box .schedule-block.disabled i[data-v-29366dbc]{background:none;border:1px solid hsla(0,0%,100%,.1);color:hsla(0,0%,100%,.5)}.unstake-tips-content .schedule-box .schedule-block.disabled span[data-v-29366dbc]{color:hsla(0,0%,100%,.5)}.unstake-tips-content .schedule-box .schedule-block i[data-v-29366dbc]{display:flex;width:24px;height:24px;background:linear-gradient(270deg,#5fe6d0,#6145ff);align-items:center;justify-content:center;color:#fff;font-size:14px;font-style:normal;border-radius:100%;line-height:24px;vertical-align:middle}.unstake-tips-content .schedule-box .schedule-block span[data-v-29366dbc]{margin-left:12px;font-size:14px;color:#fff}.unstake-tips-content .schedule-box .arrow-icon[data-v-29366dbc]{position:absolute;height:36px;left:26px;top:44px}.btn-box[data-v-29366dbc]{width:100%;display:flex;align-items:center;justify-content:center;padding-top:28px}.btn-box .unstake-btn[data-v-29366dbc]{height:56px;background:linear-gradient(268deg,#5fe6d0,#596eff 32%,#6950f5 68%,#ad4ff6);box-shadow:0 4px 6px 0 rgba(26,28,31,.5);border-radius:10px;font-size:18px;font-weight:700;border:1px solid #e8e4ff;color:#fff;width:100%;height:40px;line-height:1;font-size:14px;font-weight:100;border-radius:8px}.btn-box .unstake-btn[data-v-29366dbc]:hover{background:linear-gradient(268deg,#68f5de,#6c7fff 32%,#7058f8 68%,#ba60ff)}.btn-box .unstake-btn[data-v-29366dbc]:disabled{border:2px solid rgba(232,228,255,.1);background:hsla(0,0%,100%,.1);cursor:not-allowed}.btn-box .unstake-btn[data-v-29366dbc]:disabled:hover{background:hsla(0,0%,100%,.1)}",""]),t.exports=r}}]);